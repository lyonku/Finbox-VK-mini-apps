{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"size\", \"name\", \"options\", \"getRootRef\", \"onChange\", \"value\", \"defaultValue\", \"children\"],\n  _excluded2 = [\"label\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { generateRandomId, noop } from \"../../lib/utils\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { SegmentedControlOption } from \"./SegmentedControlOption/SegmentedControlOption\";\nvar warn = warnOnce(\"SegmentedControl\");\nexport var SegmentedControl = function SegmentedControl(_ref) {\n  var _ref$size = _ref.size,\n    size = _ref$size === void 0 ? \"l\" : _ref$size,\n    name = _ref.name,\n    options = _ref.options,\n    getRootRef = _ref.getRootRef,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n    value = _ref.value,\n    defaultValue = _ref.defaultValue,\n    children = _ref.children,\n    restProps = _objectWithoutProperties(_ref, _excluded);\n  var initialValue = defaultValue !== null && defaultValue !== void 0 ? defaultValue : value;\n  if (!initialValue) {\n    var _options$;\n    initialValue = (_options$ = options[0]) === null || _options$ === void 0 ? void 0 : _options$.value;\n  }\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activeOptionIdx = _React$useState2[0],\n    updateActiveOptionIdx = _React$useState2[1];\n  var _React$useState3 = React.useState(initialValue),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    activeValue = _React$useState4[0],\n    updateActiveValue = _React$useState4[1];\n  var nameRef = React.useRef(name !== null && name !== void 0 ? name : generateRandomId());\n  useIsomorphicLayoutEffect(function () {\n    var _activeOptionIdx = options.findIndex(function (option) {\n      return option.value === activeValue;\n    });\n    if (_activeOptionIdx === -1 && process.env.NODE_ENV === \"development\") {\n      warn(\"defaultValue: такого значения нет среди опций!\");\n    }\n    updateActiveOptionIdx(_activeOptionIdx);\n  }, [activeValue, options]);\n  var translateX = \"translateX(\".concat(100 * activeOptionIdx, \"%)\");\n  var handleOnChange = function handleOnChange(value) {\n    updateActiveValue(value);\n    onChange(value);\n  };\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(\"SegmentedControl\", \"SegmentedControl--\".concat(size)),\n    ref: getRootRef\n  }), createScopedElement(\"div\", {\n    role: \"radiogroup\",\n    vkuiClass: \"SegmentedControl__in\"\n  }, activeOptionIdx > -1 && createScopedElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    vkuiClass: \"SegmentedControl__slider\",\n    style: {\n      width: \"\".concat(100 / options.length, \"%\"),\n      transform: translateX,\n      WebkitTransform: translateX\n    }\n  }), options.map(function (_ref2) {\n    var label = _ref2.label,\n      optionProps = _objectWithoutProperties(_ref2, _excluded2);\n    return createScopedElement(SegmentedControlOption, _extends({\n      key: \"\".concat(optionProps.value)\n    }, optionProps, {\n      vkuiClass: \"SegmentedControl__option\",\n      name: nameRef.current,\n      checked: activeValue === optionProps.value,\n      onChange: function onChange() {\n        return handleOnChange(optionProps.value);\n      }\n    }), label);\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","classNames","useIsomorphicLayoutEffect","generateRandomId","noop","warnOnce","SegmentedControlOption","warn","SegmentedControl","size","name","options","getRootRef","_ref$onChange","onChange","value","defaultValue","children","restProps","initialValue","_options$","useState","_React$useState2","activeOptionIdx","updateActiveOptionIdx","_React$useState4","activeValue","updateActiveValue","nameRef","useRef","_activeOptionIdx","findIndex","option","process","env","NODE_ENV","translateX","handleOnChange","createScopedElement","vkuiClass","ref","role","style","width","length","transform","WebkitTransform","map","label","optionProps","key","current","checked"],"sources":["C:\\Users\\zpili\\Desktop\\Finbox-VK-mini-apps\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\SegmentedControl\\SegmentedControl.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { generateRandomId, noop } from \"../../lib/utils\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { SegmentedControlOption } from \"./SegmentedControlOption/SegmentedControlOption\";\nimport { HasRootRef } from \"../../types\";\nimport \"./SegmentedControl.css\";\n\nexport type SegmentedControlValue = string | number | undefined;\n\nexport interface SegmentedControlOptionInterface\n  extends Omit<React.HTMLAttributes<HTMLElement>, \"label\"> {\n  label: React.ReactChild;\n  value: SegmentedControlValue;\n}\n\nexport interface SegmentedControlProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, \"onChange\">,\n    HasRootRef<HTMLDivElement> {\n  options: SegmentedControlOptionInterface[];\n  size?: \"m\" | \"l\";\n  name?: string;\n  onChange?: (value: SegmentedControlValue) => void;\n  value?: SegmentedControlValue;\n  defaultValue?: SegmentedControlValue;\n}\n\nconst warn = warnOnce(\"SegmentedControl\");\nexport const SegmentedControl: React.FC<SegmentedControlProps> = ({\n  size = \"l\",\n  name,\n  options,\n  getRootRef,\n  onChange = noop,\n  value,\n  defaultValue,\n  children,\n  ...restProps\n}) => {\n  let initialValue = defaultValue ?? value;\n\n  if (!initialValue) {\n    initialValue = options[0]?.value;\n  }\n\n  const [activeOptionIdx, updateActiveOptionIdx] = React.useState<number>(0);\n  const [activeValue, updateActiveValue] =\n    React.useState<SegmentedControlValue>(initialValue);\n\n  const nameRef = React.useRef<string>(name ?? generateRandomId());\n\n  useIsomorphicLayoutEffect(() => {\n    const _activeOptionIdx = options.findIndex(\n      (option) => option.value === activeValue\n    );\n\n    if (_activeOptionIdx === -1 && process.env.NODE_ENV === \"development\") {\n      warn(\"defaultValue: такого значения нет среди опций!\");\n    }\n\n    updateActiveOptionIdx(_activeOptionIdx);\n  }, [activeValue, options]);\n\n  const translateX = `translateX(${100 * activeOptionIdx}%)`;\n\n  const handleOnChange = (value: SegmentedControlValue) => {\n    updateActiveValue(value);\n    onChange(value);\n  };\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(\"SegmentedControl\", `SegmentedControl--${size}`)}\n      ref={getRootRef}\n    >\n      <div role=\"radiogroup\" vkuiClass=\"SegmentedControl__in\">\n        {activeOptionIdx > -1 && (\n          <div\n            aria-hidden=\"true\"\n            vkuiClass=\"SegmentedControl__slider\"\n            style={{\n              width: `${100 / options.length}%`,\n              transform: translateX,\n              WebkitTransform: translateX,\n            }}\n          />\n        )}\n        {options.map(({ label, ...optionProps }) => (\n          <SegmentedControlOption\n            key={`${optionProps.value}`}\n            {...optionProps}\n            vkuiClass=\"SegmentedControl__option\"\n            name={nameRef.current}\n            checked={activeValue === optionProps.value}\n            onChange={() => handleOnChange(optionProps.value)}\n          >\n            {label}\n          </SegmentedControlOption>\n        ))}\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}