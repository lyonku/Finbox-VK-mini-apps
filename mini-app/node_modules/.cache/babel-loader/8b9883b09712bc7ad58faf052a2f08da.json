{"ast":null,"code":"/*! eruda-code v2.0.0 https://github.com/liriliri/eruda-code#readme */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.erudaCode = t() : e.erudaCode = t();\n}(window, function () {\n  return function (e) {\n    var t = {};\n    function r(n) {\n      if (t[n]) return t[n].exports;\n      var i = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;\n    }\n    return r.m = e, r.c = t, r.d = function (e, t, n) {\n      r.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (e, t) {\n      if (1 & t && (e = r(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var i in e) r.d(n, i, function (t) {\n        return e[t];\n      }.bind(null, i));\n      return n;\n    }, r.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return r.d(t, \"a\", t), t;\n    }, r.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, r.p = \"/assets/\", r(r.s = 16);\n  }([function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0, t.extend = a, t.indexOf = function (e, t) {\n      for (var r = 0, n = e.length; r < n; r++) if (e[r] === t) return r;\n      return -1;\n    }, t.escapeExpression = function (e) {\n      if (\"string\" != typeof e) {\n        if (e && e.toHTML) return e.toHTML();\n        if (null == e) return \"\";\n        if (!e) return e + \"\";\n        e = \"\" + e;\n      }\n      if (!o.test(e)) return e;\n      return e.replace(i, l);\n    }, t.isEmpty = function (e) {\n      return !e && 0 !== e || !(!c(e) || 0 !== e.length);\n    }, t.createFrame = function (e) {\n      var t = a({}, e);\n      return t._parent = e, t;\n    }, t.blockParams = function (e, t) {\n      return e.path = t, e;\n    }, t.appendContextPath = function (e, t) {\n      return (e ? e + \".\" : \"\") + t;\n    };\n    var n = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        \"'\": \"&#x27;\",\n        \"`\": \"&#x60;\",\n        \"=\": \"&#x3D;\"\n      },\n      i = /[&<>\"'`=]/g,\n      o = /[&<>\"'`=]/;\n    function l(e) {\n      return n[e];\n    }\n    function a(e) {\n      for (var t = 1; t < arguments.length; t++) for (var r in arguments[t]) Object.prototype.hasOwnProperty.call(arguments[t], r) && (e[r] = arguments[t][r]);\n      return e;\n    }\n    var s = Object.prototype.toString;\n    t.toString = s;\n    var u = function (e) {\n      return \"function\" == typeof e;\n    };\n    u(/x/) && (t.isFunction = u = function (e) {\n      return \"function\" == typeof e && \"[object Function]\" === s.call(e);\n    }), t.isFunction = u;\n    var c = Array.isArray || function (e) {\n      return !(!e || \"object\" != typeof e) && \"[object Array]\" === s.call(e);\n    };\n    t.isArray = c;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n = [\"description\", \"fileName\", \"lineNumber\", \"endLineNumber\", \"message\", \"name\", \"number\", \"stack\"];\n    function i(e, t) {\n      var r = t && t.loc,\n        o = void 0,\n        l = void 0,\n        a = void 0,\n        s = void 0;\n      r && (o = r.start.line, l = r.end.line, a = r.start.column, s = r.end.column, e += \" - \" + o + \":\" + a);\n      for (var u = Error.prototype.constructor.call(this, e), c = 0; c < n.length; c++) this[n[c]] = u[n[c]];\n      Error.captureStackTrace && Error.captureStackTrace(this, i);\n      try {\n        r && (this.lineNumber = o, this.endLineNumber = l, Object.defineProperty ? (Object.defineProperty(this, \"column\", {\n          value: a,\n          enumerable: !0\n        }), Object.defineProperty(this, \"endColumn\", {\n          value: s,\n          enumerable: !0\n        })) : (this.column = a, this.endColumn = s));\n      } catch (e) {}\n    }\n    i.prototype = new Error(), t.default = i, e.exports = t.default;\n  }, function (e, t) {\n    function r(t) {\n      return e.exports = r = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {\n        return e.__proto__ || Object.getPrototypeOf(e);\n      }, r(t);\n    }\n    e.exports = r;\n  }, function (e, t, r) {\n    var n = r(19);\n    function i(t, r, o) {\n      return \"undefined\" != typeof Reflect && Reflect.get ? e.exports = i = Reflect.get : e.exports = i = function (e, t, r) {\n        var i = n(e, t);\n        if (i) {\n          var o = Object.getOwnPropertyDescriptor(i, t);\n          return o.get ? o.get.call(r) : o.value;\n        }\n      }, i(t, r, o || t);\n    }\n    e.exports = i;\n  }, function (e, t) {\n    var r;\n    r = function () {\n      return this;\n    }();\n    try {\n      r = r || new Function(\"return this\")();\n    } catch (e) {\n      \"object\" == typeof window && (r = window);\n    }\n    e.exports = r;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    e.exports = function (e) {\n      var t = [];\n      return t.toString = function () {\n        return this.map(function (t) {\n          var r = function (e, t) {\n            var r = e[1] || \"\",\n              n = e[3];\n            if (!n) return r;\n            if (t && \"function\" == typeof btoa) {\n              var i = (l = n, a = btoa(unescape(encodeURIComponent(JSON.stringify(l)))), s = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(a), \"/*# \".concat(s, \" */\")),\n                o = n.sources.map(function (e) {\n                  return \"/*# sourceURL=\".concat(n.sourceRoot || \"\").concat(e, \" */\");\n                });\n              return [r].concat(o).concat([i]).join(\"\\n\");\n            }\n            var l, a, s;\n            return [r].join(\"\\n\");\n          }(t, e);\n          return t[2] ? \"@media \".concat(t[2], \" {\").concat(r, \"}\") : r;\n        }).join(\"\");\n      }, t.i = function (e, r) {\n        \"string\" == typeof e && (e = [[null, e, \"\"]]);\n        for (var n = 0; n < e.length; n++) {\n          var i = [].concat(e[n]);\n          r && (i[2] ? i[2] = \"\".concat(r, \" and \").concat(i[2]) : i[2] = r), t.push(i);\n        }\n      }, t;\n    };\n  }, function (e, t) {\n    function r(t) {\n      return \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? e.exports = r = function (e) {\n        return typeof e;\n      } : e.exports = r = function (e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n      }, r(t);\n    }\n    e.exports = r;\n  }, function (e, t, r) {\n    e.exports = function () {\n      \"use strict\";\n\n      var e = navigator.userAgent,\n        t = navigator.platform,\n        r = /gecko\\/\\d/i.test(e),\n        n = /MSIE \\d/.test(e),\n        i = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(e),\n        o = /Edge\\/(\\d+)/.exec(e),\n        l = n || i || o,\n        a = l && (n ? document.documentMode || 6 : +(o || i)[1]),\n        s = !o && /WebKit\\//.test(e),\n        u = s && /Qt\\/\\d+\\.\\d+/.test(e),\n        c = !o && /Chrome\\//.test(e),\n        d = /Opera\\//.test(e),\n        f = /Apple Computer/.test(navigator.vendor),\n        h = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(e),\n        p = /PhantomJS/.test(e),\n        v = !o && /AppleWebKit/.test(e) && /Mobile\\/\\w+/.test(e),\n        g = /Android/.test(e),\n        m = v || g || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),\n        y = v || /Mac/.test(t),\n        b = /\\bCrOS\\b/.test(e),\n        w = /win/i.test(t),\n        x = d && e.match(/Version\\/(\\d*\\.\\d*)/);\n      x && (x = Number(x[1])), x && x >= 15 && (d = !1, s = !0);\n      var C = y && (u || d && (null == x || x < 12.11)),\n        k = r || l && a >= 9;\n      function S(e) {\n        return new RegExp(\"(^|\\\\s)\" + e + \"(?:$|\\\\s)\\\\s*\");\n      }\n      var M,\n        L = function (e, t) {\n          var r = e.className,\n            n = S(t).exec(r);\n          if (n) {\n            var i = r.slice(n.index + n[0].length);\n            e.className = r.slice(0, n.index) + (i ? n[1] + i : \"\");\n          }\n        };\n      function T(e) {\n        for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);\n        return e;\n      }\n      function O(e, t) {\n        return T(e).appendChild(t);\n      }\n      function N(e, t, r, n) {\n        var i = document.createElement(e);\n        if (r && (i.className = r), n && (i.style.cssText = n), \"string\" == typeof t) i.appendChild(document.createTextNode(t));else if (t) for (var o = 0; o < t.length; ++o) i.appendChild(t[o]);\n        return i;\n      }\n      function A(e, t, r, n) {\n        var i = N(e, t, r, n);\n        return i.setAttribute(\"role\", \"presentation\"), i;\n      }\n      function D(e, t) {\n        if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t);\n        do {\n          if (11 == t.nodeType && (t = t.host), t == e) return !0;\n        } while (t = t.parentNode);\n      }\n      function P() {\n        var e;\n        try {\n          e = document.activeElement;\n        } catch (t) {\n          e = document.body || null;\n        }\n        for (; e && e.shadowRoot && e.shadowRoot.activeElement;) e = e.shadowRoot.activeElement;\n        return e;\n      }\n      function E(e, t) {\n        var r = e.className;\n        S(t).test(r) || (e.className += (r ? \" \" : \"\") + t);\n      }\n      function H(e, t) {\n        for (var r = e.split(\" \"), n = 0; n < r.length; n++) r[n] && !S(r[n]).test(t) && (t += \" \" + r[n]);\n        return t;\n      }\n      M = document.createRange ? function (e, t, r, n) {\n        var i = document.createRange();\n        return i.setEnd(n || e, r), i.setStart(e, t), i;\n      } : function (e, t, r) {\n        var n = document.body.createTextRange();\n        try {\n          n.moveToElementText(e.parentNode);\n        } catch (e) {\n          return n;\n        }\n        return n.collapse(!0), n.moveEnd(\"character\", r), n.moveStart(\"character\", t), n;\n      };\n      var W = function (e) {\n        e.select();\n      };\n      function I(e) {\n        var t = Array.prototype.slice.call(arguments, 1);\n        return function () {\n          return e.apply(null, t);\n        };\n      }\n      function F(e, t, r) {\n        for (var n in t || (t = {}), e) !e.hasOwnProperty(n) || !1 === r && t.hasOwnProperty(n) || (t[n] = e[n]);\n        return t;\n      }\n      function z(e, t, r, n, i) {\n        null == t && -1 == (t = e.search(/[^\\s\\u00a0]/)) && (t = e.length);\n        for (var o = n || 0, l = i || 0;;) {\n          var a = e.indexOf(\"\\t\", o);\n          if (a < 0 || a >= t) return l + (t - o);\n          l += a - o, l += r - l % r, o = a + 1;\n        }\n      }\n      v ? W = function (e) {\n        e.selectionStart = 0, e.selectionEnd = e.value.length;\n      } : l && (W = function (e) {\n        try {\n          e.select();\n        } catch (e) {}\n      });\n      var _ = function () {\n        this.id = null, this.f = null, this.time = 0, this.handler = I(this.onTimeout, this);\n      };\n      function R(e, t) {\n        for (var r = 0; r < e.length; ++r) if (e[r] == t) return r;\n        return -1;\n      }\n      _.prototype.onTimeout = function (e) {\n        e.id = 0, e.time <= +new Date() ? e.f() : setTimeout(e.handler, e.time - +new Date());\n      }, _.prototype.set = function (e, t) {\n        this.f = t;\n        var r = +new Date() + e;\n        (!this.id || r < this.time) && (clearTimeout(this.id), this.id = setTimeout(this.handler, e), this.time = r);\n      };\n      var j = {\n          toString: function () {\n            return \"CodeMirror.Pass\";\n          }\n        },\n        B = {\n          scroll: !1\n        },\n        V = {\n          origin: \"*mouse\"\n        },\n        G = {\n          origin: \"+move\"\n        };\n      function U(e, t, r) {\n        for (var n = 0, i = 0;;) {\n          var o = e.indexOf(\"\\t\", n);\n          -1 == o && (o = e.length);\n          var l = o - n;\n          if (o == e.length || i + l >= t) return n + Math.min(l, t - i);\n          if (i += o - n, n = o + 1, (i += r - i % r) >= t) return n;\n        }\n      }\n      var K = [\"\"];\n      function $(e) {\n        for (; K.length <= e;) K.push(X(K) + \" \");\n        return K[e];\n      }\n      function X(e) {\n        return e[e.length - 1];\n      }\n      function q(e, t) {\n        for (var r = [], n = 0; n < e.length; n++) r[n] = t(e[n], n);\n        return r;\n      }\n      function Y() {}\n      function Z(e, t) {\n        var r;\n        return Object.create ? r = Object.create(e) : (Y.prototype = e, r = new Y()), t && F(t, r), r;\n      }\n      var J = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n      function Q(e) {\n        return /\\w/.test(e) || e > \"\" && (e.toUpperCase() != e.toLowerCase() || J.test(e));\n      }\n      function ee(e, t) {\n        return t ? !!(t.source.indexOf(\"\\\\w\") > -1 && Q(e)) || t.test(e) : Q(e);\n      }\n      function te(e) {\n        for (var t in e) if (e.hasOwnProperty(t) && e[t]) return !1;\n        return !0;\n      }\n      var re = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n      function ne(e) {\n        return e.charCodeAt(0) >= 768 && re.test(e);\n      }\n      function ie(e, t, r) {\n        for (; (r < 0 ? t > 0 : t < e.length) && ne(e.charAt(t));) t += r;\n        return t;\n      }\n      function oe(e, t, r) {\n        for (var n = t > r ? -1 : 1;;) {\n          if (t == r) return t;\n          var i = (t + r) / 2,\n            o = n < 0 ? Math.ceil(i) : Math.floor(i);\n          if (o == t) return e(o) ? t : r;\n          e(o) ? r = o : t = o + n;\n        }\n      }\n      var le = null;\n      function ae(e, t, r) {\n        var n;\n        le = null;\n        for (var i = 0; i < e.length; ++i) {\n          var o = e[i];\n          if (o.from < t && o.to > t) return i;\n          o.to == t && (o.from != o.to && \"before\" == r ? n = i : le = i), o.from == t && (o.from != o.to && \"before\" != r ? n = i : le = i);\n        }\n        return null != n ? n : le;\n      }\n      var se = function () {\n        var e = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/,\n          t = /[stwN]/,\n          r = /[LRr]/,\n          n = /[Lb1n]/,\n          i = /[1n]/;\n        function o(e, t, r) {\n          this.level = e, this.from = t, this.to = r;\n        }\n        return function (l, a) {\n          var s = \"ltr\" == a ? \"L\" : \"R\";\n          if (0 == l.length || \"ltr\" == a && !e.test(l)) return !1;\n          for (var u, c = l.length, d = [], f = 0; f < c; ++f) d.push((u = l.charCodeAt(f)) <= 247 ? \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\".charAt(u) : 1424 <= u && u <= 1524 ? \"R\" : 1536 <= u && u <= 1785 ? \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\".charAt(u - 1536) : 1774 <= u && u <= 2220 ? \"r\" : 8192 <= u && u <= 8203 ? \"w\" : 8204 == u ? \"b\" : \"L\");\n          for (var h = 0, p = s; h < c; ++h) {\n            var v = d[h];\n            \"m\" == v ? d[h] = p : p = v;\n          }\n          for (var g = 0, m = s; g < c; ++g) {\n            var y = d[g];\n            \"1\" == y && \"r\" == m ? d[g] = \"n\" : r.test(y) && (m = y, \"r\" == y && (d[g] = \"R\"));\n          }\n          for (var b = 1, w = d[0]; b < c - 1; ++b) {\n            var x = d[b];\n            \"+\" == x && \"1\" == w && \"1\" == d[b + 1] ? d[b] = \"1\" : \",\" != x || w != d[b + 1] || \"1\" != w && \"n\" != w || (d[b] = w), w = x;\n          }\n          for (var C = 0; C < c; ++C) {\n            var k = d[C];\n            if (\",\" == k) d[C] = \"N\";else if (\"%\" == k) {\n              var S = void 0;\n              for (S = C + 1; S < c && \"%\" == d[S]; ++S);\n              for (var M = C && \"!\" == d[C - 1] || S < c && \"1\" == d[S] ? \"1\" : \"N\", L = C; L < S; ++L) d[L] = M;\n              C = S - 1;\n            }\n          }\n          for (var T = 0, O = s; T < c; ++T) {\n            var N = d[T];\n            \"L\" == O && \"1\" == N ? d[T] = \"L\" : r.test(N) && (O = N);\n          }\n          for (var A = 0; A < c; ++A) if (t.test(d[A])) {\n            var D = void 0;\n            for (D = A + 1; D < c && t.test(d[D]); ++D);\n            for (var P = \"L\" == (A ? d[A - 1] : s), E = P == (\"L\" == (D < c ? d[D] : s)) ? P ? \"L\" : \"R\" : s, H = A; H < D; ++H) d[H] = E;\n            A = D - 1;\n          }\n          for (var W, I = [], F = 0; F < c;) if (n.test(d[F])) {\n            var z = F;\n            for (++F; F < c && n.test(d[F]); ++F);\n            I.push(new o(0, z, F));\n          } else {\n            var _ = F,\n              R = I.length;\n            for (++F; F < c && \"L\" != d[F]; ++F);\n            for (var j = _; j < F;) if (i.test(d[j])) {\n              _ < j && I.splice(R, 0, new o(1, _, j));\n              var B = j;\n              for (++j; j < F && i.test(d[j]); ++j);\n              I.splice(R, 0, new o(2, B, j)), _ = j;\n            } else ++j;\n            _ < F && I.splice(R, 0, new o(1, _, F));\n          }\n          return \"ltr\" == a && (1 == I[0].level && (W = l.match(/^\\s+/)) && (I[0].from = W[0].length, I.unshift(new o(0, 0, W[0].length))), 1 == X(I).level && (W = l.match(/\\s+$/)) && (X(I).to -= W[0].length, I.push(new o(0, c - W[0].length, c)))), \"rtl\" == a ? I.reverse() : I;\n        };\n      }();\n      function ue(e, t) {\n        var r = e.order;\n        return null == r && (r = e.order = se(e.text, t)), r;\n      }\n      var ce = [],\n        de = function (e, t, r) {\n          if (e.addEventListener) e.addEventListener(t, r, !1);else if (e.attachEvent) e.attachEvent(\"on\" + t, r);else {\n            var n = e._handlers || (e._handlers = {});\n            n[t] = (n[t] || ce).concat(r);\n          }\n        };\n      function fe(e, t) {\n        return e._handlers && e._handlers[t] || ce;\n      }\n      function he(e, t, r) {\n        if (e.removeEventListener) e.removeEventListener(t, r, !1);else if (e.detachEvent) e.detachEvent(\"on\" + t, r);else {\n          var n = e._handlers,\n            i = n && n[t];\n          if (i) {\n            var o = R(i, r);\n            o > -1 && (n[t] = i.slice(0, o).concat(i.slice(o + 1)));\n          }\n        }\n      }\n      function pe(e, t) {\n        var r = fe(e, t);\n        if (r.length) for (var n = Array.prototype.slice.call(arguments, 2), i = 0; i < r.length; ++i) r[i].apply(null, n);\n      }\n      function ve(e, t, r) {\n        return \"string\" == typeof t && (t = {\n          type: t,\n          preventDefault: function () {\n            this.defaultPrevented = !0;\n          }\n        }), pe(e, r || t.type, e, t), xe(t) || t.codemirrorIgnore;\n      }\n      function ge(e) {\n        var t = e._handlers && e._handlers.cursorActivity;\n        if (t) for (var r = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n) -1 == R(r, t[n]) && r.push(t[n]);\n      }\n      function me(e, t) {\n        return fe(e, t).length > 0;\n      }\n      function ye(e) {\n        e.prototype.on = function (e, t) {\n          de(this, e, t);\n        }, e.prototype.off = function (e, t) {\n          he(this, e, t);\n        };\n      }\n      function be(e) {\n        e.preventDefault ? e.preventDefault() : e.returnValue = !1;\n      }\n      function we(e) {\n        e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;\n      }\n      function xe(e) {\n        return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue;\n      }\n      function Ce(e) {\n        be(e), we(e);\n      }\n      function ke(e) {\n        return e.target || e.srcElement;\n      }\n      function Se(e) {\n        var t = e.which;\n        return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), y && e.ctrlKey && 1 == t && (t = 3), t;\n      }\n      var Me,\n        Le,\n        Te = function () {\n          if (l && a < 9) return !1;\n          var e = N(\"div\");\n          return \"draggable\" in e || \"dragDrop\" in e;\n        }();\n      function Oe(e) {\n        if (null == Me) {\n          var t = N(\"span\", \"​\");\n          O(e, N(\"span\", [t, document.createTextNode(\"x\")])), 0 != e.firstChild.offsetHeight && (Me = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(l && a < 8));\n        }\n        var r = Me ? N(\"span\", \"​\") : N(\"span\", \" \", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n        return r.setAttribute(\"cm-text\", \"\"), r;\n      }\n      function Ne(e) {\n        if (null != Le) return Le;\n        var t = O(e, document.createTextNode(\"AخA\")),\n          r = M(t, 0, 1).getBoundingClientRect(),\n          n = M(t, 1, 2).getBoundingClientRect();\n        return T(e), !(!r || r.left == r.right) && (Le = n.right - r.right < 3);\n      }\n      var Ae,\n        De = 3 != \"\\n\\nb\".split(/\\n/).length ? function (e) {\n          for (var t = 0, r = [], n = e.length; t <= n;) {\n            var i = e.indexOf(\"\\n\", t);\n            -1 == i && (i = e.length);\n            var o = e.slice(t, \"\\r\" == e.charAt(i - 1) ? i - 1 : i),\n              l = o.indexOf(\"\\r\");\n            -1 != l ? (r.push(o.slice(0, l)), t += l + 1) : (r.push(o), t = i + 1);\n          }\n          return r;\n        } : function (e) {\n          return e.split(/\\r\\n?|\\n/);\n        },\n        Pe = window.getSelection ? function (e) {\n          try {\n            return e.selectionStart != e.selectionEnd;\n          } catch (e) {\n            return !1;\n          }\n        } : function (e) {\n          var t;\n          try {\n            t = e.ownerDocument.selection.createRange();\n          } catch (e) {}\n          return !(!t || t.parentElement() != e) && 0 != t.compareEndPoints(\"StartToEnd\", t);\n        },\n        Ee = \"oncopy\" in (Ae = N(\"div\")) || (Ae.setAttribute(\"oncopy\", \"return;\"), \"function\" == typeof Ae.oncopy),\n        He = null,\n        We = {},\n        Ie = {};\n      function Fe(e, t) {\n        arguments.length > 2 && (t.dependencies = Array.prototype.slice.call(arguments, 2)), We[e] = t;\n      }\n      function ze(e) {\n        if (\"string\" == typeof e && Ie.hasOwnProperty(e)) e = Ie[e];else if (e && \"string\" == typeof e.name && Ie.hasOwnProperty(e.name)) {\n          var t = Ie[e.name];\n          \"string\" == typeof t && (t = {\n            name: t\n          }), (e = Z(t, e)).name = t.name;\n        } else {\n          if (\"string\" == typeof e && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(e)) return ze(\"application/xml\");\n          if (\"string\" == typeof e && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(e)) return ze(\"application/json\");\n        }\n        return \"string\" == typeof e ? {\n          name: e\n        } : e || {\n          name: \"null\"\n        };\n      }\n      function _e(e, t) {\n        t = ze(t);\n        var r = We[t.name];\n        if (!r) return _e(e, \"text/plain\");\n        var n = r(e, t);\n        if (Re.hasOwnProperty(t.name)) {\n          var i = Re[t.name];\n          for (var o in i) i.hasOwnProperty(o) && (n.hasOwnProperty(o) && (n[\"_\" + o] = n[o]), n[o] = i[o]);\n        }\n        if (n.name = t.name, t.helperType && (n.helperType = t.helperType), t.modeProps) for (var l in t.modeProps) n[l] = t.modeProps[l];\n        return n;\n      }\n      var Re = {};\n      function je(e, t) {\n        F(t, Re.hasOwnProperty(e) ? Re[e] : Re[e] = {});\n      }\n      function Be(e, t) {\n        if (!0 === t) return t;\n        if (e.copyState) return e.copyState(t);\n        var r = {};\n        for (var n in t) {\n          var i = t[n];\n          i instanceof Array && (i = i.concat([])), r[n] = i;\n        }\n        return r;\n      }\n      function Ve(e, t) {\n        for (var r; e.innerMode && (r = e.innerMode(t)) && r.mode != e;) t = r.state, e = r.mode;\n        return r || {\n          mode: e,\n          state: t\n        };\n      }\n      function Ge(e, t, r) {\n        return !e.startState || e.startState(t, r);\n      }\n      var Ue = function (e, t, r) {\n        this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0, this.lineOracle = r;\n      };\n      function Ke(e, t) {\n        if ((t -= e.first) < 0 || t >= e.size) throw new Error(\"There is no line \" + (t + e.first) + \" in the document.\");\n        for (var r = e; !r.lines;) for (var n = 0;; ++n) {\n          var i = r.children[n],\n            o = i.chunkSize();\n          if (t < o) {\n            r = i;\n            break;\n          }\n          t -= o;\n        }\n        return r.lines[t];\n      }\n      function $e(e, t, r) {\n        var n = [],\n          i = t.line;\n        return e.iter(t.line, r.line + 1, function (e) {\n          var o = e.text;\n          i == r.line && (o = o.slice(0, r.ch)), i == t.line && (o = o.slice(t.ch)), n.push(o), ++i;\n        }), n;\n      }\n      function Xe(e, t, r) {\n        var n = [];\n        return e.iter(t, r, function (e) {\n          n.push(e.text);\n        }), n;\n      }\n      function qe(e, t) {\n        var r = t - e.height;\n        if (r) for (var n = e; n; n = n.parent) n.height += r;\n      }\n      function Ye(e) {\n        if (null == e.parent) return null;\n        for (var t = e.parent, r = R(t.lines, e), n = t.parent; n; t = n, n = n.parent) for (var i = 0; n.children[i] != t; ++i) r += n.children[i].chunkSize();\n        return r + t.first;\n      }\n      function Ze(e, t) {\n        var r = e.first;\n        e: do {\n          for (var n = 0; n < e.children.length; ++n) {\n            var i = e.children[n],\n              o = i.height;\n            if (t < o) {\n              e = i;\n              continue e;\n            }\n            t -= o, r += i.chunkSize();\n          }\n          return r;\n        } while (!e.lines);\n        for (var l = 0; l < e.lines.length; ++l) {\n          var a = e.lines[l].height;\n          if (t < a) break;\n          t -= a;\n        }\n        return r + l;\n      }\n      function Je(e, t) {\n        return t >= e.first && t < e.first + e.size;\n      }\n      function Qe(e, t) {\n        return String(e.lineNumberFormatter(t + e.firstLineNumber));\n      }\n      function et(e, t, r) {\n        if (void 0 === r && (r = null), !(this instanceof et)) return new et(e, t, r);\n        this.line = e, this.ch = t, this.sticky = r;\n      }\n      function tt(e, t) {\n        return e.line - t.line || e.ch - t.ch;\n      }\n      function rt(e, t) {\n        return e.sticky == t.sticky && 0 == tt(e, t);\n      }\n      function nt(e) {\n        return et(e.line, e.ch);\n      }\n      function it(e, t) {\n        return tt(e, t) < 0 ? t : e;\n      }\n      function ot(e, t) {\n        return tt(e, t) < 0 ? e : t;\n      }\n      function lt(e, t) {\n        return Math.max(e.first, Math.min(t, e.first + e.size - 1));\n      }\n      function at(e, t) {\n        if (t.line < e.first) return et(e.first, 0);\n        var r = e.first + e.size - 1;\n        return t.line > r ? et(r, Ke(e, r).text.length) : function (e, t) {\n          var r = e.ch;\n          return null == r || r > t ? et(e.line, t) : r < 0 ? et(e.line, 0) : e;\n        }(t, Ke(e, t.line).text.length);\n      }\n      function st(e, t) {\n        for (var r = [], n = 0; n < t.length; n++) r[n] = at(e, t[n]);\n        return r;\n      }\n      Ue.prototype.eol = function () {\n        return this.pos >= this.string.length;\n      }, Ue.prototype.sol = function () {\n        return this.pos == this.lineStart;\n      }, Ue.prototype.peek = function () {\n        return this.string.charAt(this.pos) || void 0;\n      }, Ue.prototype.next = function () {\n        if (this.pos < this.string.length) return this.string.charAt(this.pos++);\n      }, Ue.prototype.eat = function (e) {\n        var t = this.string.charAt(this.pos);\n        if (\"string\" == typeof e ? t == e : t && (e.test ? e.test(t) : e(t))) return ++this.pos, t;\n      }, Ue.prototype.eatWhile = function (e) {\n        for (var t = this.pos; this.eat(e););\n        return this.pos > t;\n      }, Ue.prototype.eatSpace = function () {\n        for (var e = this.pos; /[\\s\\u00a0]/.test(this.string.charAt(this.pos));) ++this.pos;\n        return this.pos > e;\n      }, Ue.prototype.skipToEnd = function () {\n        this.pos = this.string.length;\n      }, Ue.prototype.skipTo = function (e) {\n        var t = this.string.indexOf(e, this.pos);\n        if (t > -1) return this.pos = t, !0;\n      }, Ue.prototype.backUp = function (e) {\n        this.pos -= e;\n      }, Ue.prototype.column = function () {\n        return this.lastColumnPos < this.start && (this.lastColumnValue = z(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? z(this.string, this.lineStart, this.tabSize) : 0);\n      }, Ue.prototype.indentation = function () {\n        return z(this.string, null, this.tabSize) - (this.lineStart ? z(this.string, this.lineStart, this.tabSize) : 0);\n      }, Ue.prototype.match = function (e, t, r) {\n        if (\"string\" != typeof e) {\n          var n = this.string.slice(this.pos).match(e);\n          return n && n.index > 0 ? null : (n && !1 !== t && (this.pos += n[0].length), n);\n        }\n        var i = function (e) {\n          return r ? e.toLowerCase() : e;\n        };\n        if (i(this.string.substr(this.pos, e.length)) == i(e)) return !1 !== t && (this.pos += e.length), !0;\n      }, Ue.prototype.current = function () {\n        return this.string.slice(this.start, this.pos);\n      }, Ue.prototype.hideFirstChars = function (e, t) {\n        this.lineStart += e;\n        try {\n          return t();\n        } finally {\n          this.lineStart -= e;\n        }\n      }, Ue.prototype.lookAhead = function (e) {\n        var t = this.lineOracle;\n        return t && t.lookAhead(e);\n      }, Ue.prototype.baseToken = function () {\n        var e = this.lineOracle;\n        return e && e.baseToken(this.pos);\n      };\n      var ut = function (e, t) {\n          this.state = e, this.lookAhead = t;\n        },\n        ct = function (e, t, r, n) {\n          this.state = t, this.doc = e, this.line = r, this.maxLookAhead = n || 0, this.baseTokens = null, this.baseTokenPos = 1;\n        };\n      function dt(e, t, r, n) {\n        var i = [e.state.modeGen],\n          o = {};\n        wt(e, t.text, e.doc.mode, r, function (e, t) {\n          return i.push(e, t);\n        }, o, n);\n        for (var l = r.state, a = function (n) {\n            r.baseTokens = i;\n            var a = e.state.overlays[n],\n              s = 1,\n              u = 0;\n            r.state = !0, wt(e, t.text, a.mode, r, function (e, t) {\n              for (var r = s; u < e;) {\n                var n = i[s];\n                n > e && i.splice(s, 1, e, i[s + 1], n), s += 2, u = Math.min(e, n);\n              }\n              if (t) if (a.opaque) i.splice(r, s - r, e, \"overlay \" + t), s = r + 2;else for (; r < s; r += 2) {\n                var o = i[r + 1];\n                i[r + 1] = (o ? o + \" \" : \"\") + \"overlay \" + t;\n              }\n            }, o), r.state = l, r.baseTokens = null, r.baseTokenPos = 1;\n          }, s = 0; s < e.state.overlays.length; ++s) a(s);\n        return {\n          styles: i,\n          classes: o.bgClass || o.textClass ? o : null\n        };\n      }\n      function ft(e, t, r) {\n        if (!t.styles || t.styles[0] != e.state.modeGen) {\n          var n = ht(e, Ye(t)),\n            i = t.text.length > e.options.maxHighlightLength && Be(e.doc.mode, n.state),\n            o = dt(e, t, n);\n          i && (n.state = i), t.stateAfter = n.save(!i), t.styles = o.styles, o.classes ? t.styleClasses = o.classes : t.styleClasses && (t.styleClasses = null), r === e.doc.highlightFrontier && (e.doc.modeFrontier = Math.max(e.doc.modeFrontier, ++e.doc.highlightFrontier));\n        }\n        return t.styles;\n      }\n      function ht(e, t, r) {\n        var n = e.doc,\n          i = e.display;\n        if (!n.mode.startState) return new ct(n, !0, t);\n        var o = function (e, t, r) {\n            for (var n, i, o = e.doc, l = r ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), a = t; a > l; --a) {\n              if (a <= o.first) return o.first;\n              var s = Ke(o, a - 1),\n                u = s.stateAfter;\n              if (u && (!r || a + (u instanceof ut ? u.lookAhead : 0) <= o.modeFrontier)) return a;\n              var c = z(s.text, null, e.options.tabSize);\n              (null == i || n > c) && (i = a - 1, n = c);\n            }\n            return i;\n          }(e, t, r),\n          l = o > n.first && Ke(n, o - 1).stateAfter,\n          a = l ? ct.fromSaved(n, l, o) : new ct(n, Ge(n.mode), o);\n        return n.iter(o, t, function (r) {\n          pt(e, r.text, a);\n          var n = a.line;\n          r.stateAfter = n == t - 1 || n % 5 == 0 || n >= i.viewFrom && n < i.viewTo ? a.save() : null, a.nextLine();\n        }), r && (n.modeFrontier = a.line), a;\n      }\n      function pt(e, t, r, n) {\n        var i = e.doc.mode,\n          o = new Ue(t, e.options.tabSize, r);\n        for (o.start = o.pos = n || 0, \"\" == t && vt(i, r.state); !o.eol();) gt(i, o, r.state), o.start = o.pos;\n      }\n      function vt(e, t) {\n        if (e.blankLine) return e.blankLine(t);\n        if (e.innerMode) {\n          var r = Ve(e, t);\n          return r.mode.blankLine ? r.mode.blankLine(r.state) : void 0;\n        }\n      }\n      function gt(e, t, r, n) {\n        for (var i = 0; i < 10; i++) {\n          n && (n[0] = Ve(e, r).mode);\n          var o = e.token(t, r);\n          if (t.pos > t.start) return o;\n        }\n        throw new Error(\"Mode \" + e.name + \" failed to advance stream.\");\n      }\n      ct.prototype.lookAhead = function (e) {\n        var t = this.doc.getLine(this.line + e);\n        return null != t && e > this.maxLookAhead && (this.maxLookAhead = e), t;\n      }, ct.prototype.baseToken = function (e) {\n        if (!this.baseTokens) return null;\n        for (; this.baseTokens[this.baseTokenPos] <= e;) this.baseTokenPos += 2;\n        var t = this.baseTokens[this.baseTokenPos + 1];\n        return {\n          type: t && t.replace(/( |^)overlay .*/, \"\"),\n          size: this.baseTokens[this.baseTokenPos] - e\n        };\n      }, ct.prototype.nextLine = function () {\n        this.line++, this.maxLookAhead > 0 && this.maxLookAhead--;\n      }, ct.fromSaved = function (e, t, r) {\n        return t instanceof ut ? new ct(e, Be(e.mode, t.state), r, t.lookAhead) : new ct(e, Be(e.mode, t), r);\n      }, ct.prototype.save = function (e) {\n        var t = !1 !== e ? Be(this.doc.mode, this.state) : this.state;\n        return this.maxLookAhead > 0 ? new ut(t, this.maxLookAhead) : t;\n      };\n      var mt = function (e, t, r) {\n        this.start = e.start, this.end = e.pos, this.string = e.current(), this.type = t || null, this.state = r;\n      };\n      function yt(e, t, r, n) {\n        var i,\n          o,\n          l = e.doc,\n          a = l.mode,\n          s = Ke(l, (t = at(l, t)).line),\n          u = ht(e, t.line, r),\n          c = new Ue(s.text, e.options.tabSize, u);\n        for (n && (o = []); (n || c.pos < t.ch) && !c.eol();) c.start = c.pos, i = gt(a, c, u.state), n && o.push(new mt(c, i, Be(l.mode, u.state)));\n        return n ? o : new mt(c, i, u.state);\n      }\n      function bt(e, t) {\n        if (e) for (;;) {\n          var r = e.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n          if (!r) break;\n          e = e.slice(0, r.index) + e.slice(r.index + r[0].length);\n          var n = r[1] ? \"bgClass\" : \"textClass\";\n          null == t[n] ? t[n] = r[2] : new RegExp(\"(?:^|s)\" + r[2] + \"(?:$|s)\").test(t[n]) || (t[n] += \" \" + r[2]);\n        }\n        return e;\n      }\n      function wt(e, t, r, n, i, o, l) {\n        var a = r.flattenSpans;\n        null == a && (a = e.options.flattenSpans);\n        var s,\n          u = 0,\n          c = null,\n          d = new Ue(t, e.options.tabSize, n),\n          f = e.options.addModeClass && [null];\n        for (\"\" == t && bt(vt(r, n.state), o); !d.eol();) {\n          if (d.pos > e.options.maxHighlightLength ? (a = !1, l && pt(e, t, n, d.pos), d.pos = t.length, s = null) : s = bt(gt(r, d, n.state, f), o), f) {\n            var h = f[0].name;\n            h && (s = \"m-\" + (s ? h + \" \" + s : h));\n          }\n          if (!a || c != s) {\n            for (; u < d.start;) i(u = Math.min(d.start, u + 5e3), c);\n            c = s;\n          }\n          d.start = d.pos;\n        }\n        for (; u < d.pos;) {\n          var p = Math.min(d.pos, u + 5e3);\n          i(p, c), u = p;\n        }\n      }\n      var xt = !1,\n        Ct = !1;\n      function kt(e, t, r) {\n        this.marker = e, this.from = t, this.to = r;\n      }\n      function St(e, t) {\n        if (e) for (var r = 0; r < e.length; ++r) {\n          var n = e[r];\n          if (n.marker == t) return n;\n        }\n      }\n      function Mt(e, t) {\n        for (var r, n = 0; n < e.length; ++n) e[n] != t && (r || (r = [])).push(e[n]);\n        return r;\n      }\n      function Lt(e, t) {\n        if (t.full) return null;\n        var r = Je(e, t.from.line) && Ke(e, t.from.line).markedSpans,\n          n = Je(e, t.to.line) && Ke(e, t.to.line).markedSpans;\n        if (!r && !n) return null;\n        var i = t.from.ch,\n          o = t.to.ch,\n          l = 0 == tt(t.from, t.to),\n          a = function (e, t, r) {\n            var n;\n            if (e) for (var i = 0; i < e.length; ++i) {\n              var o = e[i],\n                l = o.marker;\n              if (null == o.from || (l.inclusiveLeft ? o.from <= t : o.from < t) || o.from == t && \"bookmark\" == l.type && (!r || !o.marker.insertLeft)) {\n                var a = null == o.to || (l.inclusiveRight ? o.to >= t : o.to > t);\n                (n || (n = [])).push(new kt(l, o.from, a ? null : o.to));\n              }\n            }\n            return n;\n          }(r, i, l),\n          s = function (e, t, r) {\n            var n;\n            if (e) for (var i = 0; i < e.length; ++i) {\n              var o = e[i],\n                l = o.marker;\n              if (null == o.to || (l.inclusiveRight ? o.to >= t : o.to > t) || o.from == t && \"bookmark\" == l.type && (!r || o.marker.insertLeft)) {\n                var a = null == o.from || (l.inclusiveLeft ? o.from <= t : o.from < t);\n                (n || (n = [])).push(new kt(l, a ? null : o.from - t, null == o.to ? null : o.to - t));\n              }\n            }\n            return n;\n          }(n, o, l),\n          u = 1 == t.text.length,\n          c = X(t.text).length + (u ? i : 0);\n        if (a) for (var d = 0; d < a.length; ++d) {\n          var f = a[d];\n          if (null == f.to) {\n            var h = St(s, f.marker);\n            h ? u && (f.to = null == h.to ? null : h.to + c) : f.to = i;\n          }\n        }\n        if (s) for (var p = 0; p < s.length; ++p) {\n          var v = s[p];\n          null != v.to && (v.to += c), null == v.from ? St(a, v.marker) || (v.from = c, u && (a || (a = [])).push(v)) : (v.from += c, u && (a || (a = [])).push(v));\n        }\n        a && (a = Tt(a)), s && s != a && (s = Tt(s));\n        var g = [a];\n        if (!u) {\n          var m,\n            y = t.text.length - 2;\n          if (y > 0 && a) for (var b = 0; b < a.length; ++b) null == a[b].to && (m || (m = [])).push(new kt(a[b].marker, null, null));\n          for (var w = 0; w < y; ++w) g.push(m);\n          g.push(s);\n        }\n        return g;\n      }\n      function Tt(e) {\n        for (var t = 0; t < e.length; ++t) {\n          var r = e[t];\n          null != r.from && r.from == r.to && !1 !== r.marker.clearWhenEmpty && e.splice(t--, 1);\n        }\n        return e.length ? e : null;\n      }\n      function Ot(e) {\n        var t = e.markedSpans;\n        if (t) {\n          for (var r = 0; r < t.length; ++r) t[r].marker.detachLine(e);\n          e.markedSpans = null;\n        }\n      }\n      function Nt(e, t) {\n        if (t) {\n          for (var r = 0; r < t.length; ++r) t[r].marker.attachLine(e);\n          e.markedSpans = t;\n        }\n      }\n      function At(e) {\n        return e.inclusiveLeft ? -1 : 0;\n      }\n      function Dt(e) {\n        return e.inclusiveRight ? 1 : 0;\n      }\n      function Pt(e, t) {\n        var r = e.lines.length - t.lines.length;\n        if (0 != r) return r;\n        var n = e.find(),\n          i = t.find(),\n          o = tt(n.from, i.from) || At(e) - At(t);\n        if (o) return -o;\n        var l = tt(n.to, i.to) || Dt(e) - Dt(t);\n        return l || t.id - e.id;\n      }\n      function Et(e, t) {\n        var r,\n          n = Ct && e.markedSpans;\n        if (n) for (var i = void 0, o = 0; o < n.length; ++o) (i = n[o]).marker.collapsed && null == (t ? i.from : i.to) && (!r || Pt(r, i.marker) < 0) && (r = i.marker);\n        return r;\n      }\n      function Ht(e) {\n        return Et(e, !0);\n      }\n      function Wt(e) {\n        return Et(e, !1);\n      }\n      function It(e, t) {\n        var r,\n          n = Ct && e.markedSpans;\n        if (n) for (var i = 0; i < n.length; ++i) {\n          var o = n[i];\n          o.marker.collapsed && (null == o.from || o.from < t) && (null == o.to || o.to > t) && (!r || Pt(r, o.marker) < 0) && (r = o.marker);\n        }\n        return r;\n      }\n      function Ft(e, t, r, n, i) {\n        var o = Ke(e, t),\n          l = Ct && o.markedSpans;\n        if (l) for (var a = 0; a < l.length; ++a) {\n          var s = l[a];\n          if (s.marker.collapsed) {\n            var u = s.marker.find(0),\n              c = tt(u.from, r) || At(s.marker) - At(i),\n              d = tt(u.to, n) || Dt(s.marker) - Dt(i);\n            if (!(c >= 0 && d <= 0 || c <= 0 && d >= 0) && (c <= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? tt(u.to, r) >= 0 : tt(u.to, r) > 0) || c >= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? tt(u.from, n) <= 0 : tt(u.from, n) < 0))) return !0;\n          }\n        }\n      }\n      function zt(e) {\n        for (var t; t = Ht(e);) e = t.find(-1, !0).line;\n        return e;\n      }\n      function _t(e, t) {\n        var r = Ke(e, t),\n          n = zt(r);\n        return r == n ? t : Ye(n);\n      }\n      function Rt(e, t) {\n        if (t > e.lastLine()) return t;\n        var r,\n          n = Ke(e, t);\n        if (!jt(e, n)) return t;\n        for (; r = Wt(n);) n = r.find(1, !0).line;\n        return Ye(n) + 1;\n      }\n      function jt(e, t) {\n        var r = Ct && t.markedSpans;\n        if (r) for (var n = void 0, i = 0; i < r.length; ++i) if ((n = r[i]).marker.collapsed) {\n          if (null == n.from) return !0;\n          if (!n.marker.widgetNode && 0 == n.from && n.marker.inclusiveLeft && Bt(e, t, n)) return !0;\n        }\n      }\n      function Bt(e, t, r) {\n        if (null == r.to) {\n          var n = r.marker.find(1, !0);\n          return Bt(e, n.line, St(n.line.markedSpans, r.marker));\n        }\n        if (r.marker.inclusiveRight && r.to == t.text.length) return !0;\n        for (var i = void 0, o = 0; o < t.markedSpans.length; ++o) if ((i = t.markedSpans[o]).marker.collapsed && !i.marker.widgetNode && i.from == r.to && (null == i.to || i.to != r.from) && (i.marker.inclusiveLeft || r.marker.inclusiveRight) && Bt(e, t, i)) return !0;\n      }\n      function Vt(e) {\n        for (var t = 0, r = (e = zt(e)).parent, n = 0; n < r.lines.length; ++n) {\n          var i = r.lines[n];\n          if (i == e) break;\n          t += i.height;\n        }\n        for (var o = r.parent; o; o = (r = o).parent) for (var l = 0; l < o.children.length; ++l) {\n          var a = o.children[l];\n          if (a == r) break;\n          t += a.height;\n        }\n        return t;\n      }\n      function Gt(e) {\n        if (0 == e.height) return 0;\n        for (var t, r = e.text.length, n = e; t = Ht(n);) {\n          var i = t.find(0, !0);\n          n = i.from.line, r += i.from.ch - i.to.ch;\n        }\n        for (n = e; t = Wt(n);) {\n          var o = t.find(0, !0);\n          r -= n.text.length - o.from.ch, r += (n = o.to.line).text.length - o.to.ch;\n        }\n        return r;\n      }\n      function Ut(e) {\n        var t = e.display,\n          r = e.doc;\n        t.maxLine = Ke(r, r.first), t.maxLineLength = Gt(t.maxLine), t.maxLineChanged = !0, r.iter(function (e) {\n          var r = Gt(e);\n          r > t.maxLineLength && (t.maxLineLength = r, t.maxLine = e);\n        });\n      }\n      var Kt = function (e, t, r) {\n        this.text = e, Nt(this, t), this.height = r ? r(this) : 1;\n      };\n      function $t(e) {\n        e.parent = null, Ot(e);\n      }\n      Kt.prototype.lineNo = function () {\n        return Ye(this);\n      }, ye(Kt);\n      var Xt = {},\n        qt = {};\n      function Yt(e, t) {\n        if (!e || /^\\s*$/.test(e)) return null;\n        var r = t.addModeClass ? qt : Xt;\n        return r[e] || (r[e] = e.replace(/\\S+/g, \"cm-$&\"));\n      }\n      function Zt(e, t) {\n        var r = A(\"span\", null, null, s ? \"padding-right: .1px\" : null),\n          n = {\n            pre: A(\"pre\", [r], \"CodeMirror-line\"),\n            content: r,\n            col: 0,\n            pos: 0,\n            cm: e,\n            trailingSpace: !1,\n            splitSpaces: e.getOption(\"lineWrapping\")\n          };\n        t.measure = {};\n        for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) {\n          var o = i ? t.rest[i - 1] : t.line,\n            l = void 0;\n          n.pos = 0, n.addToken = Qt, Ne(e.display.measure) && (l = ue(o, e.doc.direction)) && (n.addToken = er(n.addToken, l)), n.map = [], rr(o, n, ft(e, o, t != e.display.externalMeasured && Ye(o))), o.styleClasses && (o.styleClasses.bgClass && (n.bgClass = H(o.styleClasses.bgClass, n.bgClass || \"\")), o.styleClasses.textClass && (n.textClass = H(o.styleClasses.textClass, n.textClass || \"\"))), 0 == n.map.length && n.map.push(0, 0, n.content.appendChild(Oe(e.display.measure))), 0 == i ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), (t.measure.caches || (t.measure.caches = [])).push({}));\n        }\n        if (s) {\n          var a = n.content.lastChild;\n          (/\\bcm-tab\\b/.test(a.className) || a.querySelector && a.querySelector(\".cm-tab\")) && (n.content.className = \"cm-tab-wrap-hack\");\n        }\n        return pe(e, \"renderLine\", e, t.line, n.pre), n.pre.className && (n.textClass = H(n.pre.className, n.textClass || \"\")), n;\n      }\n      function Jt(e) {\n        var t = N(\"span\", \"•\", \"cm-invalidchar\");\n        return t.title = \"\\\\u\" + e.charCodeAt(0).toString(16), t.setAttribute(\"aria-label\", t.title), t;\n      }\n      function Qt(e, t, r, n, i, o, s) {\n        if (t) {\n          var u,\n            c = e.splitSpaces ? function (e, t) {\n              if (e.length > 1 && !/  /.test(e)) return e;\n              for (var r = t, n = \"\", i = 0; i < e.length; i++) {\n                var o = e.charAt(i);\n                \" \" != o || !r || i != e.length - 1 && 32 != e.charCodeAt(i + 1) || (o = \" \"), n += o, r = \" \" == o;\n              }\n              return n;\n            }(t, e.trailingSpace) : t,\n            d = e.cm.state.specialChars,\n            f = !1;\n          if (d.test(t)) {\n            u = document.createDocumentFragment();\n            for (var h = 0;;) {\n              d.lastIndex = h;\n              var p = d.exec(t),\n                v = p ? p.index - h : t.length - h;\n              if (v) {\n                var g = document.createTextNode(c.slice(h, h + v));\n                l && a < 9 ? u.appendChild(N(\"span\", [g])) : u.appendChild(g), e.map.push(e.pos, e.pos + v, g), e.col += v, e.pos += v;\n              }\n              if (!p) break;\n              h += v + 1;\n              var m = void 0;\n              if (\"\\t\" == p[0]) {\n                var y = e.cm.options.tabSize,\n                  b = y - e.col % y;\n                (m = u.appendChild(N(\"span\", $(b), \"cm-tab\"))).setAttribute(\"role\", \"presentation\"), m.setAttribute(\"cm-text\", \"\\t\"), e.col += b;\n              } else \"\\r\" == p[0] || \"\\n\" == p[0] ? ((m = u.appendChild(N(\"span\", \"\\r\" == p[0] ? \"␍\" : \"␤\", \"cm-invalidchar\"))).setAttribute(\"cm-text\", p[0]), e.col += 1) : ((m = e.cm.options.specialCharPlaceholder(p[0])).setAttribute(\"cm-text\", p[0]), l && a < 9 ? u.appendChild(N(\"span\", [m])) : u.appendChild(m), e.col += 1);\n              e.map.push(e.pos, e.pos + 1, m), e.pos++;\n            }\n          } else e.col += t.length, u = document.createTextNode(c), e.map.push(e.pos, e.pos + t.length, u), l && a < 9 && (f = !0), e.pos += t.length;\n          if (e.trailingSpace = 32 == c.charCodeAt(t.length - 1), r || n || i || f || o) {\n            var w = r || \"\";\n            n && (w += n), i && (w += i);\n            var x = N(\"span\", [u], w, o);\n            if (s) for (var C in s) s.hasOwnProperty(C) && \"style\" != C && \"class\" != C && x.setAttribute(C, s[C]);\n            return e.content.appendChild(x);\n          }\n          e.content.appendChild(u);\n        }\n      }\n      function er(e, t) {\n        return function (r, n, i, o, l, a, s) {\n          i = i ? i + \" cm-force-border\" : \"cm-force-border\";\n          for (var u = r.pos, c = u + n.length;;) {\n            for (var d = void 0, f = 0; f < t.length && !((d = t[f]).to > u && d.from <= u); f++);\n            if (d.to >= c) return e(r, n, i, o, l, a, s);\n            e(r, n.slice(0, d.to - u), i, o, null, a, s), o = null, n = n.slice(d.to - u), u = d.to;\n          }\n        };\n      }\n      function tr(e, t, r, n) {\n        var i = !n && r.widgetNode;\n        i && e.map.push(e.pos, e.pos + t, i), !n && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement(\"span\"))), i.setAttribute(\"cm-marker\", r.id)), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), e.pos += t, e.trailingSpace = !1;\n      }\n      function rr(e, t, r) {\n        var n = e.markedSpans,\n          i = e.text,\n          o = 0;\n        if (n) for (var l, a, s, u, c, d, f, h = i.length, p = 0, v = 1, g = \"\", m = 0;;) {\n          if (m == p) {\n            s = u = c = a = \"\", f = null, d = null, m = 1 / 0;\n            for (var y = [], b = void 0, w = 0; w < n.length; ++w) {\n              var x = n[w],\n                C = x.marker;\n              if (\"bookmark\" == C.type && x.from == p && C.widgetNode) y.push(C);else if (x.from <= p && (null == x.to || x.to > p || C.collapsed && x.to == p && x.from == p)) {\n                if (null != x.to && x.to != p && m > x.to && (m = x.to, u = \"\"), C.className && (s += \" \" + C.className), C.css && (a = (a ? a + \";\" : \"\") + C.css), C.startStyle && x.from == p && (c += \" \" + C.startStyle), C.endStyle && x.to == m && (b || (b = [])).push(C.endStyle, x.to), C.title && ((f || (f = {})).title = C.title), C.attributes) for (var k in C.attributes) (f || (f = {}))[k] = C.attributes[k];\n                C.collapsed && (!d || Pt(d.marker, C) < 0) && (d = x);\n              } else x.from > p && m > x.from && (m = x.from);\n            }\n            if (b) for (var S = 0; S < b.length; S += 2) b[S + 1] == m && (u += \" \" + b[S]);\n            if (!d || d.from == p) for (var M = 0; M < y.length; ++M) tr(t, 0, y[M]);\n            if (d && (d.from || 0) == p) {\n              if (tr(t, (null == d.to ? h + 1 : d.to) - p, d.marker, null == d.from), null == d.to) return;\n              d.to == p && (d = !1);\n            }\n          }\n          if (p >= h) break;\n          for (var L = Math.min(h, m);;) {\n            if (g) {\n              var T = p + g.length;\n              if (!d) {\n                var O = T > L ? g.slice(0, L - p) : g;\n                t.addToken(t, O, l ? l + s : s, c, p + O.length == m ? u : \"\", a, f);\n              }\n              if (T >= L) {\n                g = g.slice(L - p), p = L;\n                break;\n              }\n              p = T, c = \"\";\n            }\n            g = i.slice(o, o = r[v++]), l = Yt(r[v++], t.cm.options);\n          }\n        } else for (var N = 1; N < r.length; N += 2) t.addToken(t, i.slice(o, o = r[N]), Yt(r[N + 1], t.cm.options));\n      }\n      function nr(e, t, r) {\n        this.line = t, this.rest = function (e) {\n          for (var t, r; t = Wt(e);) e = t.find(1, !0).line, (r || (r = [])).push(e);\n          return r;\n        }(t), this.size = this.rest ? Ye(X(this.rest)) - r + 1 : 1, this.node = this.text = null, this.hidden = jt(e, t);\n      }\n      function ir(e, t, r) {\n        for (var n, i = [], o = t; o < r; o = n) {\n          var l = new nr(e.doc, Ke(e.doc, o), o);\n          n = o + l.size, i.push(l);\n        }\n        return i;\n      }\n      var or = null,\n        lr = null;\n      function ar(e, t) {\n        var r = fe(e, t);\n        if (r.length) {\n          var n,\n            i = Array.prototype.slice.call(arguments, 2);\n          or ? n = or.delayedCallbacks : lr ? n = lr : (n = lr = [], setTimeout(sr, 0));\n          for (var o = function (e) {\n              n.push(function () {\n                return r[e].apply(null, i);\n              });\n            }, l = 0; l < r.length; ++l) o(l);\n        }\n      }\n      function sr() {\n        var e = lr;\n        lr = null;\n        for (var t = 0; t < e.length; ++t) e[t]();\n      }\n      function ur(e, t, r, n) {\n        for (var i = 0; i < t.changes.length; i++) {\n          var o = t.changes[i];\n          \"text\" == o ? fr(e, t) : \"gutter\" == o ? pr(e, t, r, n) : \"class\" == o ? hr(e, t) : \"widget\" == o && vr(e, t, n);\n        }\n        t.changes = null;\n      }\n      function cr(e) {\n        return e.node == e.text && (e.node = N(\"div\", null, null, \"position: relative\"), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), l && a < 8 && (e.node.style.zIndex = 2)), e.node;\n      }\n      function dr(e, t) {\n        var r = e.display.externalMeasured;\n        return r && r.line == t.line ? (e.display.externalMeasured = null, t.measure = r.measure, r.built) : Zt(e, t);\n      }\n      function fr(e, t) {\n        var r = t.text.className,\n          n = dr(e, t);\n        t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, t.textClass = n.textClass, hr(e, t)) : r && (t.text.className = r);\n      }\n      function hr(e, t) {\n        !function (e, t) {\n          var r = t.bgClass ? t.bgClass + \" \" + (t.line.bgClass || \"\") : t.line.bgClass;\n          if (r && (r += \" CodeMirror-linebackground\"), t.background) r ? t.background.className = r : (t.background.parentNode.removeChild(t.background), t.background = null);else if (r) {\n            var n = cr(t);\n            t.background = n.insertBefore(N(\"div\", null, r), n.firstChild), e.display.input.setUneditable(t.background);\n          }\n        }(e, t), t.line.wrapClass ? cr(t).className = t.line.wrapClass : t.node != t.text && (t.node.className = \"\");\n        var r = t.textClass ? t.textClass + \" \" + (t.line.textClass || \"\") : t.line.textClass;\n        t.text.className = r || \"\";\n      }\n      function pr(e, t, r, n) {\n        if (t.gutter && (t.node.removeChild(t.gutter), t.gutter = null), t.gutterBackground && (t.node.removeChild(t.gutterBackground), t.gutterBackground = null), t.line.gutterClass) {\n          var i = cr(t);\n          t.gutterBackground = N(\"div\", null, \"CodeMirror-gutter-background \" + t.line.gutterClass, \"left: \" + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + \"px; width: \" + n.gutterTotalWidth + \"px\"), e.display.input.setUneditable(t.gutterBackground), i.insertBefore(t.gutterBackground, t.text);\n        }\n        var o = t.line.gutterMarkers;\n        if (e.options.lineNumbers || o) {\n          var l = cr(t),\n            a = t.gutter = N(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + \"px\");\n          if (e.display.input.setUneditable(a), l.insertBefore(a, t.text), t.line.gutterClass && (a.className += \" \" + t.line.gutterClass), !e.options.lineNumbers || o && o[\"CodeMirror-linenumbers\"] || (t.lineNumber = a.appendChild(N(\"div\", Qe(e.options, r), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + n.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + e.display.lineNumInnerWidth + \"px\"))), o) for (var s = 0; s < e.display.gutterSpecs.length; ++s) {\n            var u = e.display.gutterSpecs[s].className,\n              c = o.hasOwnProperty(u) && o[u];\n            c && a.appendChild(N(\"div\", [c], \"CodeMirror-gutter-elt\", \"left: \" + n.gutterLeft[u] + \"px; width: \" + n.gutterWidth[u] + \"px\"));\n          }\n        }\n      }\n      function vr(e, t, r) {\n        t.alignable && (t.alignable = null);\n        for (var n = S(\"CodeMirror-linewidget\"), i = t.node.firstChild, o = void 0; i; i = o) o = i.nextSibling, n.test(i.className) && t.node.removeChild(i);\n        mr(e, t, r);\n      }\n      function gr(e, t, r, n) {\n        var i = dr(e, t);\n        return t.text = t.node = i.pre, i.bgClass && (t.bgClass = i.bgClass), i.textClass && (t.textClass = i.textClass), hr(e, t), pr(e, t, r, n), mr(e, t, n), t.node;\n      }\n      function mr(e, t, r) {\n        if (yr(e, t.line, t, r, !0), t.rest) for (var n = 0; n < t.rest.length; n++) yr(e, t.rest[n], t, r, !1);\n      }\n      function yr(e, t, r, n, i) {\n        if (t.widgets) for (var o = cr(r), l = 0, a = t.widgets; l < a.length; ++l) {\n          var s = a[l],\n            u = N(\"div\", [s.node], \"CodeMirror-linewidget\" + (s.className ? \" \" + s.className : \"\"));\n          s.handleMouseEvents || u.setAttribute(\"cm-ignore-events\", \"true\"), br(s, u, r, n), e.display.input.setUneditable(u), i && s.above ? o.insertBefore(u, r.gutter || r.text) : o.appendChild(u), ar(s, \"redraw\");\n        }\n      }\n      function br(e, t, r, n) {\n        if (e.noHScroll) {\n          (r.alignable || (r.alignable = [])).push(t);\n          var i = n.wrapperWidth;\n          t.style.left = n.fixedPos + \"px\", e.coverGutter || (i -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + \"px\"), t.style.width = i + \"px\";\n        }\n        e.coverGutter && (t.style.zIndex = 5, t.style.position = \"relative\", e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + \"px\"));\n      }\n      function wr(e) {\n        if (null != e.height) return e.height;\n        var t = e.doc.cm;\n        if (!t) return 0;\n        if (!D(document.body, e.node)) {\n          var r = \"position: relative;\";\n          e.coverGutter && (r += \"margin-left: -\" + t.display.gutters.offsetWidth + \"px;\"), e.noHScroll && (r += \"width: \" + t.display.wrapper.clientWidth + \"px;\"), O(t.display.measure, N(\"div\", [e.node], null, r));\n        }\n        return e.height = e.node.parentNode.offsetHeight;\n      }\n      function xr(e, t) {\n        for (var r = ke(t); r != e.wrapper; r = r.parentNode) if (!r || 1 == r.nodeType && \"true\" == r.getAttribute(\"cm-ignore-events\") || r.parentNode == e.sizer && r != e.mover) return !0;\n      }\n      function Cr(e) {\n        return e.lineSpace.offsetTop;\n      }\n      function kr(e) {\n        return e.mover.offsetHeight - e.lineSpace.offsetHeight;\n      }\n      function Sr(e) {\n        if (e.cachedPaddingH) return e.cachedPaddingH;\n        var t = O(e.measure, N(\"pre\", \"x\", \"CodeMirror-line-like\")),\n          r = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle,\n          n = {\n            left: parseInt(r.paddingLeft),\n            right: parseInt(r.paddingRight)\n          };\n        return isNaN(n.left) || isNaN(n.right) || (e.cachedPaddingH = n), n;\n      }\n      function Mr(e) {\n        return 30 - e.display.nativeBarWidth;\n      }\n      function Lr(e) {\n        return e.display.scroller.clientWidth - Mr(e) - e.display.barWidth;\n      }\n      function Tr(e) {\n        return e.display.scroller.clientHeight - Mr(e) - e.display.barHeight;\n      }\n      function Or(e, t, r) {\n        if (e.line == t) return {\n          map: e.measure.map,\n          cache: e.measure.cache\n        };\n        for (var n = 0; n < e.rest.length; n++) if (e.rest[n] == t) return {\n          map: e.measure.maps[n],\n          cache: e.measure.caches[n]\n        };\n        for (var i = 0; i < e.rest.length; i++) if (Ye(e.rest[i]) > r) return {\n          map: e.measure.maps[i],\n          cache: e.measure.caches[i],\n          before: !0\n        };\n      }\n      function Nr(e, t, r, n) {\n        return Pr(e, Dr(e, t), r, n);\n      }\n      function Ar(e, t) {\n        if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[cn(e, t)];\n        var r = e.display.externalMeasured;\n        return r && t >= r.lineN && t < r.lineN + r.size ? r : void 0;\n      }\n      function Dr(e, t) {\n        var r = Ye(t),\n          n = Ar(e, r);\n        n && !n.text ? n = null : n && n.changes && (ur(e, n, r, on(e)), e.curOp.forceUpdate = !0), n || (n = function (e, t) {\n          var r = Ye(t = zt(t)),\n            n = e.display.externalMeasured = new nr(e.doc, t, r);\n          n.lineN = r;\n          var i = n.built = Zt(e, n);\n          return n.text = i.pre, O(e.display.lineMeasure, i.pre), n;\n        }(e, t));\n        var i = Or(n, t, r);\n        return {\n          line: t,\n          view: n,\n          rect: null,\n          map: i.map,\n          cache: i.cache,\n          before: i.before,\n          hasHeights: !1\n        };\n      }\n      function Pr(e, t, r, n, i) {\n        t.before && (r = -1);\n        var o,\n          s = r + (n || \"\");\n        return t.cache.hasOwnProperty(s) ? o = t.cache[s] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || (function (e, t, r) {\n          var n = e.options.lineWrapping,\n            i = n && Lr(e);\n          if (!t.measure.heights || n && t.measure.width != i) {\n            var o = t.measure.heights = [];\n            if (n) {\n              t.measure.width = i;\n              for (var l = t.text.firstChild.getClientRects(), a = 0; a < l.length - 1; a++) {\n                var s = l[a],\n                  u = l[a + 1];\n                Math.abs(s.bottom - u.bottom) > 2 && o.push((s.bottom + u.top) / 2 - r.top);\n              }\n            }\n            o.push(r.bottom - r.top);\n          }\n        }(e, t.view, t.rect), t.hasHeights = !0), (o = function (e, t, r, n) {\n          var i,\n            o = Wr(t.map, r, n),\n            s = o.node,\n            u = o.start,\n            c = o.end,\n            d = o.collapse;\n          if (3 == s.nodeType) {\n            for (var f = 0; f < 4; f++) {\n              for (; u && ne(t.line.text.charAt(o.coverStart + u));) --u;\n              for (; o.coverStart + c < o.coverEnd && ne(t.line.text.charAt(o.coverStart + c));) ++c;\n              if ((i = l && a < 9 && 0 == u && c == o.coverEnd - o.coverStart ? s.parentNode.getBoundingClientRect() : Ir(M(s, u, c).getClientRects(), n)).left || i.right || 0 == u) break;\n              c = u, u -= 1, d = \"right\";\n            }\n            l && a < 11 && (i = function (e, t) {\n              if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !function (e) {\n                if (null != He) return He;\n                var t = O(e, N(\"span\", \"x\")),\n                  r = t.getBoundingClientRect(),\n                  n = M(t, 0, 1).getBoundingClientRect();\n                return He = Math.abs(r.left - n.left) > 1;\n              }(e)) return t;\n              var r = screen.logicalXDPI / screen.deviceXDPI,\n                n = screen.logicalYDPI / screen.deviceYDPI;\n              return {\n                left: t.left * r,\n                right: t.right * r,\n                top: t.top * n,\n                bottom: t.bottom * n\n              };\n            }(e.display.measure, i));\n          } else {\n            var h;\n            u > 0 && (d = n = \"right\"), i = e.options.lineWrapping && (h = s.getClientRects()).length > 1 ? h[\"right\" == n ? h.length - 1 : 0] : s.getBoundingClientRect();\n          }\n          if (l && a < 9 && !u && (!i || !i.left && !i.right)) {\n            var p = s.parentNode.getClientRects()[0];\n            i = p ? {\n              left: p.left,\n              right: p.left + nn(e.display),\n              top: p.top,\n              bottom: p.bottom\n            } : Hr;\n          }\n          for (var v = i.top - t.rect.top, g = i.bottom - t.rect.top, m = (v + g) / 2, y = t.view.measure.heights, b = 0; b < y.length - 1 && !(m < y[b]); b++);\n          var w = b ? y[b - 1] : 0,\n            x = y[b],\n            C = {\n              left: (\"right\" == d ? i.right : i.left) - t.rect.left,\n              right: (\"left\" == d ? i.left : i.right) - t.rect.left,\n              top: w,\n              bottom: x\n            };\n          return i.left || i.right || (C.bogus = !0), e.options.singleCursorHeightPerLine || (C.rtop = v, C.rbottom = g), C;\n        }(e, t, r, n)).bogus || (t.cache[s] = o)), {\n          left: o.left,\n          right: o.right,\n          top: i ? o.rtop : o.top,\n          bottom: i ? o.rbottom : o.bottom\n        };\n      }\n      var Er,\n        Hr = {\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0\n        };\n      function Wr(e, t, r) {\n        for (var n, i, o, l, a, s, u = 0; u < e.length; u += 3) if (a = e[u], s = e[u + 1], t < a ? (i = 0, o = 1, l = \"left\") : t < s ? o = 1 + (i = t - a) : (u == e.length - 3 || t == s && e[u + 3] > t) && (i = (o = s - a) - 1, t >= s && (l = \"right\")), null != i) {\n          if (n = e[u + 2], a == s && r == (n.insertLeft ? \"left\" : \"right\") && (l = r), \"left\" == r && 0 == i) for (; u && e[u - 2] == e[u - 3] && e[u - 1].insertLeft;) n = e[2 + (u -= 3)], l = \"left\";\n          if (\"right\" == r && i == s - a) for (; u < e.length - 3 && e[u + 3] == e[u + 4] && !e[u + 5].insertLeft;) n = e[(u += 3) + 2], l = \"right\";\n          break;\n        }\n        return {\n          node: n,\n          start: i,\n          end: o,\n          collapse: l,\n          coverStart: a,\n          coverEnd: s\n        };\n      }\n      function Ir(e, t) {\n        var r = Hr;\n        if (\"left\" == t) for (var n = 0; n < e.length && (r = e[n]).left == r.right; n++);else for (var i = e.length - 1; i >= 0 && (r = e[i]).left == r.right; i--);\n        return r;\n      }\n      function Fr(e) {\n        if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest)) for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {};\n      }\n      function zr(e) {\n        e.display.externalMeasure = null, T(e.display.lineMeasure);\n        for (var t = 0; t < e.display.view.length; t++) Fr(e.display.view[t]);\n      }\n      function _r(e) {\n        zr(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null;\n      }\n      function Rr() {\n        return c && g ? -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) : window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n      }\n      function jr() {\n        return c && g ? -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) : window.pageYOffset || (document.documentElement || document.body).scrollTop;\n      }\n      function Br(e) {\n        var t = 0;\n        if (e.widgets) for (var r = 0; r < e.widgets.length; ++r) e.widgets[r].above && (t += wr(e.widgets[r]));\n        return t;\n      }\n      function Vr(e, t, r, n, i) {\n        if (!i) {\n          var o = Br(t);\n          r.top += o, r.bottom += o;\n        }\n        if (\"line\" == n) return r;\n        n || (n = \"local\");\n        var l = Vt(t);\n        if (\"local\" == n ? l += Cr(e.display) : l -= e.display.viewOffset, \"page\" == n || \"window\" == n) {\n          var a = e.display.lineSpace.getBoundingClientRect();\n          l += a.top + (\"window\" == n ? 0 : jr());\n          var s = a.left + (\"window\" == n ? 0 : Rr());\n          r.left += s, r.right += s;\n        }\n        return r.top += l, r.bottom += l, r;\n      }\n      function Gr(e, t, r) {\n        if (\"div\" == r) return t;\n        var n = t.left,\n          i = t.top;\n        if (\"page\" == r) n -= Rr(), i -= jr();else if (\"local\" == r || !r) {\n          var o = e.display.sizer.getBoundingClientRect();\n          n += o.left, i += o.top;\n        }\n        var l = e.display.lineSpace.getBoundingClientRect();\n        return {\n          left: n - l.left,\n          top: i - l.top\n        };\n      }\n      function Ur(e, t, r, n, i) {\n        return n || (n = Ke(e.doc, t.line)), Vr(e, n, Nr(e, n, t.ch, i), r);\n      }\n      function Kr(e, t, r, n, i, o) {\n        function l(t, l) {\n          var a = Pr(e, i, t, l ? \"right\" : \"left\", o);\n          return l ? a.left = a.right : a.right = a.left, Vr(e, n, a, r);\n        }\n        n = n || Ke(e.doc, t.line), i || (i = Dr(e, n));\n        var a = ue(n, e.doc.direction),\n          s = t.ch,\n          u = t.sticky;\n        if (s >= n.text.length ? (s = n.text.length, u = \"before\") : s <= 0 && (s = 0, u = \"after\"), !a) return l(\"before\" == u ? s - 1 : s, \"before\" == u);\n        function c(e, t, r) {\n          return l(r ? e - 1 : e, 1 == a[t].level != r);\n        }\n        var d = ae(a, s, u),\n          f = le,\n          h = c(s, d, \"before\" == u);\n        return null != f && (h.other = c(s, f, \"before\" != u)), h;\n      }\n      function $r(e, t) {\n        var r = 0;\n        t = at(e.doc, t), e.options.lineWrapping || (r = nn(e.display) * t.ch);\n        var n = Ke(e.doc, t.line),\n          i = Vt(n) + Cr(e.display);\n        return {\n          left: r,\n          right: r,\n          top: i,\n          bottom: i + n.height\n        };\n      }\n      function Xr(e, t, r, n, i) {\n        var o = et(e, t, r);\n        return o.xRel = i, n && (o.outside = n), o;\n      }\n      function qr(e, t, r) {\n        var n = e.doc;\n        if ((r += e.display.viewOffset) < 0) return Xr(n.first, 0, null, -1, -1);\n        var i = Ze(n, r),\n          o = n.first + n.size - 1;\n        if (i > o) return Xr(n.first + n.size - 1, Ke(n, o).text.length, null, 1, 1);\n        t < 0 && (t = 0);\n        for (var l = Ke(n, i);;) {\n          var a = Qr(e, l, i, t, r),\n            s = It(l, a.ch + (a.xRel > 0 || a.outside > 0 ? 1 : 0));\n          if (!s) return a;\n          var u = s.find(1);\n          if (u.line == i) return u;\n          l = Ke(n, i = u.line);\n        }\n      }\n      function Yr(e, t, r, n) {\n        n -= Br(t);\n        var i = t.text.length,\n          o = oe(function (t) {\n            return Pr(e, r, t - 1).bottom <= n;\n          }, i, 0);\n        return {\n          begin: o,\n          end: i = oe(function (t) {\n            return Pr(e, r, t).top > n;\n          }, o, i)\n        };\n      }\n      function Zr(e, t, r, n) {\n        return r || (r = Dr(e, t)), Yr(e, t, r, Vr(e, t, Pr(e, r, n), \"line\").top);\n      }\n      function Jr(e, t, r, n) {\n        return !(e.bottom <= r) && (e.top > r || (n ? e.left : e.right) > t);\n      }\n      function Qr(e, t, r, n, i) {\n        i -= Vt(t);\n        var o = Dr(e, t),\n          l = Br(t),\n          a = 0,\n          s = t.text.length,\n          u = !0,\n          c = ue(t, e.doc.direction);\n        if (c) {\n          var d = (e.options.lineWrapping ? tn : en)(e, t, r, o, c, n, i);\n          a = (u = 1 != d.level) ? d.from : d.to - 1, s = u ? d.to : d.from - 1;\n        }\n        var f,\n          h,\n          p = null,\n          v = null,\n          g = oe(function (t) {\n            var r = Pr(e, o, t);\n            return r.top += l, r.bottom += l, !!Jr(r, n, i, !1) && (r.top <= i && r.left <= n && (p = t, v = r), !0);\n          }, a, s),\n          m = !1;\n        if (v) {\n          var y = n - v.left < v.right - n,\n            b = y == u;\n          g = p + (b ? 0 : 1), h = b ? \"after\" : \"before\", f = y ? v.left : v.right;\n        } else {\n          u || g != s && g != a || g++, h = 0 == g ? \"after\" : g == t.text.length ? \"before\" : Pr(e, o, g - (u ? 1 : 0)).bottom + l <= i == u ? \"after\" : \"before\";\n          var w = Kr(e, et(r, g, h), \"line\", t, o);\n          f = w.left, m = i < w.top ? -1 : i >= w.bottom ? 1 : 0;\n        }\n        return Xr(r, g = ie(t.text, g, 1), h, m, n - f);\n      }\n      function en(e, t, r, n, i, o, l) {\n        var a = oe(function (a) {\n            var s = i[a],\n              u = 1 != s.level;\n            return Jr(Kr(e, et(r, u ? s.to : s.from, u ? \"before\" : \"after\"), \"line\", t, n), o, l, !0);\n          }, 0, i.length - 1),\n          s = i[a];\n        if (a > 0) {\n          var u = 1 != s.level,\n            c = Kr(e, et(r, u ? s.from : s.to, u ? \"after\" : \"before\"), \"line\", t, n);\n          Jr(c, o, l, !0) && c.top > l && (s = i[a - 1]);\n        }\n        return s;\n      }\n      function tn(e, t, r, n, i, o, l) {\n        var a = Yr(e, t, n, l),\n          s = a.begin,\n          u = a.end;\n        /\\s/.test(t.text.charAt(u - 1)) && u--;\n        for (var c = null, d = null, f = 0; f < i.length; f++) {\n          var h = i[f];\n          if (!(h.from >= u || h.to <= s)) {\n            var p = Pr(e, n, 1 != h.level ? Math.min(u, h.to) - 1 : Math.max(s, h.from)).right,\n              v = p < o ? o - p + 1e9 : p - o;\n            (!c || d > v) && (c = h, d = v);\n          }\n        }\n        return c || (c = i[i.length - 1]), c.from < s && (c = {\n          from: s,\n          to: c.to,\n          level: c.level\n        }), c.to > u && (c = {\n          from: c.from,\n          to: u,\n          level: c.level\n        }), c;\n      }\n      function rn(e) {\n        if (null != e.cachedTextHeight) return e.cachedTextHeight;\n        if (null == Er) {\n          Er = N(\"pre\", null, \"CodeMirror-line-like\");\n          for (var t = 0; t < 49; ++t) Er.appendChild(document.createTextNode(\"x\")), Er.appendChild(N(\"br\"));\n          Er.appendChild(document.createTextNode(\"x\"));\n        }\n        O(e.measure, Er);\n        var r = Er.offsetHeight / 50;\n        return r > 3 && (e.cachedTextHeight = r), T(e.measure), r || 1;\n      }\n      function nn(e) {\n        if (null != e.cachedCharWidth) return e.cachedCharWidth;\n        var t = N(\"span\", \"xxxxxxxxxx\"),\n          r = N(\"pre\", [t], \"CodeMirror-line-like\");\n        O(e.measure, r);\n        var n = t.getBoundingClientRect(),\n          i = (n.right - n.left) / 10;\n        return i > 2 && (e.cachedCharWidth = i), i || 10;\n      }\n      function on(e) {\n        for (var t = e.display, r = {}, n = {}, i = t.gutters.clientLeft, o = t.gutters.firstChild, l = 0; o; o = o.nextSibling, ++l) {\n          var a = e.display.gutterSpecs[l].className;\n          r[a] = o.offsetLeft + o.clientLeft + i, n[a] = o.clientWidth;\n        }\n        return {\n          fixedPos: ln(t),\n          gutterTotalWidth: t.gutters.offsetWidth,\n          gutterLeft: r,\n          gutterWidth: n,\n          wrapperWidth: t.wrapper.clientWidth\n        };\n      }\n      function ln(e) {\n        return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left;\n      }\n      function an(e) {\n        var t = rn(e.display),\n          r = e.options.lineWrapping,\n          n = r && Math.max(5, e.display.scroller.clientWidth / nn(e.display) - 3);\n        return function (i) {\n          if (jt(e.doc, i)) return 0;\n          var o = 0;\n          if (i.widgets) for (var l = 0; l < i.widgets.length; l++) i.widgets[l].height && (o += i.widgets[l].height);\n          return r ? o + (Math.ceil(i.text.length / n) || 1) * t : o + t;\n        };\n      }\n      function sn(e) {\n        var t = e.doc,\n          r = an(e);\n        t.iter(function (e) {\n          var t = r(e);\n          t != e.height && qe(e, t);\n        });\n      }\n      function un(e, t, r, n) {\n        var i = e.display;\n        if (!r && \"true\" == ke(t).getAttribute(\"cm-not-content\")) return null;\n        var o,\n          l,\n          a = i.lineSpace.getBoundingClientRect();\n        try {\n          o = t.clientX - a.left, l = t.clientY - a.top;\n        } catch (t) {\n          return null;\n        }\n        var s,\n          u = qr(e, o, l);\n        if (n && u.xRel > 0 && (s = Ke(e.doc, u.line).text).length == u.ch) {\n          var c = z(s, s.length, e.options.tabSize) - s.length;\n          u = et(u.line, Math.max(0, Math.round((o - Sr(e.display).left) / nn(e.display)) - c));\n        }\n        return u;\n      }\n      function cn(e, t) {\n        if (t >= e.display.viewTo) return null;\n        if ((t -= e.display.viewFrom) < 0) return null;\n        for (var r = e.display.view, n = 0; n < r.length; n++) if ((t -= r[n].size) < 0) return n;\n      }\n      function dn(e, t, r, n) {\n        null == t && (t = e.doc.first), null == r && (r = e.doc.first + e.doc.size), n || (n = 0);\n        var i = e.display;\n        if (n && r < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= i.viewTo) Ct && _t(e.doc, t) < i.viewTo && hn(e);else if (r <= i.viewFrom) Ct && Rt(e.doc, r + n) > i.viewFrom ? hn(e) : (i.viewFrom += n, i.viewTo += n);else if (t <= i.viewFrom && r >= i.viewTo) hn(e);else if (t <= i.viewFrom) {\n          var o = pn(e, r, r + n, 1);\n          o ? (i.view = i.view.slice(o.index), i.viewFrom = o.lineN, i.viewTo += n) : hn(e);\n        } else if (r >= i.viewTo) {\n          var l = pn(e, t, t, -1);\n          l ? (i.view = i.view.slice(0, l.index), i.viewTo = l.lineN) : hn(e);\n        } else {\n          var a = pn(e, t, t, -1),\n            s = pn(e, r, r + n, 1);\n          a && s ? (i.view = i.view.slice(0, a.index).concat(ir(e, a.lineN, s.lineN)).concat(i.view.slice(s.index)), i.viewTo += n) : hn(e);\n        }\n        var u = i.externalMeasured;\n        u && (r < u.lineN ? u.lineN += n : t < u.lineN + u.size && (i.externalMeasured = null));\n      }\n      function fn(e, t, r) {\n        e.curOp.viewChanged = !0;\n        var n = e.display,\n          i = e.display.externalMeasured;\n        if (i && t >= i.lineN && t < i.lineN + i.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) {\n          var o = n.view[cn(e, t)];\n          if (null != o.node) {\n            var l = o.changes || (o.changes = []);\n            -1 == R(l, r) && l.push(r);\n          }\n        }\n      }\n      function hn(e) {\n        e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0;\n      }\n      function pn(e, t, r, n) {\n        var i,\n          o = cn(e, t),\n          l = e.display.view;\n        if (!Ct || r == e.doc.first + e.doc.size) return {\n          index: o,\n          lineN: r\n        };\n        for (var a = e.display.viewFrom, s = 0; s < o; s++) a += l[s].size;\n        if (a != t) {\n          if (n > 0) {\n            if (o == l.length - 1) return null;\n            i = a + l[o].size - t, o++;\n          } else i = a - t;\n          t += i, r += i;\n        }\n        for (; _t(e.doc, r) != r;) {\n          if (o == (n < 0 ? 0 : l.length - 1)) return null;\n          r += n * l[o - (n < 0 ? 1 : 0)].size, o += n;\n        }\n        return {\n          index: o,\n          lineN: r\n        };\n      }\n      function vn(e) {\n        for (var t = e.display.view, r = 0, n = 0; n < t.length; n++) {\n          var i = t[n];\n          i.hidden || i.node && !i.changes || ++r;\n        }\n        return r;\n      }\n      function gn(e) {\n        e.display.input.showSelection(e.display.input.prepareSelection());\n      }\n      function mn(e, t) {\n        void 0 === t && (t = !0);\n        for (var r = e.doc, n = {}, i = n.cursors = document.createDocumentFragment(), o = n.selection = document.createDocumentFragment(), l = 0; l < r.sel.ranges.length; l++) if (t || l != r.sel.primIndex) {\n          var a = r.sel.ranges[l];\n          if (!(a.from().line >= e.display.viewTo || a.to().line < e.display.viewFrom)) {\n            var s = a.empty();\n            (s || e.options.showCursorWhenSelecting) && yn(e, a.head, i), s || wn(e, a, o);\n          }\n        }\n        return n;\n      }\n      function yn(e, t, r) {\n        var n = Kr(e, t, \"div\", null, null, !e.options.singleCursorHeightPerLine),\n          i = r.appendChild(N(\"div\", \" \", \"CodeMirror-cursor\"));\n        if (i.style.left = n.left + \"px\", i.style.top = n.top + \"px\", i.style.height = Math.max(0, n.bottom - n.top) * e.options.cursorHeight + \"px\", n.other) {\n          var o = r.appendChild(N(\"div\", \" \", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n          o.style.display = \"\", o.style.left = n.other.left + \"px\", o.style.top = n.other.top + \"px\", o.style.height = .85 * (n.other.bottom - n.other.top) + \"px\";\n        }\n      }\n      function bn(e, t) {\n        return e.top - t.top || e.left - t.left;\n      }\n      function wn(e, t, r) {\n        var n = e.display,\n          i = e.doc,\n          o = document.createDocumentFragment(),\n          l = Sr(e.display),\n          a = l.left,\n          s = Math.max(n.sizerWidth, Lr(e) - n.sizer.offsetLeft) - l.right,\n          u = \"ltr\" == i.direction;\n        function c(e, t, r, n) {\n          t < 0 && (t = 0), t = Math.round(t), n = Math.round(n), o.appendChild(N(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + e + \"px;\\n                             top: \" + t + \"px; width: \" + (null == r ? s - e : r) + \"px;\\n                             height: \" + (n - t) + \"px\"));\n        }\n        function d(t, r, n) {\n          var o,\n            l,\n            d = Ke(i, t),\n            f = d.text.length;\n          function h(r, n) {\n            return Ur(e, et(t, r), \"div\", d, n);\n          }\n          function p(t, r, n) {\n            var i = Zr(e, d, null, t),\n              o = \"ltr\" == r == (\"after\" == n) ? \"left\" : \"right\";\n            return h(\"after\" == n ? i.begin : i.end - (/\\s/.test(d.text.charAt(i.end - 1)) ? 2 : 1), o)[o];\n          }\n          var v = ue(d, i.direction);\n          return function (e, t, r, n) {\n            if (!e) return n(t, r, \"ltr\", 0);\n            for (var i = !1, o = 0; o < e.length; ++o) {\n              var l = e[o];\n              (l.from < r && l.to > t || t == r && l.to == t) && (n(Math.max(l.from, t), Math.min(l.to, r), 1 == l.level ? \"rtl\" : \"ltr\", o), i = !0);\n            }\n            i || n(t, r, \"ltr\");\n          }(v, r || 0, null == n ? f : n, function (e, t, i, d) {\n            var g = \"ltr\" == i,\n              m = h(e, g ? \"left\" : \"right\"),\n              y = h(t - 1, g ? \"right\" : \"left\"),\n              b = null == r && 0 == e,\n              w = null == n && t == f,\n              x = 0 == d,\n              C = !v || d == v.length - 1;\n            if (y.top - m.top <= 3) {\n              var k = (u ? w : b) && C,\n                S = (u ? b : w) && x ? a : (g ? m : y).left,\n                M = k ? s : (g ? y : m).right;\n              c(S, m.top, M - S, m.bottom);\n            } else {\n              var L, T, O, N;\n              g ? (L = u && b && x ? a : m.left, T = u ? s : p(e, i, \"before\"), O = u ? a : p(t, i, \"after\"), N = u && w && C ? s : y.right) : (L = u ? p(e, i, \"before\") : a, T = !u && b && x ? s : m.right, O = !u && w && C ? a : y.left, N = u ? p(t, i, \"after\") : s), c(L, m.top, T - L, m.bottom), m.bottom < y.top && c(a, m.bottom, null, y.top), c(O, y.top, N - O, y.bottom);\n            }\n            (!o || bn(m, o) < 0) && (o = m), bn(y, o) < 0 && (o = y), (!l || bn(m, l) < 0) && (l = m), bn(y, l) < 0 && (l = y);\n          }), {\n            start: o,\n            end: l\n          };\n        }\n        var f = t.from(),\n          h = t.to();\n        if (f.line == h.line) d(f.line, f.ch, h.ch);else {\n          var p = Ke(i, f.line),\n            v = Ke(i, h.line),\n            g = zt(p) == zt(v),\n            m = d(f.line, f.ch, g ? p.text.length + 1 : null).end,\n            y = d(h.line, g ? 0 : null, h.ch).start;\n          g && (m.top < y.top - 2 ? (c(m.right, m.top, null, m.bottom), c(a, y.top, y.left, y.bottom)) : c(m.right, m.top, y.left - m.right, m.bottom)), m.bottom < y.top && c(a, m.bottom, null, y.top);\n        }\n        r.appendChild(o);\n      }\n      function xn(e) {\n        if (e.state.focused) {\n          var t = e.display;\n          clearInterval(t.blinker);\n          var r = !0;\n          t.cursorDiv.style.visibility = \"\", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function () {\n            return t.cursorDiv.style.visibility = (r = !r) ? \"\" : \"hidden\";\n          }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = \"hidden\");\n        }\n      }\n      function Cn(e) {\n        e.state.focused || (e.display.input.focus(), Sn(e));\n      }\n      function kn(e) {\n        e.state.delayingBlurEvent = !0, setTimeout(function () {\n          e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, Mn(e));\n        }, 100);\n      }\n      function Sn(e, t) {\n        e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), \"nocursor\" != e.options.readOnly && (e.state.focused || (pe(e, \"focus\", e, t), e.state.focused = !0, E(e.display.wrapper, \"CodeMirror-focused\"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), s && setTimeout(function () {\n          return e.display.input.reset(!0);\n        }, 20)), e.display.input.receivedFocus()), xn(e));\n      }\n      function Mn(e, t) {\n        e.state.delayingBlurEvent || (e.state.focused && (pe(e, \"blur\", e, t), e.state.focused = !1, L(e.display.wrapper, \"CodeMirror-focused\")), clearInterval(e.display.blinker), setTimeout(function () {\n          e.state.focused || (e.display.shift = !1);\n        }, 150));\n      }\n      function Ln(e) {\n        for (var t = e.display, r = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) {\n          var i = t.view[n],\n            o = e.options.lineWrapping,\n            s = void 0,\n            u = 0;\n          if (!i.hidden) {\n            if (l && a < 8) {\n              var c = i.node.offsetTop + i.node.offsetHeight;\n              s = c - r, r = c;\n            } else {\n              var d = i.node.getBoundingClientRect();\n              s = d.bottom - d.top, !o && i.text.firstChild && (u = i.text.firstChild.getBoundingClientRect().right - d.left - 1);\n            }\n            var f = i.line.height - s;\n            if ((f > .005 || f < -.005) && (qe(i.line, s), Tn(i.line), i.rest)) for (var h = 0; h < i.rest.length; h++) Tn(i.rest[h]);\n            if (u > e.display.sizerWidth) {\n              var p = Math.ceil(u / nn(e.display));\n              p > e.display.maxLineLength && (e.display.maxLineLength = p, e.display.maxLine = i.line, e.display.maxLineChanged = !0);\n            }\n          }\n        }\n      }\n      function Tn(e) {\n        if (e.widgets) for (var t = 0; t < e.widgets.length; ++t) {\n          var r = e.widgets[t],\n            n = r.node.parentNode;\n          n && (r.height = n.offsetHeight);\n        }\n      }\n      function On(e, t, r) {\n        var n = r && null != r.top ? Math.max(0, r.top) : e.scroller.scrollTop;\n        n = Math.floor(n - Cr(e));\n        var i = r && null != r.bottom ? r.bottom : n + e.wrapper.clientHeight,\n          o = Ze(t, n),\n          l = Ze(t, i);\n        if (r && r.ensure) {\n          var a = r.ensure.from.line,\n            s = r.ensure.to.line;\n          a < o ? (o = a, l = Ze(t, Vt(Ke(t, a)) + e.wrapper.clientHeight)) : Math.min(s, t.lastLine()) >= l && (o = Ze(t, Vt(Ke(t, s)) - e.wrapper.clientHeight), l = s);\n        }\n        return {\n          from: o,\n          to: Math.max(l, o + 1)\n        };\n      }\n      function Nn(e, t) {\n        var r = e.display,\n          n = rn(e.display);\n        t.top < 0 && (t.top = 0);\n        var i = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : r.scroller.scrollTop,\n          o = Tr(e),\n          l = {};\n        t.bottom - t.top > o && (t.bottom = t.top + o);\n        var a = e.doc.height + kr(r),\n          s = t.top < n,\n          u = t.bottom > a - n;\n        if (t.top < i) l.scrollTop = s ? 0 : t.top;else if (t.bottom > i + o) {\n          var c = Math.min(t.top, (u ? a : t.bottom) - o);\n          c != i && (l.scrollTop = c);\n        }\n        var d = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : r.scroller.scrollLeft,\n          f = Lr(e) - (e.options.fixedGutter ? r.gutters.offsetWidth : 0),\n          h = t.right - t.left > f;\n        return h && (t.right = t.left + f), t.left < 10 ? l.scrollLeft = 0 : t.left < d ? l.scrollLeft = Math.max(0, t.left - (h ? 0 : 10)) : t.right > f + d - 3 && (l.scrollLeft = t.right + (h ? 0 : 10) - f), l;\n      }\n      function An(e, t) {\n        null != t && (En(e), e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + t);\n      }\n      function Dn(e) {\n        En(e);\n        var t = e.getCursor();\n        e.curOp.scrollToPos = {\n          from: t,\n          to: t,\n          margin: e.options.cursorScrollMargin\n        };\n      }\n      function Pn(e, t, r) {\n        null == t && null == r || En(e), null != t && (e.curOp.scrollLeft = t), null != r && (e.curOp.scrollTop = r);\n      }\n      function En(e) {\n        var t = e.curOp.scrollToPos;\n        t && (e.curOp.scrollToPos = null, Hn(e, $r(e, t.from), $r(e, t.to), t.margin));\n      }\n      function Hn(e, t, r, n) {\n        var i = Nn(e, {\n          left: Math.min(t.left, r.left),\n          top: Math.min(t.top, r.top) - n,\n          right: Math.max(t.right, r.right),\n          bottom: Math.max(t.bottom, r.bottom) + n\n        });\n        Pn(e, i.scrollLeft, i.scrollTop);\n      }\n      function Wn(e, t) {\n        Math.abs(e.doc.scrollTop - t) < 2 || (r || si(e, {\n          top: t\n        }), In(e, t, !0), r && si(e), ni(e, 100));\n      }\n      function In(e, t, r) {\n        t = Math.min(e.display.scroller.scrollHeight - e.display.scroller.clientHeight, t), (e.display.scroller.scrollTop != t || r) && (e.doc.scrollTop = t, e.display.scrollbars.setScrollTop(t), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t));\n      }\n      function Fn(e, t, r, n) {\n        t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth), (r ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) && !n || (e.doc.scrollLeft = t, di(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t));\n      }\n      function zn(e) {\n        var t = e.display,\n          r = t.gutters.offsetWidth,\n          n = Math.round(e.doc.height + kr(e.display));\n        return {\n          clientHeight: t.scroller.clientHeight,\n          viewHeight: t.wrapper.clientHeight,\n          scrollWidth: t.scroller.scrollWidth,\n          clientWidth: t.scroller.clientWidth,\n          viewWidth: t.wrapper.clientWidth,\n          barLeft: e.options.fixedGutter ? r : 0,\n          docHeight: n,\n          scrollHeight: n + Mr(e) + t.barHeight,\n          nativeBarWidth: t.nativeBarWidth,\n          gutterWidth: r\n        };\n      }\n      var _n = function (e, t, r) {\n        this.cm = r;\n        var n = this.vert = N(\"div\", [N(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\"),\n          i = this.horiz = N(\"div\", [N(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n        n.tabIndex = i.tabIndex = -1, e(n), e(i), de(n, \"scroll\", function () {\n          n.clientHeight && t(n.scrollTop, \"vertical\");\n        }), de(i, \"scroll\", function () {\n          i.clientWidth && t(i.scrollLeft, \"horizontal\");\n        }), this.checkedZeroWidth = !1, l && a < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\");\n      };\n      _n.prototype.update = function (e) {\n        var t = e.scrollWidth > e.clientWidth + 1,\n          r = e.scrollHeight > e.clientHeight + 1,\n          n = e.nativeBarWidth;\n        if (r) {\n          this.vert.style.display = \"block\", this.vert.style.bottom = t ? n + \"px\" : \"0\";\n          var i = e.viewHeight - (t ? n : 0);\n          this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + \"px\";\n        } else this.vert.style.display = \"\", this.vert.firstChild.style.height = \"0\";\n        if (t) {\n          this.horiz.style.display = \"block\", this.horiz.style.right = r ? n + \"px\" : \"0\", this.horiz.style.left = e.barLeft + \"px\";\n          var o = e.viewWidth - e.barLeft - (r ? n : 0);\n          this.horiz.firstChild.style.width = Math.max(0, e.scrollWidth - e.clientWidth + o) + \"px\";\n        } else this.horiz.style.display = \"\", this.horiz.firstChild.style.width = \"0\";\n        return !this.checkedZeroWidth && e.clientHeight > 0 && (0 == n && this.zeroWidthHack(), this.checkedZeroWidth = !0), {\n          right: r ? n : 0,\n          bottom: t ? n : 0\n        };\n      }, _n.prototype.setScrollLeft = function (e) {\n        this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e), this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n      }, _n.prototype.setScrollTop = function (e) {\n        this.vert.scrollTop != e && (this.vert.scrollTop = e), this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n      }, _n.prototype.zeroWidthHack = function () {\n        var e = y && !h ? \"12px\" : \"18px\";\n        this.horiz.style.height = this.vert.style.width = e, this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\", this.disableHoriz = new _(), this.disableVert = new _();\n      }, _n.prototype.enableZeroWidthBar = function (e, t, r) {\n        e.style.pointerEvents = \"auto\", t.set(1e3, function n() {\n          var i = e.getBoundingClientRect();\n          (\"vert\" == r ? document.elementFromPoint(i.right - 1, (i.top + i.bottom) / 2) : document.elementFromPoint((i.right + i.left) / 2, i.bottom - 1)) != e ? e.style.pointerEvents = \"none\" : t.set(1e3, n);\n        });\n      }, _n.prototype.clear = function () {\n        var e = this.horiz.parentNode;\n        e.removeChild(this.horiz), e.removeChild(this.vert);\n      };\n      var Rn = function () {};\n      function jn(e, t) {\n        t || (t = zn(e));\n        var r = e.display.barWidth,\n          n = e.display.barHeight;\n        Bn(e, t);\n        for (var i = 0; i < 4 && r != e.display.barWidth || n != e.display.barHeight; i++) r != e.display.barWidth && e.options.lineWrapping && Ln(e), Bn(e, zn(e)), r = e.display.barWidth, n = e.display.barHeight;\n      }\n      function Bn(e, t) {\n        var r = e.display,\n          n = r.scrollbars.update(t);\n        r.sizer.style.paddingRight = (r.barWidth = n.right) + \"px\", r.sizer.style.paddingBottom = (r.barHeight = n.bottom) + \"px\", r.heightForcer.style.borderBottom = n.bottom + \"px solid transparent\", n.right && n.bottom ? (r.scrollbarFiller.style.display = \"block\", r.scrollbarFiller.style.height = n.bottom + \"px\", r.scrollbarFiller.style.width = n.right + \"px\") : r.scrollbarFiller.style.display = \"\", n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (r.gutterFiller.style.display = \"block\", r.gutterFiller.style.height = n.bottom + \"px\", r.gutterFiller.style.width = t.gutterWidth + \"px\") : r.gutterFiller.style.display = \"\";\n      }\n      Rn.prototype.update = function () {\n        return {\n          bottom: 0,\n          right: 0\n        };\n      }, Rn.prototype.setScrollLeft = function () {}, Rn.prototype.setScrollTop = function () {}, Rn.prototype.clear = function () {};\n      var Vn = {\n        native: _n,\n        null: Rn\n      };\n      function Gn(e) {\n        e.display.scrollbars && (e.display.scrollbars.clear(), e.display.scrollbars.addClass && L(e.display.wrapper, e.display.scrollbars.addClass)), e.display.scrollbars = new Vn[e.options.scrollbarStyle](function (t) {\n          e.display.wrapper.insertBefore(t, e.display.scrollbarFiller), de(t, \"mousedown\", function () {\n            e.state.focused && setTimeout(function () {\n              return e.display.input.focus();\n            }, 0);\n          }), t.setAttribute(\"cm-not-content\", \"true\");\n        }, function (t, r) {\n          \"horizontal\" == r ? Fn(e, t) : Wn(e, t);\n        }, e), e.display.scrollbars.addClass && E(e.display.wrapper, e.display.scrollbars.addClass);\n      }\n      var Un = 0;\n      function Kn(e) {\n        var t;\n        e.curOp = {\n          cm: e,\n          viewChanged: !1,\n          startHeight: e.doc.height,\n          forceUpdate: !1,\n          updateInput: 0,\n          typing: !1,\n          changeObjs: null,\n          cursorActivityHandlers: null,\n          cursorActivityCalled: 0,\n          selectionChanged: !1,\n          updateMaxLine: !1,\n          scrollLeft: null,\n          scrollTop: null,\n          scrollToPos: null,\n          focus: !1,\n          id: ++Un\n        }, t = e.curOp, or ? or.ops.push(t) : t.ownsGroup = or = {\n          ops: [t],\n          delayedCallbacks: []\n        };\n      }\n      function $n(e) {\n        var t = e.curOp;\n        t && function (e, t) {\n          var r = e.ownsGroup;\n          if (r) try {\n            !function (e) {\n              var t = e.delayedCallbacks,\n                r = 0;\n              do {\n                for (; r < t.length; r++) t[r].call(null);\n                for (var n = 0; n < e.ops.length; n++) {\n                  var i = e.ops[n];\n                  if (i.cursorActivityHandlers) for (; i.cursorActivityCalled < i.cursorActivityHandlers.length;) i.cursorActivityHandlers[i.cursorActivityCalled++].call(null, i.cm);\n                }\n              } while (r < t.length);\n            }(r);\n          } finally {\n            or = null, t(r);\n          }\n        }(t, function (e) {\n          for (var t = 0; t < e.ops.length; t++) e.ops[t].cm.curOp = null;\n          !function (e) {\n            for (var t = e.ops, r = 0; r < t.length; r++) Xn(t[r]);\n            for (var n = 0; n < t.length; n++) qn(t[n]);\n            for (var i = 0; i < t.length; i++) Yn(t[i]);\n            for (var o = 0; o < t.length; o++) Zn(t[o]);\n            for (var l = 0; l < t.length; l++) Jn(t[l]);\n          }(e);\n        });\n      }\n      function Xn(e) {\n        var t = e.cm,\n          r = t.display;\n        !function (e) {\n          var t = e.display;\n          !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = Mr(e) + \"px\", t.sizer.style.marginBottom = -t.nativeBarWidth + \"px\", t.sizer.style.borderRightWidth = Mr(e) + \"px\", t.scrollbarsClipped = !0);\n        }(t), e.updateMaxLine && Ut(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < r.viewFrom || e.scrollToPos.to.line >= r.viewTo) || r.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new oi(t, e.mustUpdate && {\n          top: e.scrollTop,\n          ensure: e.scrollToPos\n        }, e.forceUpdate);\n      }\n      function qn(e) {\n        e.updatedDisplay = e.mustUpdate && li(e.cm, e.update);\n      }\n      function Yn(e) {\n        var t = e.cm,\n          r = t.display;\n        e.updatedDisplay && Ln(t), e.barMeasure = zn(t), r.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = Nr(t, r.maxLine, r.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(r.scroller.clientWidth, r.sizer.offsetLeft + e.adjustWidthTo + Mr(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, r.sizer.offsetLeft + e.adjustWidthTo - Lr(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = r.input.prepareSelection());\n      }\n      function Zn(e) {\n        var t = e.cm;\n        null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + \"px\", e.maxScrollLeft < t.doc.scrollLeft && Fn(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1);\n        var r = e.focus && e.focus == P();\n        e.preparedSelection && t.display.input.showSelection(e.preparedSelection, r), (e.updatedDisplay || e.startHeight != t.doc.height) && jn(t, e.barMeasure), e.updatedDisplay && ci(t, e.barMeasure), e.selectionChanged && xn(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), r && Cn(e.cm);\n      }\n      function Jn(e) {\n        var t = e.cm,\n          r = t.display,\n          n = t.doc;\n        e.updatedDisplay && ai(t, e.update), null == r.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (r.wheelStartX = r.wheelStartY = null), null != e.scrollTop && In(t, e.scrollTop, e.forceScroll), null != e.scrollLeft && Fn(t, e.scrollLeft, !0, !0), e.scrollToPos && function (e, t) {\n          if (!ve(e, \"scrollCursorIntoView\")) {\n            var r = e.display,\n              n = r.sizer.getBoundingClientRect(),\n              i = null;\n            if (t.top + n.top < 0 ? i = !0 : t.bottom + n.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1), null != i && !p) {\n              var o = N(\"div\", \"​\", null, \"position: absolute;\\n                         top: \" + (t.top - r.viewOffset - Cr(e.display)) + \"px;\\n                         height: \" + (t.bottom - t.top + Mr(e) + r.barHeight) + \"px;\\n                         left: \" + t.left + \"px; width: \" + Math.max(2, t.right - t.left) + \"px;\");\n              e.display.lineSpace.appendChild(o), o.scrollIntoView(i), e.display.lineSpace.removeChild(o);\n            }\n          }\n        }(t, function (e, t, r, n) {\n          var i;\n          null == n && (n = 0), e.options.lineWrapping || t != r || (r = \"before\" == (t = t.ch ? et(t.line, \"before\" == t.sticky ? t.ch - 1 : t.ch, \"after\") : t).sticky ? et(t.line, t.ch + 1, \"before\") : t);\n          for (var o = 0; o < 5; o++) {\n            var l = !1,\n              a = Kr(e, t),\n              s = r && r != t ? Kr(e, r) : a,\n              u = Nn(e, i = {\n                left: Math.min(a.left, s.left),\n                top: Math.min(a.top, s.top) - n,\n                right: Math.max(a.left, s.left),\n                bottom: Math.max(a.bottom, s.bottom) + n\n              }),\n              c = e.doc.scrollTop,\n              d = e.doc.scrollLeft;\n            if (null != u.scrollTop && (Wn(e, u.scrollTop), Math.abs(e.doc.scrollTop - c) > 1 && (l = !0)), null != u.scrollLeft && (Fn(e, u.scrollLeft), Math.abs(e.doc.scrollLeft - d) > 1 && (l = !0)), !l) break;\n          }\n          return i;\n        }(t, at(n, e.scrollToPos.from), at(n, e.scrollToPos.to), e.scrollToPos.margin));\n        var i = e.maybeHiddenMarkers,\n          o = e.maybeUnhiddenMarkers;\n        if (i) for (var l = 0; l < i.length; ++l) i[l].lines.length || pe(i[l], \"hide\");\n        if (o) for (var a = 0; a < o.length; ++a) o[a].lines.length && pe(o[a], \"unhide\");\n        r.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && pe(t, \"changes\", t, e.changeObjs), e.update && e.update.finish();\n      }\n      function Qn(e, t) {\n        if (e.curOp) return t();\n        Kn(e);\n        try {\n          return t();\n        } finally {\n          $n(e);\n        }\n      }\n      function ei(e, t) {\n        return function () {\n          if (e.curOp) return t.apply(e, arguments);\n          Kn(e);\n          try {\n            return t.apply(e, arguments);\n          } finally {\n            $n(e);\n          }\n        };\n      }\n      function ti(e) {\n        return function () {\n          if (this.curOp) return e.apply(this, arguments);\n          Kn(this);\n          try {\n            return e.apply(this, arguments);\n          } finally {\n            $n(this);\n          }\n        };\n      }\n      function ri(e) {\n        return function () {\n          var t = this.cm;\n          if (!t || t.curOp) return e.apply(this, arguments);\n          Kn(t);\n          try {\n            return e.apply(this, arguments);\n          } finally {\n            $n(t);\n          }\n        };\n      }\n      function ni(e, t) {\n        e.doc.highlightFrontier < e.display.viewTo && e.state.highlight.set(t, I(ii, e));\n      }\n      function ii(e) {\n        var t = e.doc;\n        if (!(t.highlightFrontier >= e.display.viewTo)) {\n          var r = +new Date() + e.options.workTime,\n            n = ht(e, t.highlightFrontier),\n            i = [];\n          t.iter(n.line, Math.min(t.first + t.size, e.display.viewTo + 500), function (o) {\n            if (n.line >= e.display.viewFrom) {\n              var l = o.styles,\n                a = o.text.length > e.options.maxHighlightLength ? Be(t.mode, n.state) : null,\n                s = dt(e, o, n, !0);\n              a && (n.state = a), o.styles = s.styles;\n              var u = o.styleClasses,\n                c = s.classes;\n              c ? o.styleClasses = c : u && (o.styleClasses = null);\n              for (var d = !l || l.length != o.styles.length || u != c && (!u || !c || u.bgClass != c.bgClass || u.textClass != c.textClass), f = 0; !d && f < l.length; ++f) d = l[f] != o.styles[f];\n              d && i.push(n.line), o.stateAfter = n.save(), n.nextLine();\n            } else o.text.length <= e.options.maxHighlightLength && pt(e, o.text, n), o.stateAfter = n.line % 5 == 0 ? n.save() : null, n.nextLine();\n            if (+new Date() > r) return ni(e, e.options.workDelay), !0;\n          }), t.highlightFrontier = n.line, t.modeFrontier = Math.max(t.modeFrontier, n.line), i.length && Qn(e, function () {\n            for (var t = 0; t < i.length; t++) fn(e, i[t], \"text\");\n          });\n        }\n      }\n      var oi = function (e, t, r) {\n        var n = e.display;\n        this.viewport = t, this.visible = On(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, this.oldDisplayWidth = Lr(e), this.force = r, this.dims = on(e), this.events = [];\n      };\n      function li(e, t) {\n        var r = e.display,\n          n = e.doc;\n        if (t.editorIsHidden) return hn(e), !1;\n        if (!t.force && t.visible.from >= r.viewFrom && t.visible.to <= r.viewTo && (null == r.updateLineNumbers || r.updateLineNumbers >= r.viewTo) && r.renderedView == r.view && 0 == vn(e)) return !1;\n        fi(e) && (hn(e), t.dims = on(e));\n        var i = n.first + n.size,\n          o = Math.max(t.visible.from - e.options.viewportMargin, n.first),\n          l = Math.min(i, t.visible.to + e.options.viewportMargin);\n        r.viewFrom < o && o - r.viewFrom < 20 && (o = Math.max(n.first, r.viewFrom)), r.viewTo > l && r.viewTo - l < 20 && (l = Math.min(i, r.viewTo)), Ct && (o = _t(e.doc, o), l = Rt(e.doc, l));\n        var a = o != r.viewFrom || l != r.viewTo || r.lastWrapHeight != t.wrapperHeight || r.lastWrapWidth != t.wrapperWidth;\n        !function (e, t, r) {\n          var n = e.display;\n          0 == n.view.length || t >= n.viewTo || r <= n.viewFrom ? (n.view = ir(e, t, r), n.viewFrom = t) : (n.viewFrom > t ? n.view = ir(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(cn(e, t))), n.viewFrom = t, n.viewTo < r ? n.view = n.view.concat(ir(e, n.viewTo, r)) : n.viewTo > r && (n.view = n.view.slice(0, cn(e, r)))), n.viewTo = r;\n        }(e, o, l), r.viewOffset = Vt(Ke(e.doc, r.viewFrom)), e.display.mover.style.top = r.viewOffset + \"px\";\n        var u = vn(e);\n        if (!a && 0 == u && !t.force && r.renderedView == r.view && (null == r.updateLineNumbers || r.updateLineNumbers >= r.viewTo)) return !1;\n        var c = function (e) {\n          if (e.hasFocus()) return null;\n          var t = P();\n          if (!t || !D(e.display.lineDiv, t)) return null;\n          var r = {\n            activeElt: t\n          };\n          if (window.getSelection) {\n            var n = window.getSelection();\n            n.anchorNode && n.extend && D(e.display.lineDiv, n.anchorNode) && (r.anchorNode = n.anchorNode, r.anchorOffset = n.anchorOffset, r.focusNode = n.focusNode, r.focusOffset = n.focusOffset);\n          }\n          return r;\n        }(e);\n        return u > 4 && (r.lineDiv.style.display = \"none\"), function (e, t, r) {\n          var n = e.display,\n            i = e.options.lineNumbers,\n            o = n.lineDiv,\n            l = o.firstChild;\n          function a(t) {\n            var r = t.nextSibling;\n            return s && y && e.display.currentWheelTarget == t ? t.style.display = \"none\" : t.parentNode.removeChild(t), r;\n          }\n          for (var u = n.view, c = n.viewFrom, d = 0; d < u.length; d++) {\n            var f = u[d];\n            if (f.hidden) ;else if (f.node && f.node.parentNode == o) {\n              for (; l != f.node;) l = a(l);\n              var h = i && null != t && t <= c && f.lineNumber;\n              f.changes && (R(f.changes, \"gutter\") > -1 && (h = !1), ur(e, f, c, r)), h && (T(f.lineNumber), f.lineNumber.appendChild(document.createTextNode(Qe(e.options, c)))), l = f.node.nextSibling;\n            } else {\n              var p = gr(e, f, c, r);\n              o.insertBefore(p, l);\n            }\n            c += f.size;\n          }\n          for (; l;) l = a(l);\n        }(e, r.updateLineNumbers, t.dims), u > 4 && (r.lineDiv.style.display = \"\"), r.renderedView = r.view, function (e) {\n          if (e && e.activeElt && e.activeElt != P() && (e.activeElt.focus(), e.anchorNode && D(document.body, e.anchorNode) && D(document.body, e.focusNode))) {\n            var t = window.getSelection(),\n              r = document.createRange();\n            r.setEnd(e.anchorNode, e.anchorOffset), r.collapse(!1), t.removeAllRanges(), t.addRange(r), t.extend(e.focusNode, e.focusOffset);\n          }\n        }(c), T(r.cursorDiv), T(r.selectionDiv), r.gutters.style.height = r.sizer.style.minHeight = 0, a && (r.lastWrapHeight = t.wrapperHeight, r.lastWrapWidth = t.wrapperWidth, ni(e, 400)), r.updateLineNumbers = null, !0;\n      }\n      function ai(e, t) {\n        for (var r = t.viewport, n = !0; (n && e.options.lineWrapping && t.oldDisplayWidth != Lr(e) || (r && null != r.top && (r = {\n          top: Math.min(e.doc.height + kr(e.display) - Tr(e), r.top)\n        }), t.visible = On(e.display, e.doc, r), !(t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo))) && li(e, t); n = !1) {\n          Ln(e);\n          var i = zn(e);\n          gn(e), jn(e, i), ci(e, i), t.force = !1;\n        }\n        t.signal(e, \"update\", e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, \"viewportChange\", e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo);\n      }\n      function si(e, t) {\n        var r = new oi(e, t);\n        if (li(e, r)) {\n          Ln(e), ai(e, r);\n          var n = zn(e);\n          gn(e), jn(e, n), ci(e, n), r.finish();\n        }\n      }\n      function ui(e) {\n        var t = e.gutters.offsetWidth;\n        e.sizer.style.marginLeft = t + \"px\";\n      }\n      function ci(e, t) {\n        e.display.sizer.style.minHeight = t.docHeight + \"px\", e.display.heightForcer.style.top = t.docHeight + \"px\", e.display.gutters.style.height = t.docHeight + e.display.barHeight + Mr(e) + \"px\";\n      }\n      function di(e) {\n        var t = e.display,\n          r = t.view;\n        if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {\n          for (var n = ln(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, o = n + \"px\", l = 0; l < r.length; l++) if (!r[l].hidden) {\n            e.options.fixedGutter && (r[l].gutter && (r[l].gutter.style.left = o), r[l].gutterBackground && (r[l].gutterBackground.style.left = o));\n            var a = r[l].alignable;\n            if (a) for (var s = 0; s < a.length; s++) a[s].style.left = o;\n          }\n          e.options.fixedGutter && (t.gutters.style.left = n + i + \"px\");\n        }\n      }\n      function fi(e) {\n        if (!e.options.lineNumbers) return !1;\n        var t = e.doc,\n          r = Qe(e.options, t.first + t.size - 1),\n          n = e.display;\n        if (r.length != n.lineNumChars) {\n          var i = n.measure.appendChild(N(\"div\", [N(\"div\", r)], \"CodeMirror-linenumber CodeMirror-gutter-elt\")),\n            o = i.firstChild.offsetWidth,\n            l = i.offsetWidth - o;\n          return n.lineGutter.style.width = \"\", n.lineNumInnerWidth = Math.max(o, n.lineGutter.offsetWidth - l) + 1, n.lineNumWidth = n.lineNumInnerWidth + l, n.lineNumChars = n.lineNumInnerWidth ? r.length : -1, n.lineGutter.style.width = n.lineNumWidth + \"px\", ui(e.display), !0;\n        }\n        return !1;\n      }\n      function hi(e, t) {\n        for (var r = [], n = !1, i = 0; i < e.length; i++) {\n          var o = e[i],\n            l = null;\n          if (\"string\" != typeof o && (l = o.style, o = o.className), \"CodeMirror-linenumbers\" == o) {\n            if (!t) continue;\n            n = !0;\n          }\n          r.push({\n            className: o,\n            style: l\n          });\n        }\n        return t && !n && r.push({\n          className: \"CodeMirror-linenumbers\",\n          style: null\n        }), r;\n      }\n      function pi(e) {\n        var t = e.gutters,\n          r = e.gutterSpecs;\n        T(t), e.lineGutter = null;\n        for (var n = 0; n < r.length; ++n) {\n          var i = r[n],\n            o = i.className,\n            l = i.style,\n            a = t.appendChild(N(\"div\", null, \"CodeMirror-gutter \" + o));\n          l && (a.style.cssText = l), \"CodeMirror-linenumbers\" == o && (e.lineGutter = a, a.style.width = (e.lineNumWidth || 1) + \"px\");\n        }\n        t.style.display = r.length ? \"\" : \"none\", ui(e);\n      }\n      function vi(e) {\n        pi(e.display), dn(e), di(e);\n      }\n      function gi(e, t, n, i) {\n        var o = this;\n        this.input = n, o.scrollbarFiller = N(\"div\", null, \"CodeMirror-scrollbar-filler\"), o.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\"), o.gutterFiller = N(\"div\", null, \"CodeMirror-gutter-filler\"), o.gutterFiller.setAttribute(\"cm-not-content\", \"true\"), o.lineDiv = A(\"div\", null, \"CodeMirror-code\"), o.selectionDiv = N(\"div\", null, null, \"position: relative; z-index: 1\"), o.cursorDiv = N(\"div\", null, \"CodeMirror-cursors\"), o.measure = N(\"div\", null, \"CodeMirror-measure\"), o.lineMeasure = N(\"div\", null, \"CodeMirror-measure\"), o.lineSpace = A(\"div\", [o.measure, o.lineMeasure, o.selectionDiv, o.cursorDiv, o.lineDiv], null, \"position: relative; outline: none\");\n        var u = A(\"div\", [o.lineSpace], \"CodeMirror-lines\");\n        o.mover = N(\"div\", [u], null, \"position: relative\"), o.sizer = N(\"div\", [o.mover], \"CodeMirror-sizer\"), o.sizerWidth = null, o.heightForcer = N(\"div\", null, null, \"position: absolute; height: 30px; width: 1px;\"), o.gutters = N(\"div\", null, \"CodeMirror-gutters\"), o.lineGutter = null, o.scroller = N(\"div\", [o.sizer, o.heightForcer, o.gutters], \"CodeMirror-scroll\"), o.scroller.setAttribute(\"tabIndex\", \"-1\"), o.wrapper = N(\"div\", [o.scrollbarFiller, o.gutterFiller, o.scroller], \"CodeMirror\"), l && a < 8 && (o.gutters.style.zIndex = -1, o.scroller.style.paddingRight = 0), s || r && m || (o.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(o.wrapper) : e(o.wrapper)), o.viewFrom = o.viewTo = t.first, o.reportedViewFrom = o.reportedViewTo = t.first, o.view = [], o.renderedView = null, o.externalMeasured = null, o.viewOffset = 0, o.lastWrapHeight = o.lastWrapWidth = 0, o.updateLineNumbers = null, o.nativeBarWidth = o.barHeight = o.barWidth = 0, o.scrollbarsClipped = !1, o.lineNumWidth = o.lineNumInnerWidth = o.lineNumChars = null, o.alignWidgets = !1, o.cachedCharWidth = o.cachedTextHeight = o.cachedPaddingH = null, o.maxLine = null, o.maxLineLength = 0, o.maxLineChanged = !1, o.wheelDX = o.wheelDY = o.wheelStartX = o.wheelStartY = null, o.shift = !1, o.selForContextMenu = null, o.activeTouch = null, o.gutterSpecs = hi(i.gutters, i.lineNumbers), pi(o), n.init(o);\n      }\n      oi.prototype.signal = function (e, t) {\n        me(e, t) && this.events.push(arguments);\n      }, oi.prototype.finish = function () {\n        for (var e = 0; e < this.events.length; e++) pe.apply(null, this.events[e]);\n      };\n      var mi = 0,\n        yi = null;\n      function bi(e) {\n        var t = e.wheelDeltaX,\n          r = e.wheelDeltaY;\n        return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == r && e.detail && e.axis == e.VERTICAL_AXIS ? r = e.detail : null == r && (r = e.wheelDelta), {\n          x: t,\n          y: r\n        };\n      }\n      function wi(e) {\n        var t = bi(e);\n        return t.x *= yi, t.y *= yi, t;\n      }\n      function xi(e, t) {\n        var n = bi(t),\n          i = n.x,\n          o = n.y,\n          l = e.display,\n          a = l.scroller,\n          u = a.scrollWidth > a.clientWidth,\n          c = a.scrollHeight > a.clientHeight;\n        if (i && u || o && c) {\n          if (o && y && s) e: for (var f = t.target, h = l.view; f != a; f = f.parentNode) for (var p = 0; p < h.length; p++) if (h[p].node == f) {\n            e.display.currentWheelTarget = f;\n            break e;\n          }\n          if (i && !r && !d && null != yi) return o && c && Wn(e, Math.max(0, a.scrollTop + o * yi)), Fn(e, Math.max(0, a.scrollLeft + i * yi)), (!o || o && c) && be(t), void (l.wheelStartX = null);\n          if (o && null != yi) {\n            var v = o * yi,\n              g = e.doc.scrollTop,\n              m = g + l.wrapper.clientHeight;\n            v < 0 ? g = Math.max(0, g + v - 50) : m = Math.min(e.doc.height, m + v + 50), si(e, {\n              top: g,\n              bottom: m\n            });\n          }\n          mi < 20 && (null == l.wheelStartX ? (l.wheelStartX = a.scrollLeft, l.wheelStartY = a.scrollTop, l.wheelDX = i, l.wheelDY = o, setTimeout(function () {\n            if (null != l.wheelStartX) {\n              var e = a.scrollLeft - l.wheelStartX,\n                t = a.scrollTop - l.wheelStartY,\n                r = t && l.wheelDY && t / l.wheelDY || e && l.wheelDX && e / l.wheelDX;\n              l.wheelStartX = l.wheelStartY = null, r && (yi = (yi * mi + r) / (mi + 1), ++mi);\n            }\n          }, 200)) : (l.wheelDX += i, l.wheelDY += o));\n        }\n      }\n      l ? yi = -.53 : r ? yi = 15 : c ? yi = -.7 : f && (yi = -1 / 3);\n      var Ci = function (e, t) {\n        this.ranges = e, this.primIndex = t;\n      };\n      Ci.prototype.primary = function () {\n        return this.ranges[this.primIndex];\n      }, Ci.prototype.equals = function (e) {\n        if (e == this) return !0;\n        if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1;\n        for (var t = 0; t < this.ranges.length; t++) {\n          var r = this.ranges[t],\n            n = e.ranges[t];\n          if (!rt(r.anchor, n.anchor) || !rt(r.head, n.head)) return !1;\n        }\n        return !0;\n      }, Ci.prototype.deepCopy = function () {\n        for (var e = [], t = 0; t < this.ranges.length; t++) e[t] = new ki(nt(this.ranges[t].anchor), nt(this.ranges[t].head));\n        return new Ci(e, this.primIndex);\n      }, Ci.prototype.somethingSelected = function () {\n        for (var e = 0; e < this.ranges.length; e++) if (!this.ranges[e].empty()) return !0;\n        return !1;\n      }, Ci.prototype.contains = function (e, t) {\n        t || (t = e);\n        for (var r = 0; r < this.ranges.length; r++) {\n          var n = this.ranges[r];\n          if (tt(t, n.from()) >= 0 && tt(e, n.to()) <= 0) return r;\n        }\n        return -1;\n      };\n      var ki = function (e, t) {\n        this.anchor = e, this.head = t;\n      };\n      function Si(e, t, r) {\n        var n = e && e.options.selectionsMayTouch,\n          i = t[r];\n        t.sort(function (e, t) {\n          return tt(e.from(), t.from());\n        }), r = R(t, i);\n        for (var o = 1; o < t.length; o++) {\n          var l = t[o],\n            a = t[o - 1],\n            s = tt(a.to(), l.from());\n          if (n && !l.empty() ? s > 0 : s >= 0) {\n            var u = ot(a.from(), l.from()),\n              c = it(a.to(), l.to()),\n              d = a.empty() ? l.from() == l.head : a.from() == a.head;\n            o <= r && --r, t.splice(--o, 2, new ki(d ? c : u, d ? u : c));\n          }\n        }\n        return new Ci(t, r);\n      }\n      function Mi(e, t) {\n        return new Ci([new ki(e, t || e)], 0);\n      }\n      function Li(e) {\n        return e.text ? et(e.from.line + e.text.length - 1, X(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to;\n      }\n      function Ti(e, t) {\n        if (tt(e, t.from) < 0) return e;\n        if (tt(e, t.to) <= 0) return Li(t);\n        var r = e.line + t.text.length - (t.to.line - t.from.line) - 1,\n          n = e.ch;\n        return e.line == t.to.line && (n += Li(t).ch - t.to.ch), et(r, n);\n      }\n      function Oi(e, t) {\n        for (var r = [], n = 0; n < e.sel.ranges.length; n++) {\n          var i = e.sel.ranges[n];\n          r.push(new ki(Ti(i.anchor, t), Ti(i.head, t)));\n        }\n        return Si(e.cm, r, e.sel.primIndex);\n      }\n      function Ni(e, t, r) {\n        return e.line == t.line ? et(r.line, e.ch - t.ch + r.ch) : et(r.line + (e.line - t.line), e.ch);\n      }\n      function Ai(e) {\n        e.doc.mode = _e(e.options, e.doc.modeOption), Di(e);\n      }\n      function Di(e) {\n        e.doc.iter(function (e) {\n          e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null);\n        }), e.doc.modeFrontier = e.doc.highlightFrontier = e.doc.first, ni(e, 100), e.state.modeGen++, e.curOp && dn(e);\n      }\n      function Pi(e, t) {\n        return 0 == t.from.ch && 0 == t.to.ch && \"\" == X(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore);\n      }\n      function Ei(e, t, r, n) {\n        function i(e) {\n          return r ? r[e] : null;\n        }\n        function o(e, r, i) {\n          !function (e, t, r, n) {\n            e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), null != e.order && (e.order = null), Ot(e), Nt(e, r);\n            var i = n ? n(e) : 1;\n            i != e.height && qe(e, i);\n          }(e, r, i, n), ar(e, \"change\", e, t);\n        }\n        function l(e, t) {\n          for (var r = [], o = e; o < t; ++o) r.push(new Kt(u[o], i(o), n));\n          return r;\n        }\n        var a = t.from,\n          s = t.to,\n          u = t.text,\n          c = Ke(e, a.line),\n          d = Ke(e, s.line),\n          f = X(u),\n          h = i(u.length - 1),\n          p = s.line - a.line;\n        if (t.full) e.insert(0, l(0, u.length)), e.remove(u.length, e.size - u.length);else if (Pi(e, t)) {\n          var v = l(0, u.length - 1);\n          o(d, d.text, h), p && e.remove(a.line, p), v.length && e.insert(a.line, v);\n        } else if (c == d) {\n          if (1 == u.length) o(c, c.text.slice(0, a.ch) + f + c.text.slice(s.ch), h);else {\n            var g = l(1, u.length - 1);\n            g.push(new Kt(f + c.text.slice(s.ch), h, n)), o(c, c.text.slice(0, a.ch) + u[0], i(0)), e.insert(a.line + 1, g);\n          }\n        } else if (1 == u.length) o(c, c.text.slice(0, a.ch) + u[0] + d.text.slice(s.ch), i(0)), e.remove(a.line + 1, p);else {\n          o(c, c.text.slice(0, a.ch) + u[0], i(0)), o(d, f + d.text.slice(s.ch), h);\n          var m = l(1, u.length - 1);\n          p > 1 && e.remove(a.line + 1, p - 1), e.insert(a.line + 1, m);\n        }\n        ar(e, \"change\", e, t);\n      }\n      function Hi(e, t, r) {\n        !function e(n, i, o) {\n          if (n.linked) for (var l = 0; l < n.linked.length; ++l) {\n            var a = n.linked[l];\n            if (a.doc != i) {\n              var s = o && a.sharedHist;\n              r && !s || (t(a.doc, s), e(a.doc, n, s));\n            }\n          }\n        }(e, null, !0);\n      }\n      function Wi(e, t) {\n        if (t.cm) throw new Error(\"This document is already in use.\");\n        e.doc = t, t.cm = e, sn(e), Ai(e), Ii(e), e.options.lineWrapping || Ut(e), e.options.mode = t.modeOption, dn(e);\n      }\n      function Ii(e) {\n        (\"rtl\" == e.doc.direction ? E : L)(e.display.lineDiv, \"CodeMirror-rtl\");\n      }\n      function Fi(e) {\n        this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1;\n      }\n      function zi(e, t) {\n        var r = {\n          from: nt(t.from),\n          to: Li(t),\n          text: $e(e, t.from, t.to)\n        };\n        return Vi(e, r, t.from.line, t.to.line + 1), Hi(e, function (e) {\n          return Vi(e, r, t.from.line, t.to.line + 1);\n        }, !0), r;\n      }\n      function _i(e) {\n        for (; e.length && X(e).ranges;) e.pop();\n      }\n      function Ri(e, t, r, n) {\n        var i = e.history;\n        i.undone.length = 0;\n        var o,\n          l,\n          a = +new Date();\n        if ((i.lastOp == n || i.lastOrigin == t.origin && t.origin && (\"+\" == t.origin.charAt(0) && i.lastModTime > a - (e.cm ? e.cm.options.historyEventDelay : 500) || \"*\" == t.origin.charAt(0))) && (o = function (e, t) {\n          return t ? (_i(e.done), X(e.done)) : e.done.length && !X(e.done).ranges ? X(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), X(e.done)) : void 0;\n        }(i, i.lastOp == n))) l = X(o.changes), 0 == tt(t.from, t.to) && 0 == tt(t.from, l.to) ? l.to = Li(t) : o.changes.push(zi(e, t));else {\n          var s = X(i.done);\n          for (s && s.ranges || Bi(e.sel, i.done), o = {\n            changes: [zi(e, t)],\n            generation: i.generation\n          }, i.done.push(o); i.done.length > i.undoDepth;) i.done.shift(), i.done[0].ranges || i.done.shift();\n        }\n        i.done.push(r), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = a, i.lastOp = i.lastSelOp = n, i.lastOrigin = i.lastSelOrigin = t.origin, l || pe(e, \"historyAdded\");\n      }\n      function ji(e, t, r, n) {\n        var i = e.history,\n          o = n && n.origin;\n        r == i.lastSelOp || o && i.lastSelOrigin == o && (i.lastModTime == i.lastSelTime && i.lastOrigin == o || function (e, t, r, n) {\n          var i = t.charAt(0);\n          return \"*\" == i || \"+\" == i && r.ranges.length == n.ranges.length && r.somethingSelected() == n.somethingSelected() && new Date() - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500);\n        }(e, o, X(i.done), t)) ? i.done[i.done.length - 1] = t : Bi(t, i.done), i.lastSelTime = +new Date(), i.lastSelOrigin = o, i.lastSelOp = r, n && !1 !== n.clearRedo && _i(i.undone);\n      }\n      function Bi(e, t) {\n        var r = X(t);\n        r && r.ranges && r.equals(e) || t.push(e);\n      }\n      function Vi(e, t, r, n) {\n        var i = t[\"spans_\" + e.id],\n          o = 0;\n        e.iter(Math.max(e.first, r), Math.min(e.first + e.size, n), function (r) {\n          r.markedSpans && ((i || (i = t[\"spans_\" + e.id] = {}))[o] = r.markedSpans), ++o;\n        });\n      }\n      function Gi(e) {\n        if (!e) return null;\n        for (var t, r = 0; r < e.length; ++r) e[r].marker.explicitlyCleared ? t || (t = e.slice(0, r)) : t && t.push(e[r]);\n        return t ? t.length ? t : null : e;\n      }\n      function Ui(e, t) {\n        var r = function (e, t) {\n            var r = t[\"spans_\" + e.id];\n            if (!r) return null;\n            for (var n = [], i = 0; i < t.text.length; ++i) n.push(Gi(r[i]));\n            return n;\n          }(e, t),\n          n = Lt(e, t);\n        if (!r) return n;\n        if (!n) return r;\n        for (var i = 0; i < r.length; ++i) {\n          var o = r[i],\n            l = n[i];\n          if (o && l) e: for (var a = 0; a < l.length; ++a) {\n            for (var s = l[a], u = 0; u < o.length; ++u) if (o[u].marker == s.marker) continue e;\n            o.push(s);\n          } else l && (r[i] = l);\n        }\n        return r;\n      }\n      function Ki(e, t, r) {\n        for (var n = [], i = 0; i < e.length; ++i) {\n          var o = e[i];\n          if (o.ranges) n.push(r ? Ci.prototype.deepCopy.call(o) : o);else {\n            var l = o.changes,\n              a = [];\n            n.push({\n              changes: a\n            });\n            for (var s = 0; s < l.length; ++s) {\n              var u = l[s],\n                c = void 0;\n              if (a.push({\n                from: u.from,\n                to: u.to,\n                text: u.text\n              }), t) for (var d in u) (c = d.match(/^spans_(\\d+)$/)) && R(t, Number(c[1])) > -1 && (X(a)[d] = u[d], delete u[d]);\n            }\n          }\n        }\n        return n;\n      }\n      function $i(e, t, r, n) {\n        if (n) {\n          var i = e.anchor;\n          if (r) {\n            var o = tt(t, i) < 0;\n            o != tt(r, i) < 0 ? (i = t, t = r) : o != tt(t, r) < 0 && (t = r);\n          }\n          return new ki(i, t);\n        }\n        return new ki(r || t, t);\n      }\n      function Xi(e, t, r, n, i) {\n        null == i && (i = e.cm && (e.cm.display.shift || e.extend)), Qi(e, new Ci([$i(e.sel.primary(), t, r, i)], 0), n);\n      }\n      function qi(e, t, r) {\n        for (var n = [], i = e.cm && (e.cm.display.shift || e.extend), o = 0; o < e.sel.ranges.length; o++) n[o] = $i(e.sel.ranges[o], t[o], null, i);\n        Qi(e, Si(e.cm, n, e.sel.primIndex), r);\n      }\n      function Yi(e, t, r, n) {\n        var i = e.sel.ranges.slice(0);\n        i[t] = r, Qi(e, Si(e.cm, i, e.sel.primIndex), n);\n      }\n      function Zi(e, t, r, n) {\n        Qi(e, Mi(t, r), n);\n      }\n      function Ji(e, t, r) {\n        var n = e.history.done,\n          i = X(n);\n        i && i.ranges ? (n[n.length - 1] = t, eo(e, t, r)) : Qi(e, t, r);\n      }\n      function Qi(e, t, r) {\n        eo(e, t, r), ji(e, e.sel, e.cm ? e.cm.curOp.id : NaN, r);\n      }\n      function eo(e, t, r) {\n        (me(e, \"beforeSelectionChange\") || e.cm && me(e.cm, \"beforeSelectionChange\")) && (t = function (e, t, r) {\n          var n = {\n            ranges: t.ranges,\n            update: function (t) {\n              this.ranges = [];\n              for (var r = 0; r < t.length; r++) this.ranges[r] = new ki(at(e, t[r].anchor), at(e, t[r].head));\n            },\n            origin: r && r.origin\n          };\n          return pe(e, \"beforeSelectionChange\", e, n), e.cm && pe(e.cm, \"beforeSelectionChange\", e.cm, n), n.ranges != t.ranges ? Si(e.cm, n.ranges, n.ranges.length - 1) : t;\n        }(e, t, r));\n        var n = r && r.bias || (tt(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);\n        to(e, no(e, t, n, !0)), r && !1 === r.scroll || !e.cm || Dn(e.cm);\n      }\n      function to(e, t) {\n        t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = 1, e.cm.curOp.selectionChanged = !0, ge(e.cm)), ar(e, \"cursorActivity\", e));\n      }\n      function ro(e) {\n        to(e, no(e, e.sel, null, !1));\n      }\n      function no(e, t, r, n) {\n        for (var i, o = 0; o < t.ranges.length; o++) {\n          var l = t.ranges[o],\n            a = t.ranges.length == e.sel.ranges.length && e.sel.ranges[o],\n            s = oo(e, l.anchor, a && a.anchor, r, n),\n            u = oo(e, l.head, a && a.head, r, n);\n          (i || s != l.anchor || u != l.head) && (i || (i = t.ranges.slice(0, o)), i[o] = new ki(s, u));\n        }\n        return i ? Si(e.cm, i, t.primIndex) : t;\n      }\n      function io(e, t, r, n, i) {\n        var o = Ke(e, t.line);\n        if (o.markedSpans) for (var l = 0; l < o.markedSpans.length; ++l) {\n          var a = o.markedSpans[l],\n            s = a.marker,\n            u = \"selectLeft\" in s ? !s.selectLeft : s.inclusiveLeft,\n            c = \"selectRight\" in s ? !s.selectRight : s.inclusiveRight;\n          if ((null == a.from || (u ? a.from <= t.ch : a.from < t.ch)) && (null == a.to || (c ? a.to >= t.ch : a.to > t.ch))) {\n            if (i && (pe(s, \"beforeCursorEnter\"), s.explicitlyCleared)) {\n              if (o.markedSpans) {\n                --l;\n                continue;\n              }\n              break;\n            }\n            if (!s.atomic) continue;\n            if (r) {\n              var d = s.find(n < 0 ? 1 : -1),\n                f = void 0;\n              if ((n < 0 ? c : u) && (d = lo(e, d, -n, d && d.line == t.line ? o : null)), d && d.line == t.line && (f = tt(d, r)) && (n < 0 ? f < 0 : f > 0)) return io(e, d, t, n, i);\n            }\n            var h = s.find(n < 0 ? -1 : 1);\n            return (n < 0 ? u : c) && (h = lo(e, h, n, h.line == t.line ? o : null)), h ? io(e, h, t, n, i) : null;\n          }\n        }\n        return t;\n      }\n      function oo(e, t, r, n, i) {\n        var o = n || 1,\n          l = io(e, t, r, o, i) || !i && io(e, t, r, o, !0) || io(e, t, r, -o, i) || !i && io(e, t, r, -o, !0);\n        return l || (e.cantEdit = !0, et(e.first, 0));\n      }\n      function lo(e, t, r, n) {\n        return r < 0 && 0 == t.ch ? t.line > e.first ? at(e, et(t.line - 1)) : null : r > 0 && t.ch == (n || Ke(e, t.line)).text.length ? t.line < e.first + e.size - 1 ? et(t.line + 1, 0) : null : new et(t.line, t.ch + r);\n      }\n      function ao(e) {\n        e.setSelection(et(e.firstLine(), 0), et(e.lastLine()), B);\n      }\n      function so(e, t, r) {\n        var n = {\n          canceled: !1,\n          from: t.from,\n          to: t.to,\n          text: t.text,\n          origin: t.origin,\n          cancel: function () {\n            return n.canceled = !0;\n          }\n        };\n        return r && (n.update = function (t, r, i, o) {\n          t && (n.from = at(e, t)), r && (n.to = at(e, r)), i && (n.text = i), void 0 !== o && (n.origin = o);\n        }), pe(e, \"beforeChange\", e, n), e.cm && pe(e.cm, \"beforeChange\", e.cm, n), n.canceled ? (e.cm && (e.cm.curOp.updateInput = 2), null) : {\n          from: n.from,\n          to: n.to,\n          text: n.text,\n          origin: n.origin\n        };\n      }\n      function uo(e, t, r) {\n        if (e.cm) {\n          if (!e.cm.curOp) return ei(e.cm, uo)(e, t, r);\n          if (e.cm.state.suppressEdits) return;\n        }\n        if (!(me(e, \"beforeChange\") || e.cm && me(e.cm, \"beforeChange\")) || (t = so(e, t, !0))) {\n          var n = xt && !r && function (e, t, r) {\n            var n = null;\n            if (e.iter(t.line, r.line + 1, function (e) {\n              if (e.markedSpans) for (var t = 0; t < e.markedSpans.length; ++t) {\n                var r = e.markedSpans[t].marker;\n                !r.readOnly || n && -1 != R(n, r) || (n || (n = [])).push(r);\n              }\n            }), !n) return null;\n            for (var i = [{\n                from: t,\n                to: r\n              }], o = 0; o < n.length; ++o) for (var l = n[o], a = l.find(0), s = 0; s < i.length; ++s) {\n              var u = i[s];\n              if (!(tt(u.to, a.from) < 0 || tt(u.from, a.to) > 0)) {\n                var c = [s, 1],\n                  d = tt(u.from, a.from),\n                  f = tt(u.to, a.to);\n                (d < 0 || !l.inclusiveLeft && !d) && c.push({\n                  from: u.from,\n                  to: a.from\n                }), (f > 0 || !l.inclusiveRight && !f) && c.push({\n                  from: a.to,\n                  to: u.to\n                }), i.splice.apply(i, c), s += c.length - 3;\n              }\n            }\n            return i;\n          }(e, t.from, t.to);\n          if (n) for (var i = n.length - 1; i >= 0; --i) co(e, {\n            from: n[i].from,\n            to: n[i].to,\n            text: i ? [\"\"] : t.text,\n            origin: t.origin\n          });else co(e, t);\n        }\n      }\n      function co(e, t) {\n        if (1 != t.text.length || \"\" != t.text[0] || 0 != tt(t.from, t.to)) {\n          var r = Oi(e, t);\n          Ri(e, t, r, e.cm ? e.cm.curOp.id : NaN), po(e, t, r, Lt(e, t));\n          var n = [];\n          Hi(e, function (e, r) {\n            r || -1 != R(n, e.history) || (yo(e.history, t), n.push(e.history)), po(e, t, null, Lt(e, t));\n          });\n        }\n      }\n      function fo(e, t, r) {\n        var n = e.cm && e.cm.state.suppressEdits;\n        if (!n || r) {\n          for (var i, o = e.history, l = e.sel, a = \"undo\" == t ? o.done : o.undone, s = \"undo\" == t ? o.undone : o.done, u = 0; u < a.length && (i = a[u], r ? !i.ranges || i.equals(e.sel) : i.ranges); u++);\n          if (u != a.length) {\n            for (o.lastOrigin = o.lastSelOrigin = null;;) {\n              if (!(i = a.pop()).ranges) {\n                if (n) return void a.push(i);\n                break;\n              }\n              if (Bi(i, s), r && !i.equals(e.sel)) return void Qi(e, i, {\n                clearRedo: !1\n              });\n              l = i;\n            }\n            var c = [];\n            Bi(l, s), s.push({\n              changes: c,\n              generation: o.generation\n            }), o.generation = i.generation || ++o.maxGeneration;\n            for (var d = me(e, \"beforeChange\") || e.cm && me(e.cm, \"beforeChange\"), f = function (r) {\n                var n = i.changes[r];\n                if (n.origin = t, d && !so(e, n, !1)) return a.length = 0, {};\n                c.push(zi(e, n));\n                var o = r ? Oi(e, n) : X(a);\n                po(e, n, o, Ui(e, n)), !r && e.cm && e.cm.scrollIntoView({\n                  from: n.from,\n                  to: Li(n)\n                });\n                var l = [];\n                Hi(e, function (e, t) {\n                  t || -1 != R(l, e.history) || (yo(e.history, n), l.push(e.history)), po(e, n, null, Ui(e, n));\n                });\n              }, h = i.changes.length - 1; h >= 0; --h) {\n              var p = f(h);\n              if (p) return p.v;\n            }\n          }\n        }\n      }\n      function ho(e, t) {\n        if (0 != t && (e.first += t, e.sel = new Ci(q(e.sel.ranges, function (e) {\n          return new ki(et(e.anchor.line + t, e.anchor.ch), et(e.head.line + t, e.head.ch));\n        }), e.sel.primIndex), e.cm)) {\n          dn(e.cm, e.first, e.first - t, t);\n          for (var r = e.cm.display, n = r.viewFrom; n < r.viewTo; n++) fn(e.cm, n, \"gutter\");\n        }\n      }\n      function po(e, t, r, n) {\n        if (e.cm && !e.cm.curOp) return ei(e.cm, po)(e, t, r, n);\n        if (t.to.line < e.first) ho(e, t.text.length - 1 - (t.to.line - t.from.line));else if (!(t.from.line > e.lastLine())) {\n          if (t.from.line < e.first) {\n            var i = t.text.length - 1 - (e.first - t.from.line);\n            ho(e, i), t = {\n              from: et(e.first, 0),\n              to: et(t.to.line + i, t.to.ch),\n              text: [X(t.text)],\n              origin: t.origin\n            };\n          }\n          var o = e.lastLine();\n          t.to.line > o && (t = {\n            from: t.from,\n            to: et(o, Ke(e, o).text.length),\n            text: [t.text[0]],\n            origin: t.origin\n          }), t.removed = $e(e, t.from, t.to), r || (r = Oi(e, t)), e.cm ? function (e, t, r) {\n            var n = e.doc,\n              i = e.display,\n              o = t.from,\n              l = t.to,\n              a = !1,\n              s = o.line;\n            e.options.lineWrapping || (s = Ye(zt(Ke(n, o.line))), n.iter(s, l.line + 1, function (e) {\n              if (e == i.maxLine) return a = !0, !0;\n            })), n.sel.contains(t.from, t.to) > -1 && ge(e), Ei(n, t, r, an(e)), e.options.lineWrapping || (n.iter(s, o.line + t.text.length, function (e) {\n              var t = Gt(e);\n              t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, a = !1);\n            }), a && (e.curOp.updateMaxLine = !0)), function (e, t) {\n              if (e.modeFrontier = Math.min(e.modeFrontier, t), !(e.highlightFrontier < t - 10)) {\n                for (var r = e.first, n = t - 1; n > r; n--) {\n                  var i = Ke(e, n).stateAfter;\n                  if (i && (!(i instanceof ut) || n + i.lookAhead < t)) {\n                    r = n + 1;\n                    break;\n                  }\n                }\n                e.highlightFrontier = Math.min(e.highlightFrontier, r);\n              }\n            }(n, o.line), ni(e, 400);\n            var u = t.text.length - (l.line - o.line) - 1;\n            t.full ? dn(e) : o.line != l.line || 1 != t.text.length || Pi(e.doc, t) ? dn(e, o.line, l.line + 1, u) : fn(e, o.line, \"text\");\n            var c = me(e, \"changes\"),\n              d = me(e, \"change\");\n            if (d || c) {\n              var f = {\n                from: o,\n                to: l,\n                text: t.text,\n                removed: t.removed,\n                origin: t.origin\n              };\n              d && ar(e, \"change\", e, f), c && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(f);\n            }\n            e.display.selForContextMenu = null;\n          }(e.cm, t, n) : Ei(e, t, n), eo(e, r, B), e.cantEdit && oo(e, et(e.firstLine(), 0)) && (e.cantEdit = !1);\n        }\n      }\n      function vo(e, t, r, n, i) {\n        var o;\n        n || (n = r), tt(n, r) < 0 && (r = (o = [n, r])[0], n = o[1]), \"string\" == typeof t && (t = e.splitLines(t)), uo(e, {\n          from: r,\n          to: n,\n          text: t,\n          origin: i\n        });\n      }\n      function go(e, t, r, n) {\n        r < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0);\n      }\n      function mo(e, t, r, n) {\n        for (var i = 0; i < e.length; ++i) {\n          var o = e[i],\n            l = !0;\n          if (o.ranges) {\n            o.copied || ((o = e[i] = o.deepCopy()).copied = !0);\n            for (var a = 0; a < o.ranges.length; a++) go(o.ranges[a].anchor, t, r, n), go(o.ranges[a].head, t, r, n);\n          } else {\n            for (var s = 0; s < o.changes.length; ++s) {\n              var u = o.changes[s];\n              if (r < u.from.line) u.from = et(u.from.line + n, u.from.ch), u.to = et(u.to.line + n, u.to.ch);else if (t <= u.to.line) {\n                l = !1;\n                break;\n              }\n            }\n            l || (e.splice(0, i + 1), i = 0);\n          }\n        }\n      }\n      function yo(e, t) {\n        var r = t.from.line,\n          n = t.to.line,\n          i = t.text.length - (n - r) - 1;\n        mo(e.done, r, n, i), mo(e.undone, r, n, i);\n      }\n      function bo(e, t, r, n) {\n        var i = t,\n          o = t;\n        return \"number\" == typeof t ? o = Ke(e, lt(e, t)) : i = Ye(t), null == i ? null : (n(o, i) && e.cm && fn(e.cm, i, r), o);\n      }\n      function wo(e) {\n        this.lines = e, this.parent = null;\n        for (var t = 0, r = 0; r < e.length; ++r) e[r].parent = this, t += e[r].height;\n        this.height = t;\n      }\n      function xo(e) {\n        this.children = e;\n        for (var t = 0, r = 0, n = 0; n < e.length; ++n) {\n          var i = e[n];\n          t += i.chunkSize(), r += i.height, i.parent = this;\n        }\n        this.size = t, this.height = r, this.parent = null;\n      }\n      ki.prototype.from = function () {\n        return ot(this.anchor, this.head);\n      }, ki.prototype.to = function () {\n        return it(this.anchor, this.head);\n      }, ki.prototype.empty = function () {\n        return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n      }, wo.prototype = {\n        chunkSize: function () {\n          return this.lines.length;\n        },\n        removeInner: function (e, t) {\n          for (var r = e, n = e + t; r < n; ++r) {\n            var i = this.lines[r];\n            this.height -= i.height, $t(i), ar(i, \"delete\");\n          }\n          this.lines.splice(e, t);\n        },\n        collapse: function (e) {\n          e.push.apply(e, this.lines);\n        },\n        insertInner: function (e, t, r) {\n          this.height += r, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));\n          for (var n = 0; n < t.length; ++n) t[n].parent = this;\n        },\n        iterN: function (e, t, r) {\n          for (var n = e + t; e < n; ++e) if (r(this.lines[e])) return !0;\n        }\n      }, xo.prototype = {\n        chunkSize: function () {\n          return this.size;\n        },\n        removeInner: function (e, t) {\n          this.size -= t;\n          for (var r = 0; r < this.children.length; ++r) {\n            var n = this.children[r],\n              i = n.chunkSize();\n            if (e < i) {\n              var o = Math.min(t, i - e),\n                l = n.height;\n              if (n.removeInner(e, o), this.height -= l - n.height, i == o && (this.children.splice(r--, 1), n.parent = null), 0 == (t -= o)) break;\n              e = 0;\n            } else e -= i;\n          }\n          if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof wo))) {\n            var a = [];\n            this.collapse(a), this.children = [new wo(a)], this.children[0].parent = this;\n          }\n        },\n        collapse: function (e) {\n          for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e);\n        },\n        insertInner: function (e, t, r) {\n          this.size += t.length, this.height += r;\n          for (var n = 0; n < this.children.length; ++n) {\n            var i = this.children[n],\n              o = i.chunkSize();\n            if (e <= o) {\n              if (i.insertInner(e, t, r), i.lines && i.lines.length > 50) {\n                for (var l = i.lines.length % 25 + 25, a = l; a < i.lines.length;) {\n                  var s = new wo(i.lines.slice(a, a += 25));\n                  i.height -= s.height, this.children.splice(++n, 0, s), s.parent = this;\n                }\n                i.lines = i.lines.slice(0, l), this.maybeSpill();\n              }\n              break;\n            }\n            e -= o;\n          }\n        },\n        maybeSpill: function () {\n          if (!(this.children.length <= 10)) {\n            var e = this;\n            do {\n              var t = new xo(e.children.splice(e.children.length - 5, 5));\n              if (e.parent) {\n                e.size -= t.size, e.height -= t.height;\n                var r = R(e.parent.children, e);\n                e.parent.children.splice(r + 1, 0, t);\n              } else {\n                var n = new xo(e.children);\n                n.parent = e, e.children = [n, t], e = n;\n              }\n              t.parent = e.parent;\n            } while (e.children.length > 10);\n            e.parent.maybeSpill();\n          }\n        },\n        iterN: function (e, t, r) {\n          for (var n = 0; n < this.children.length; ++n) {\n            var i = this.children[n],\n              o = i.chunkSize();\n            if (e < o) {\n              var l = Math.min(t, o - e);\n              if (i.iterN(e, l, r)) return !0;\n              if (0 == (t -= l)) break;\n              e = 0;\n            } else e -= o;\n          }\n        }\n      };\n      var Co = function (e, t, r) {\n        if (r) for (var n in r) r.hasOwnProperty(n) && (this[n] = r[n]);\n        this.doc = e, this.node = t;\n      };\n      function ko(e, t, r) {\n        Vt(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && An(e, r);\n      }\n      Co.prototype.clear = function () {\n        var e = this.doc.cm,\n          t = this.line.widgets,\n          r = this.line,\n          n = Ye(r);\n        if (null != n && t) {\n          for (var i = 0; i < t.length; ++i) t[i] == this && t.splice(i--, 1);\n          t.length || (r.widgets = null);\n          var o = wr(this);\n          qe(r, Math.max(0, r.height - o)), e && (Qn(e, function () {\n            ko(e, r, -o), fn(e, n, \"widget\");\n          }), ar(e, \"lineWidgetCleared\", e, this, n));\n        }\n      }, Co.prototype.changed = function () {\n        var e = this,\n          t = this.height,\n          r = this.doc.cm,\n          n = this.line;\n        this.height = null;\n        var i = wr(this) - t;\n        i && (jt(this.doc, n) || qe(n, n.height + i), r && Qn(r, function () {\n          r.curOp.forceUpdate = !0, ko(r, n, i), ar(r, \"lineWidgetChanged\", r, e, Ye(n));\n        }));\n      }, ye(Co);\n      var So = 0,\n        Mo = function (e, t) {\n          this.lines = [], this.type = t, this.doc = e, this.id = ++So;\n        };\n      function Lo(e, t, r, n, i) {\n        if (n && n.shared) return function (e, t, r, n, i) {\n          (n = F(n)).shared = !1;\n          var o = [Lo(e, t, r, n, i)],\n            l = o[0],\n            a = n.widgetNode;\n          return Hi(e, function (e) {\n            a && (n.widgetNode = a.cloneNode(!0)), o.push(Lo(e, at(e, t), at(e, r), n, i));\n            for (var s = 0; s < e.linked.length; ++s) if (e.linked[s].isParent) return;\n            l = X(o);\n          }), new To(o, l);\n        }(e, t, r, n, i);\n        if (e.cm && !e.cm.curOp) return ei(e.cm, Lo)(e, t, r, n, i);\n        var o = new Mo(e, i),\n          l = tt(t, r);\n        if (n && F(n, o, !1), l > 0 || 0 == l && !1 !== o.clearWhenEmpty) return o;\n        if (o.replacedWith && (o.collapsed = !0, o.widgetNode = A(\"span\", [o.replacedWith], \"CodeMirror-widget\"), n.handleMouseEvents || o.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"), n.insertLeft && (o.widgetNode.insertLeft = !0)), o.collapsed) {\n          if (Ft(e, t.line, t, r, o) || t.line != r.line && Ft(e, r.line, t, r, o)) throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n          Ct = !0;\n        }\n        o.addToHistory && Ri(e, {\n          from: t,\n          to: r,\n          origin: \"markText\"\n        }, e.sel, NaN);\n        var a,\n          s = t.line,\n          u = e.cm;\n        if (e.iter(s, r.line + 1, function (e) {\n          u && o.collapsed && !u.options.lineWrapping && zt(e) == u.display.maxLine && (a = !0), o.collapsed && s != t.line && qe(e, 0), function (e, t) {\n            e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e);\n          }(e, new kt(o, s == t.line ? t.ch : null, s == r.line ? r.ch : null)), ++s;\n        }), o.collapsed && e.iter(t.line, r.line + 1, function (t) {\n          jt(e, t) && qe(t, 0);\n        }), o.clearOnEnter && de(o, \"beforeCursorEnter\", function () {\n          return o.clear();\n        }), o.readOnly && (xt = !0, (e.history.done.length || e.history.undone.length) && e.clearHistory()), o.collapsed && (o.id = ++So, o.atomic = !0), u) {\n          if (a && (u.curOp.updateMaxLine = !0), o.collapsed) dn(u, t.line, r.line + 1);else if (o.className || o.startStyle || o.endStyle || o.css || o.attributes || o.title) for (var c = t.line; c <= r.line; c++) fn(u, c, \"text\");\n          o.atomic && ro(u.doc), ar(u, \"markerAdded\", u, o);\n        }\n        return o;\n      }\n      Mo.prototype.clear = function () {\n        if (!this.explicitlyCleared) {\n          var e = this.doc.cm,\n            t = e && !e.curOp;\n          if (t && Kn(e), me(this, \"clear\")) {\n            var r = this.find();\n            r && ar(this, \"clear\", r.from, r.to);\n          }\n          for (var n = null, i = null, o = 0; o < this.lines.length; ++o) {\n            var l = this.lines[o],\n              a = St(l.markedSpans, this);\n            e && !this.collapsed ? fn(e, Ye(l), \"text\") : e && (null != a.to && (i = Ye(l)), null != a.from && (n = Ye(l))), l.markedSpans = Mt(l.markedSpans, a), null == a.from && this.collapsed && !jt(this.doc, l) && e && qe(l, rn(e.display));\n          }\n          if (e && this.collapsed && !e.options.lineWrapping) for (var s = 0; s < this.lines.length; ++s) {\n            var u = zt(this.lines[s]),\n              c = Gt(u);\n            c > e.display.maxLineLength && (e.display.maxLine = u, e.display.maxLineLength = c, e.display.maxLineChanged = !0);\n          }\n          null != n && e && this.collapsed && dn(e, n, i + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, e && ro(e.doc)), e && ar(e, \"markerCleared\", e, this, n, i), t && $n(e), this.parent && this.parent.clear();\n        }\n      }, Mo.prototype.find = function (e, t) {\n        var r, n;\n        null == e && \"bookmark\" == this.type && (e = 1);\n        for (var i = 0; i < this.lines.length; ++i) {\n          var o = this.lines[i],\n            l = St(o.markedSpans, this);\n          if (null != l.from && (r = et(t ? o : Ye(o), l.from), -1 == e)) return r;\n          if (null != l.to && (n = et(t ? o : Ye(o), l.to), 1 == e)) return n;\n        }\n        return r && {\n          from: r,\n          to: n\n        };\n      }, Mo.prototype.changed = function () {\n        var e = this,\n          t = this.find(-1, !0),\n          r = this,\n          n = this.doc.cm;\n        t && n && Qn(n, function () {\n          var i = t.line,\n            o = Ye(t.line),\n            l = Ar(n, o);\n          if (l && (Fr(l), n.curOp.selectionChanged = n.curOp.forceUpdate = !0), n.curOp.updateMaxLine = !0, !jt(r.doc, i) && null != r.height) {\n            var a = r.height;\n            r.height = null;\n            var s = wr(r) - a;\n            s && qe(i, i.height + s);\n          }\n          ar(n, \"markerChanged\", n, e);\n        });\n      }, Mo.prototype.attachLine = function (e) {\n        if (!this.lines.length && this.doc.cm) {\n          var t = this.doc.cm.curOp;\n          t.maybeHiddenMarkers && -1 != R(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this);\n        }\n        this.lines.push(e);\n      }, Mo.prototype.detachLine = function (e) {\n        if (this.lines.splice(R(this.lines, e), 1), !this.lines.length && this.doc.cm) {\n          var t = this.doc.cm.curOp;\n          (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this);\n        }\n      }, ye(Mo);\n      var To = function (e, t) {\n        this.markers = e, this.primary = t;\n        for (var r = 0; r < e.length; ++r) e[r].parent = this;\n      };\n      function Oo(e) {\n        return e.findMarks(et(e.first, 0), e.clipPos(et(e.lastLine())), function (e) {\n          return e.parent;\n        });\n      }\n      function No(e) {\n        for (var t = function (t) {\n            var r = e[t],\n              n = [r.primary.doc];\n            Hi(r.primary.doc, function (e) {\n              return n.push(e);\n            });\n            for (var i = 0; i < r.markers.length; i++) {\n              var o = r.markers[i];\n              -1 == R(n, o.doc) && (o.parent = null, r.markers.splice(i--, 1));\n            }\n          }, r = 0; r < e.length; r++) t(r);\n      }\n      To.prototype.clear = function () {\n        if (!this.explicitlyCleared) {\n          this.explicitlyCleared = !0;\n          for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();\n          ar(this, \"clear\");\n        }\n      }, To.prototype.find = function (e, t) {\n        return this.primary.find(e, t);\n      }, ye(To);\n      var Ao = 0,\n        Do = function (e, t, r, n, i) {\n          if (!(this instanceof Do)) return new Do(e, t, r, n, i);\n          null == r && (r = 0), xo.call(this, [new wo([new Kt(\"\", null)])]), this.first = r, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.modeFrontier = this.highlightFrontier = r;\n          var o = et(r, 0);\n          this.sel = Mi(o), this.history = new Fi(null), this.id = ++Ao, this.modeOption = t, this.lineSep = n, this.direction = \"rtl\" == i ? \"rtl\" : \"ltr\", this.extend = !1, \"string\" == typeof e && (e = this.splitLines(e)), Ei(this, {\n            from: o,\n            to: o,\n            text: e\n          }), Qi(this, Mi(o), B);\n        };\n      Do.prototype = Z(xo.prototype, {\n        constructor: Do,\n        iter: function (e, t, r) {\n          r ? this.iterN(e - this.first, t - e, r) : this.iterN(this.first, this.first + this.size, e);\n        },\n        insert: function (e, t) {\n          for (var r = 0, n = 0; n < t.length; ++n) r += t[n].height;\n          this.insertInner(e - this.first, t, r);\n        },\n        remove: function (e, t) {\n          this.removeInner(e - this.first, t);\n        },\n        getValue: function (e) {\n          var t = Xe(this, this.first, this.first + this.size);\n          return !1 === e ? t : t.join(e || this.lineSeparator());\n        },\n        setValue: ri(function (e) {\n          var t = et(this.first, 0),\n            r = this.first + this.size - 1;\n          uo(this, {\n            from: t,\n            to: et(r, Ke(this, r).text.length),\n            text: this.splitLines(e),\n            origin: \"setValue\",\n            full: !0\n          }, !0), this.cm && Pn(this.cm, 0, 0), Qi(this, Mi(t), B);\n        }),\n        replaceRange: function (e, t, r, n) {\n          vo(this, e, t = at(this, t), r = r ? at(this, r) : t, n);\n        },\n        getRange: function (e, t, r) {\n          var n = $e(this, at(this, e), at(this, t));\n          return !1 === r ? n : n.join(r || this.lineSeparator());\n        },\n        getLine: function (e) {\n          var t = this.getLineHandle(e);\n          return t && t.text;\n        },\n        getLineHandle: function (e) {\n          if (Je(this, e)) return Ke(this, e);\n        },\n        getLineNumber: function (e) {\n          return Ye(e);\n        },\n        getLineHandleVisualStart: function (e) {\n          return \"number\" == typeof e && (e = Ke(this, e)), zt(e);\n        },\n        lineCount: function () {\n          return this.size;\n        },\n        firstLine: function () {\n          return this.first;\n        },\n        lastLine: function () {\n          return this.first + this.size - 1;\n        },\n        clipPos: function (e) {\n          return at(this, e);\n        },\n        getCursor: function (e) {\n          var t = this.sel.primary();\n          return null == e || \"head\" == e ? t.head : \"anchor\" == e ? t.anchor : \"end\" == e || \"to\" == e || !1 === e ? t.to() : t.from();\n        },\n        listSelections: function () {\n          return this.sel.ranges;\n        },\n        somethingSelected: function () {\n          return this.sel.somethingSelected();\n        },\n        setCursor: ri(function (e, t, r) {\n          Zi(this, at(this, \"number\" == typeof e ? et(e, t || 0) : e), null, r);\n        }),\n        setSelection: ri(function (e, t, r) {\n          Zi(this, at(this, e), at(this, t || e), r);\n        }),\n        extendSelection: ri(function (e, t, r) {\n          Xi(this, at(this, e), t && at(this, t), r);\n        }),\n        extendSelections: ri(function (e, t) {\n          qi(this, st(this, e), t);\n        }),\n        extendSelectionsBy: ri(function (e, t) {\n          qi(this, st(this, q(this.sel.ranges, e)), t);\n        }),\n        setSelections: ri(function (e, t, r) {\n          if (e.length) {\n            for (var n = [], i = 0; i < e.length; i++) n[i] = new ki(at(this, e[i].anchor), at(this, e[i].head));\n            null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), Qi(this, Si(this.cm, n, t), r);\n          }\n        }),\n        addSelection: ri(function (e, t, r) {\n          var n = this.sel.ranges.slice(0);\n          n.push(new ki(at(this, e), at(this, t || e))), Qi(this, Si(this.cm, n, n.length - 1), r);\n        }),\n        getSelection: function (e) {\n          for (var t, r = this.sel.ranges, n = 0; n < r.length; n++) {\n            var i = $e(this, r[n].from(), r[n].to());\n            t = t ? t.concat(i) : i;\n          }\n          return !1 === e ? t : t.join(e || this.lineSeparator());\n        },\n        getSelections: function (e) {\n          for (var t = [], r = this.sel.ranges, n = 0; n < r.length; n++) {\n            var i = $e(this, r[n].from(), r[n].to());\n            !1 !== e && (i = i.join(e || this.lineSeparator())), t[n] = i;\n          }\n          return t;\n        },\n        replaceSelection: function (e, t, r) {\n          for (var n = [], i = 0; i < this.sel.ranges.length; i++) n[i] = e;\n          this.replaceSelections(n, t, r || \"+input\");\n        },\n        replaceSelections: ri(function (e, t, r) {\n          for (var n = [], i = this.sel, o = 0; o < i.ranges.length; o++) {\n            var l = i.ranges[o];\n            n[o] = {\n              from: l.from(),\n              to: l.to(),\n              text: this.splitLines(e[o]),\n              origin: r\n            };\n          }\n          for (var a = t && \"end\" != t && function (e, t, r) {\n              for (var n = [], i = et(e.first, 0), o = i, l = 0; l < t.length; l++) {\n                var a = t[l],\n                  s = Ni(a.from, i, o),\n                  u = Ni(Li(a), i, o);\n                if (i = a.to, o = u, \"around\" == r) {\n                  var c = e.sel.ranges[l],\n                    d = tt(c.head, c.anchor) < 0;\n                  n[l] = new ki(d ? u : s, d ? s : u);\n                } else n[l] = new ki(s, s);\n              }\n              return new Ci(n, e.sel.primIndex);\n            }(this, n, t), s = n.length - 1; s >= 0; s--) uo(this, n[s]);\n          a ? Ji(this, a) : this.cm && Dn(this.cm);\n        }),\n        undo: ri(function () {\n          fo(this, \"undo\");\n        }),\n        redo: ri(function () {\n          fo(this, \"redo\");\n        }),\n        undoSelection: ri(function () {\n          fo(this, \"undo\", !0);\n        }),\n        redoSelection: ri(function () {\n          fo(this, \"redo\", !0);\n        }),\n        setExtending: function (e) {\n          this.extend = e;\n        },\n        getExtending: function () {\n          return this.extend;\n        },\n        historySize: function () {\n          for (var e = this.history, t = 0, r = 0, n = 0; n < e.done.length; n++) e.done[n].ranges || ++t;\n          for (var i = 0; i < e.undone.length; i++) e.undone[i].ranges || ++r;\n          return {\n            undo: t,\n            redo: r\n          };\n        },\n        clearHistory: function () {\n          this.history = new Fi(this.history.maxGeneration);\n        },\n        markClean: function () {\n          this.cleanGeneration = this.changeGeneration(!0);\n        },\n        changeGeneration: function (e) {\n          return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation;\n        },\n        isClean: function (e) {\n          return this.history.generation == (e || this.cleanGeneration);\n        },\n        getHistory: function () {\n          return {\n            done: Ki(this.history.done),\n            undone: Ki(this.history.undone)\n          };\n        },\n        setHistory: function (e) {\n          var t = this.history = new Fi(this.history.maxGeneration);\n          t.done = Ki(e.done.slice(0), null, !0), t.undone = Ki(e.undone.slice(0), null, !0);\n        },\n        setGutterMarker: ri(function (e, t, r) {\n          return bo(this, e, \"gutter\", function (e) {\n            var n = e.gutterMarkers || (e.gutterMarkers = {});\n            return n[t] = r, !r && te(n) && (e.gutterMarkers = null), !0;\n          });\n        }),\n        clearGutter: ri(function (e) {\n          var t = this;\n          this.iter(function (r) {\n            r.gutterMarkers && r.gutterMarkers[e] && bo(t, r, \"gutter\", function () {\n              return r.gutterMarkers[e] = null, te(r.gutterMarkers) && (r.gutterMarkers = null), !0;\n            });\n          });\n        }),\n        lineInfo: function (e) {\n          var t;\n          if (\"number\" == typeof e) {\n            if (!Je(this, e)) return null;\n            if (t = e, !(e = Ke(this, e))) return null;\n          } else if (null == (t = Ye(e))) return null;\n          return {\n            line: t,\n            handle: e,\n            text: e.text,\n            gutterMarkers: e.gutterMarkers,\n            textClass: e.textClass,\n            bgClass: e.bgClass,\n            wrapClass: e.wrapClass,\n            widgets: e.widgets\n          };\n        },\n        addLineClass: ri(function (e, t, r) {\n          return bo(this, e, \"gutter\" == t ? \"gutter\" : \"class\", function (e) {\n            var n = \"text\" == t ? \"textClass\" : \"background\" == t ? \"bgClass\" : \"gutter\" == t ? \"gutterClass\" : \"wrapClass\";\n            if (e[n]) {\n              if (S(r).test(e[n])) return !1;\n              e[n] += \" \" + r;\n            } else e[n] = r;\n            return !0;\n          });\n        }),\n        removeLineClass: ri(function (e, t, r) {\n          return bo(this, e, \"gutter\" == t ? \"gutter\" : \"class\", function (e) {\n            var n = \"text\" == t ? \"textClass\" : \"background\" == t ? \"bgClass\" : \"gutter\" == t ? \"gutterClass\" : \"wrapClass\",\n              i = e[n];\n            if (!i) return !1;\n            if (null == r) e[n] = null;else {\n              var o = i.match(S(r));\n              if (!o) return !1;\n              var l = o.index + o[0].length;\n              e[n] = i.slice(0, o.index) + (o.index && l != i.length ? \" \" : \"\") + i.slice(l) || null;\n            }\n            return !0;\n          });\n        }),\n        addLineWidget: ri(function (e, t, r) {\n          return function (e, t, r, n) {\n            var i = new Co(e, r, n),\n              o = e.cm;\n            return o && i.noHScroll && (o.display.alignWidgets = !0), bo(e, t, \"widget\", function (t) {\n              var r = t.widgets || (t.widgets = []);\n              if (null == i.insertAt ? r.push(i) : r.splice(Math.min(r.length - 1, Math.max(0, i.insertAt)), 0, i), i.line = t, o && !jt(e, t)) {\n                var n = Vt(t) < e.scrollTop;\n                qe(t, t.height + wr(i)), n && An(o, i.height), o.curOp.forceUpdate = !0;\n              }\n              return !0;\n            }), o && ar(o, \"lineWidgetAdded\", o, i, \"number\" == typeof t ? t : Ye(t)), i;\n          }(this, e, t, r);\n        }),\n        removeLineWidget: function (e) {\n          e.clear();\n        },\n        markText: function (e, t, r) {\n          return Lo(this, at(this, e), at(this, t), r, r && r.type || \"range\");\n        },\n        setBookmark: function (e, t) {\n          var r = {\n            replacedWith: t && (null == t.nodeType ? t.widget : t),\n            insertLeft: t && t.insertLeft,\n            clearWhenEmpty: !1,\n            shared: t && t.shared,\n            handleMouseEvents: t && t.handleMouseEvents\n          };\n          return Lo(this, e = at(this, e), e, r, \"bookmark\");\n        },\n        findMarksAt: function (e) {\n          var t = [],\n            r = Ke(this, (e = at(this, e)).line).markedSpans;\n          if (r) for (var n = 0; n < r.length; ++n) {\n            var i = r[n];\n            (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker);\n          }\n          return t;\n        },\n        findMarks: function (e, t, r) {\n          e = at(this, e), t = at(this, t);\n          var n = [],\n            i = e.line;\n          return this.iter(e.line, t.line + 1, function (o) {\n            var l = o.markedSpans;\n            if (l) for (var a = 0; a < l.length; a++) {\n              var s = l[a];\n              null != s.to && i == e.line && e.ch >= s.to || null == s.from && i != e.line || null != s.from && i == t.line && s.from >= t.ch || r && !r(s.marker) || n.push(s.marker.parent || s.marker);\n            }\n            ++i;\n          }), n;\n        },\n        getAllMarks: function () {\n          var e = [];\n          return this.iter(function (t) {\n            var r = t.markedSpans;\n            if (r) for (var n = 0; n < r.length; ++n) null != r[n].from && e.push(r[n].marker);\n          }), e;\n        },\n        posFromIndex: function (e) {\n          var t,\n            r = this.first,\n            n = this.lineSeparator().length;\n          return this.iter(function (i) {\n            var o = i.text.length + n;\n            if (o > e) return t = e, !0;\n            e -= o, ++r;\n          }), at(this, et(r, t));\n        },\n        indexFromPos: function (e) {\n          var t = (e = at(this, e)).ch;\n          if (e.line < this.first || e.ch < 0) return 0;\n          var r = this.lineSeparator().length;\n          return this.iter(this.first, e.line, function (e) {\n            t += e.text.length + r;\n          }), t;\n        },\n        copy: function (e) {\n          var t = new Do(Xe(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n          return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t;\n        },\n        linkedDoc: function (e) {\n          e || (e = {});\n          var t = this.first,\n            r = this.first + this.size;\n          null != e.from && e.from > t && (t = e.from), null != e.to && e.to < r && (r = e.to);\n          var n = new Do(Xe(this, t, r), e.mode || this.modeOption, t, this.lineSep, this.direction);\n          return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({\n            doc: n,\n            sharedHist: e.sharedHist\n          }), n.linked = [{\n            doc: this,\n            isParent: !0,\n            sharedHist: e.sharedHist\n          }], function (e, t) {\n            for (var r = 0; r < t.length; r++) {\n              var n = t[r],\n                i = n.find(),\n                o = e.clipPos(i.from),\n                l = e.clipPos(i.to);\n              if (tt(o, l)) {\n                var a = Lo(e, o, l, n.primary, n.primary.type);\n                n.markers.push(a), a.parent = n;\n              }\n            }\n          }(n, Oo(this)), n;\n        },\n        unlinkDoc: function (e) {\n          if (e instanceof Tl && (e = e.doc), this.linked) for (var t = 0; t < this.linked.length; ++t) if (this.linked[t].doc == e) {\n            this.linked.splice(t, 1), e.unlinkDoc(this), No(Oo(this));\n            break;\n          }\n          if (e.history == this.history) {\n            var r = [e.id];\n            Hi(e, function (e) {\n              return r.push(e.id);\n            }, !0), e.history = new Fi(null), e.history.done = Ki(this.history.done, r), e.history.undone = Ki(this.history.undone, r);\n          }\n        },\n        iterLinkedDocs: function (e) {\n          Hi(this, e);\n        },\n        getMode: function () {\n          return this.mode;\n        },\n        getEditor: function () {\n          return this.cm;\n        },\n        splitLines: function (e) {\n          return this.lineSep ? e.split(this.lineSep) : De(e);\n        },\n        lineSeparator: function () {\n          return this.lineSep || \"\\n\";\n        },\n        setDirection: ri(function (e) {\n          var t;\n          \"rtl\" != e && (e = \"ltr\"), e != this.direction && (this.direction = e, this.iter(function (e) {\n            return e.order = null;\n          }), this.cm && Qn(t = this.cm, function () {\n            Ii(t), dn(t);\n          }));\n        })\n      }), Do.prototype.eachLine = Do.prototype.iter;\n      var Po = 0;\n      function Eo(e) {\n        var t = this;\n        if (Ho(t), !ve(t, e) && !xr(t.display, e)) {\n          be(e), l && (Po = +new Date());\n          var r = un(t, e, !0),\n            n = e.dataTransfer.files;\n          if (r && !t.isReadOnly()) if (n && n.length && window.FileReader && window.File) for (var i = n.length, o = Array(i), a = 0, s = function (e, n) {\n              if (!t.options.allowDropFileTypes || -1 != R(t.options.allowDropFileTypes, e.type)) {\n                var l = new FileReader();\n                l.onload = ei(t, function () {\n                  var e = l.result;\n                  if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(e) && (e = \"\"), o[n] = e, ++a == i) {\n                    var s = {\n                      from: r = at(t.doc, r),\n                      to: r,\n                      text: t.doc.splitLines(o.join(t.doc.lineSeparator())),\n                      origin: \"paste\"\n                    };\n                    uo(t.doc, s), Ji(t.doc, Mi(r, Li(s)));\n                  }\n                }), l.readAsText(e);\n              }\n            }, u = 0; u < i; ++u) s(n[u], u);else {\n            if (t.state.draggingText && t.doc.sel.contains(r) > -1) return t.state.draggingText(e), void setTimeout(function () {\n              return t.display.input.focus();\n            }, 20);\n            try {\n              var c = e.dataTransfer.getData(\"Text\");\n              if (c) {\n                var d;\n                if (t.state.draggingText && !t.state.draggingText.copy && (d = t.listSelections()), eo(t.doc, Mi(r, r)), d) for (var f = 0; f < d.length; ++f) vo(t.doc, \"\", d[f].anchor, d[f].head, \"drag\");\n                t.replaceSelection(c, \"around\", \"paste\"), t.display.input.focus();\n              }\n            } catch (e) {}\n          }\n        }\n      }\n      function Ho(e) {\n        e.display.dragCursor && (e.display.lineSpace.removeChild(e.display.dragCursor), e.display.dragCursor = null);\n      }\n      function Wo(e) {\n        if (document.getElementsByClassName) {\n          for (var t = document.getElementsByClassName(\"CodeMirror\"), r = [], n = 0; n < t.length; n++) {\n            var i = t[n].CodeMirror;\n            i && r.push(i);\n          }\n          r.length && r[0].operation(function () {\n            for (var t = 0; t < r.length; t++) e(r[t]);\n          });\n        }\n      }\n      var Io = !1;\n      function Fo() {\n        var e;\n        Io || (de(window, \"resize\", function () {\n          null == e && (e = setTimeout(function () {\n            e = null, Wo(zo);\n          }, 100));\n        }), de(window, \"blur\", function () {\n          return Wo(Mn);\n        }), Io = !0);\n      }\n      function zo(e) {\n        var t = e.display;\n        t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize();\n      }\n      for (var _o = {\n          3: \"Pause\",\n          8: \"Backspace\",\n          9: \"Tab\",\n          13: \"Enter\",\n          16: \"Shift\",\n          17: \"Ctrl\",\n          18: \"Alt\",\n          19: \"Pause\",\n          20: \"CapsLock\",\n          27: \"Esc\",\n          32: \"Space\",\n          33: \"PageUp\",\n          34: \"PageDown\",\n          35: \"End\",\n          36: \"Home\",\n          37: \"Left\",\n          38: \"Up\",\n          39: \"Right\",\n          40: \"Down\",\n          44: \"PrintScrn\",\n          45: \"Insert\",\n          46: \"Delete\",\n          59: \";\",\n          61: \"=\",\n          91: \"Mod\",\n          92: \"Mod\",\n          93: \"Mod\",\n          106: \"*\",\n          107: \"=\",\n          109: \"-\",\n          110: \".\",\n          111: \"/\",\n          145: \"ScrollLock\",\n          173: \"-\",\n          186: \";\",\n          187: \"=\",\n          188: \",\",\n          189: \"-\",\n          190: \".\",\n          191: \"/\",\n          192: \"`\",\n          219: \"[\",\n          220: \"\\\\\",\n          221: \"]\",\n          222: \"'\",\n          63232: \"Up\",\n          63233: \"Down\",\n          63234: \"Left\",\n          63235: \"Right\",\n          63272: \"Delete\",\n          63273: \"Home\",\n          63275: \"End\",\n          63276: \"PageUp\",\n          63277: \"PageDown\",\n          63302: \"Insert\"\n        }, Ro = 0; Ro < 10; Ro++) _o[Ro + 48] = _o[Ro + 96] = String(Ro);\n      for (var jo = 65; jo <= 90; jo++) _o[jo] = String.fromCharCode(jo);\n      for (var Bo = 1; Bo <= 12; Bo++) _o[Bo + 111] = _o[Bo + 63235] = \"F\" + Bo;\n      var Vo = {};\n      function Go(e) {\n        var t,\n          r,\n          n,\n          i,\n          o = e.split(/-(?!$)/);\n        e = o[o.length - 1];\n        for (var l = 0; l < o.length - 1; l++) {\n          var a = o[l];\n          if (/^(cmd|meta|m)$/i.test(a)) i = !0;else if (/^a(lt)?$/i.test(a)) t = !0;else if (/^(c|ctrl|control)$/i.test(a)) r = !0;else {\n            if (!/^s(hift)?$/i.test(a)) throw new Error(\"Unrecognized modifier name: \" + a);\n            n = !0;\n          }\n        }\n        return t && (e = \"Alt-\" + e), r && (e = \"Ctrl-\" + e), i && (e = \"Cmd-\" + e), n && (e = \"Shift-\" + e), e;\n      }\n      function Uo(e) {\n        var t = {};\n        for (var r in e) if (e.hasOwnProperty(r)) {\n          var n = e[r];\n          if (/^(name|fallthrough|(de|at)tach)$/.test(r)) continue;\n          if (\"...\" == n) {\n            delete e[r];\n            continue;\n          }\n          for (var i = q(r.split(\" \"), Go), o = 0; o < i.length; o++) {\n            var l = void 0,\n              a = void 0;\n            o == i.length - 1 ? (a = i.join(\" \"), l = n) : (a = i.slice(0, o + 1).join(\" \"), l = \"...\");\n            var s = t[a];\n            if (s) {\n              if (s != l) throw new Error(\"Inconsistent bindings for \" + a);\n            } else t[a] = l;\n          }\n          delete e[r];\n        }\n        for (var u in t) e[u] = t[u];\n        return e;\n      }\n      function Ko(e, t, r, n) {\n        var i = (t = Yo(t)).call ? t.call(e, n) : t[e];\n        if (!1 === i) return \"nothing\";\n        if (\"...\" === i) return \"multi\";\n        if (null != i && r(i)) return \"handled\";\n        if (t.fallthrough) {\n          if (\"[object Array]\" != Object.prototype.toString.call(t.fallthrough)) return Ko(e, t.fallthrough, r, n);\n          for (var o = 0; o < t.fallthrough.length; o++) {\n            var l = Ko(e, t.fallthrough[o], r, n);\n            if (l) return l;\n          }\n        }\n      }\n      function $o(e) {\n        var t = \"string\" == typeof e ? e : _o[e.keyCode];\n        return \"Ctrl\" == t || \"Alt\" == t || \"Shift\" == t || \"Mod\" == t;\n      }\n      function Xo(e, t, r) {\n        var n = e;\n        return t.altKey && \"Alt\" != n && (e = \"Alt-\" + e), (C ? t.metaKey : t.ctrlKey) && \"Ctrl\" != n && (e = \"Ctrl-\" + e), (C ? t.ctrlKey : t.metaKey) && \"Cmd\" != n && (e = \"Cmd-\" + e), !r && t.shiftKey && \"Shift\" != n && (e = \"Shift-\" + e), e;\n      }\n      function qo(e, t) {\n        if (d && 34 == e.keyCode && e.char) return !1;\n        var r = _o[e.keyCode];\n        return null != r && !e.altGraphKey && (3 == e.keyCode && e.code && (r = e.code), Xo(r, e, t));\n      }\n      function Yo(e) {\n        return \"string\" == typeof e ? Vo[e] : e;\n      }\n      function Zo(e, t) {\n        for (var r = e.doc.sel.ranges, n = [], i = 0; i < r.length; i++) {\n          for (var o = t(r[i]); n.length && tt(o.from, X(n).to) <= 0;) {\n            var l = n.pop();\n            if (tt(l.from, o.from) < 0) {\n              o.from = l.from;\n              break;\n            }\n          }\n          n.push(o);\n        }\n        Qn(e, function () {\n          for (var t = n.length - 1; t >= 0; t--) vo(e.doc, \"\", n[t].from, n[t].to, \"+delete\");\n          Dn(e);\n        });\n      }\n      function Jo(e, t, r) {\n        var n = ie(e.text, t + r, r);\n        return n < 0 || n > e.text.length ? null : n;\n      }\n      function Qo(e, t, r) {\n        var n = Jo(e, t.ch, r);\n        return null == n ? null : new et(t.line, n, r < 0 ? \"after\" : \"before\");\n      }\n      function el(e, t, r, n, i) {\n        if (e) {\n          var o = ue(r, t.doc.direction);\n          if (o) {\n            var l,\n              a = i < 0 ? X(o) : o[0],\n              s = i < 0 == (1 == a.level) ? \"after\" : \"before\";\n            if (a.level > 0 || \"rtl\" == t.doc.direction) {\n              var u = Dr(t, r);\n              l = i < 0 ? r.text.length - 1 : 0;\n              var c = Pr(t, u, l).top;\n              l = oe(function (e) {\n                return Pr(t, u, e).top == c;\n              }, i < 0 == (1 == a.level) ? a.from : a.to - 1, l), \"before\" == s && (l = Jo(r, l, 1));\n            } else l = i < 0 ? a.to : a.from;\n            return new et(n, l, s);\n          }\n        }\n        return new et(n, i < 0 ? r.text.length : 0, i < 0 ? \"before\" : \"after\");\n      }\n      Vo.basic = {\n        Left: \"goCharLeft\",\n        Right: \"goCharRight\",\n        Up: \"goLineUp\",\n        Down: \"goLineDown\",\n        End: \"goLineEnd\",\n        Home: \"goLineStartSmart\",\n        PageUp: \"goPageUp\",\n        PageDown: \"goPageDown\",\n        Delete: \"delCharAfter\",\n        Backspace: \"delCharBefore\",\n        \"Shift-Backspace\": \"delCharBefore\",\n        Tab: \"defaultTab\",\n        \"Shift-Tab\": \"indentAuto\",\n        Enter: \"newlineAndIndent\",\n        Insert: \"toggleOverwrite\",\n        Esc: \"singleSelection\"\n      }, Vo.pcDefault = {\n        \"Ctrl-A\": \"selectAll\",\n        \"Ctrl-D\": \"deleteLine\",\n        \"Ctrl-Z\": \"undo\",\n        \"Shift-Ctrl-Z\": \"redo\",\n        \"Ctrl-Y\": \"redo\",\n        \"Ctrl-Home\": \"goDocStart\",\n        \"Ctrl-End\": \"goDocEnd\",\n        \"Ctrl-Up\": \"goLineUp\",\n        \"Ctrl-Down\": \"goLineDown\",\n        \"Ctrl-Left\": \"goGroupLeft\",\n        \"Ctrl-Right\": \"goGroupRight\",\n        \"Alt-Left\": \"goLineStart\",\n        \"Alt-Right\": \"goLineEnd\",\n        \"Ctrl-Backspace\": \"delGroupBefore\",\n        \"Ctrl-Delete\": \"delGroupAfter\",\n        \"Ctrl-S\": \"save\",\n        \"Ctrl-F\": \"find\",\n        \"Ctrl-G\": \"findNext\",\n        \"Shift-Ctrl-G\": \"findPrev\",\n        \"Shift-Ctrl-F\": \"replace\",\n        \"Shift-Ctrl-R\": \"replaceAll\",\n        \"Ctrl-[\": \"indentLess\",\n        \"Ctrl-]\": \"indentMore\",\n        \"Ctrl-U\": \"undoSelection\",\n        \"Shift-Ctrl-U\": \"redoSelection\",\n        \"Alt-U\": \"redoSelection\",\n        fallthrough: \"basic\"\n      }, Vo.emacsy = {\n        \"Ctrl-F\": \"goCharRight\",\n        \"Ctrl-B\": \"goCharLeft\",\n        \"Ctrl-P\": \"goLineUp\",\n        \"Ctrl-N\": \"goLineDown\",\n        \"Alt-F\": \"goWordRight\",\n        \"Alt-B\": \"goWordLeft\",\n        \"Ctrl-A\": \"goLineStart\",\n        \"Ctrl-E\": \"goLineEnd\",\n        \"Ctrl-V\": \"goPageDown\",\n        \"Shift-Ctrl-V\": \"goPageUp\",\n        \"Ctrl-D\": \"delCharAfter\",\n        \"Ctrl-H\": \"delCharBefore\",\n        \"Alt-D\": \"delWordAfter\",\n        \"Alt-Backspace\": \"delWordBefore\",\n        \"Ctrl-K\": \"killLine\",\n        \"Ctrl-T\": \"transposeChars\",\n        \"Ctrl-O\": \"openLine\"\n      }, Vo.macDefault = {\n        \"Cmd-A\": \"selectAll\",\n        \"Cmd-D\": \"deleteLine\",\n        \"Cmd-Z\": \"undo\",\n        \"Shift-Cmd-Z\": \"redo\",\n        \"Cmd-Y\": \"redo\",\n        \"Cmd-Home\": \"goDocStart\",\n        \"Cmd-Up\": \"goDocStart\",\n        \"Cmd-End\": \"goDocEnd\",\n        \"Cmd-Down\": \"goDocEnd\",\n        \"Alt-Left\": \"goGroupLeft\",\n        \"Alt-Right\": \"goGroupRight\",\n        \"Cmd-Left\": \"goLineLeft\",\n        \"Cmd-Right\": \"goLineRight\",\n        \"Alt-Backspace\": \"delGroupBefore\",\n        \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n        \"Alt-Delete\": \"delGroupAfter\",\n        \"Cmd-S\": \"save\",\n        \"Cmd-F\": \"find\",\n        \"Cmd-G\": \"findNext\",\n        \"Shift-Cmd-G\": \"findPrev\",\n        \"Cmd-Alt-F\": \"replace\",\n        \"Shift-Cmd-Alt-F\": \"replaceAll\",\n        \"Cmd-[\": \"indentLess\",\n        \"Cmd-]\": \"indentMore\",\n        \"Cmd-Backspace\": \"delWrappedLineLeft\",\n        \"Cmd-Delete\": \"delWrappedLineRight\",\n        \"Cmd-U\": \"undoSelection\",\n        \"Shift-Cmd-U\": \"redoSelection\",\n        \"Ctrl-Up\": \"goDocStart\",\n        \"Ctrl-Down\": \"goDocEnd\",\n        fallthrough: [\"basic\", \"emacsy\"]\n      }, Vo.default = y ? Vo.macDefault : Vo.pcDefault;\n      var tl = {\n        selectAll: ao,\n        singleSelection: function (e) {\n          return e.setSelection(e.getCursor(\"anchor\"), e.getCursor(\"head\"), B);\n        },\n        killLine: function (e) {\n          return Zo(e, function (t) {\n            if (t.empty()) {\n              var r = Ke(e.doc, t.head.line).text.length;\n              return t.head.ch == r && t.head.line < e.lastLine() ? {\n                from: t.head,\n                to: et(t.head.line + 1, 0)\n              } : {\n                from: t.head,\n                to: et(t.head.line, r)\n              };\n            }\n            return {\n              from: t.from(),\n              to: t.to()\n            };\n          });\n        },\n        deleteLine: function (e) {\n          return Zo(e, function (t) {\n            return {\n              from: et(t.from().line, 0),\n              to: at(e.doc, et(t.to().line + 1, 0))\n            };\n          });\n        },\n        delLineLeft: function (e) {\n          return Zo(e, function (e) {\n            return {\n              from: et(e.from().line, 0),\n              to: e.from()\n            };\n          });\n        },\n        delWrappedLineLeft: function (e) {\n          return Zo(e, function (t) {\n            var r = e.charCoords(t.head, \"div\").top + 5;\n            return {\n              from: e.coordsChar({\n                left: 0,\n                top: r\n              }, \"div\"),\n              to: t.from()\n            };\n          });\n        },\n        delWrappedLineRight: function (e) {\n          return Zo(e, function (t) {\n            var r = e.charCoords(t.head, \"div\").top + 5,\n              n = e.coordsChar({\n                left: e.display.lineDiv.offsetWidth + 100,\n                top: r\n              }, \"div\");\n            return {\n              from: t.from(),\n              to: n\n            };\n          });\n        },\n        undo: function (e) {\n          return e.undo();\n        },\n        redo: function (e) {\n          return e.redo();\n        },\n        undoSelection: function (e) {\n          return e.undoSelection();\n        },\n        redoSelection: function (e) {\n          return e.redoSelection();\n        },\n        goDocStart: function (e) {\n          return e.extendSelection(et(e.firstLine(), 0));\n        },\n        goDocEnd: function (e) {\n          return e.extendSelection(et(e.lastLine()));\n        },\n        goLineStart: function (e) {\n          return e.extendSelectionsBy(function (t) {\n            return rl(e, t.head.line);\n          }, {\n            origin: \"+move\",\n            bias: 1\n          });\n        },\n        goLineStartSmart: function (e) {\n          return e.extendSelectionsBy(function (t) {\n            return nl(e, t.head);\n          }, {\n            origin: \"+move\",\n            bias: 1\n          });\n        },\n        goLineEnd: function (e) {\n          return e.extendSelectionsBy(function (t) {\n            return function (e, t) {\n              var r = Ke(e.doc, t),\n                n = function (e) {\n                  for (var t; t = Wt(e);) e = t.find(1, !0).line;\n                  return e;\n                }(r);\n              return n != r && (t = Ye(n)), el(!0, e, r, t, -1);\n            }(e, t.head.line);\n          }, {\n            origin: \"+move\",\n            bias: -1\n          });\n        },\n        goLineRight: function (e) {\n          return e.extendSelectionsBy(function (t) {\n            var r = e.cursorCoords(t.head, \"div\").top + 5;\n            return e.coordsChar({\n              left: e.display.lineDiv.offsetWidth + 100,\n              top: r\n            }, \"div\");\n          }, G);\n        },\n        goLineLeft: function (e) {\n          return e.extendSelectionsBy(function (t) {\n            var r = e.cursorCoords(t.head, \"div\").top + 5;\n            return e.coordsChar({\n              left: 0,\n              top: r\n            }, \"div\");\n          }, G);\n        },\n        goLineLeftSmart: function (e) {\n          return e.extendSelectionsBy(function (t) {\n            var r = e.cursorCoords(t.head, \"div\").top + 5,\n              n = e.coordsChar({\n                left: 0,\n                top: r\n              }, \"div\");\n            return n.ch < e.getLine(n.line).search(/\\S/) ? nl(e, t.head) : n;\n          }, G);\n        },\n        goLineUp: function (e) {\n          return e.moveV(-1, \"line\");\n        },\n        goLineDown: function (e) {\n          return e.moveV(1, \"line\");\n        },\n        goPageUp: function (e) {\n          return e.moveV(-1, \"page\");\n        },\n        goPageDown: function (e) {\n          return e.moveV(1, \"page\");\n        },\n        goCharLeft: function (e) {\n          return e.moveH(-1, \"char\");\n        },\n        goCharRight: function (e) {\n          return e.moveH(1, \"char\");\n        },\n        goColumnLeft: function (e) {\n          return e.moveH(-1, \"column\");\n        },\n        goColumnRight: function (e) {\n          return e.moveH(1, \"column\");\n        },\n        goWordLeft: function (e) {\n          return e.moveH(-1, \"word\");\n        },\n        goGroupRight: function (e) {\n          return e.moveH(1, \"group\");\n        },\n        goGroupLeft: function (e) {\n          return e.moveH(-1, \"group\");\n        },\n        goWordRight: function (e) {\n          return e.moveH(1, \"word\");\n        },\n        delCharBefore: function (e) {\n          return e.deleteH(-1, \"char\");\n        },\n        delCharAfter: function (e) {\n          return e.deleteH(1, \"char\");\n        },\n        delWordBefore: function (e) {\n          return e.deleteH(-1, \"word\");\n        },\n        delWordAfter: function (e) {\n          return e.deleteH(1, \"word\");\n        },\n        delGroupBefore: function (e) {\n          return e.deleteH(-1, \"group\");\n        },\n        delGroupAfter: function (e) {\n          return e.deleteH(1, \"group\");\n        },\n        indentAuto: function (e) {\n          return e.indentSelection(\"smart\");\n        },\n        indentMore: function (e) {\n          return e.indentSelection(\"add\");\n        },\n        indentLess: function (e) {\n          return e.indentSelection(\"subtract\");\n        },\n        insertTab: function (e) {\n          return e.replaceSelection(\"\\t\");\n        },\n        insertSoftTab: function (e) {\n          for (var t = [], r = e.listSelections(), n = e.options.tabSize, i = 0; i < r.length; i++) {\n            var o = r[i].from(),\n              l = z(e.getLine(o.line), o.ch, n);\n            t.push($(n - l % n));\n          }\n          e.replaceSelections(t);\n        },\n        defaultTab: function (e) {\n          e.somethingSelected() ? e.indentSelection(\"add\") : e.execCommand(\"insertTab\");\n        },\n        transposeChars: function (e) {\n          return Qn(e, function () {\n            for (var t = e.listSelections(), r = [], n = 0; n < t.length; n++) if (t[n].empty()) {\n              var i = t[n].head,\n                o = Ke(e.doc, i.line).text;\n              if (o) if (i.ch == o.length && (i = new et(i.line, i.ch - 1)), i.ch > 0) i = new et(i.line, i.ch + 1), e.replaceRange(o.charAt(i.ch - 1) + o.charAt(i.ch - 2), et(i.line, i.ch - 2), i, \"+transpose\");else if (i.line > e.doc.first) {\n                var l = Ke(e.doc, i.line - 1).text;\n                l && (i = new et(i.line, 1), e.replaceRange(o.charAt(0) + e.doc.lineSeparator() + l.charAt(l.length - 1), et(i.line - 1, l.length - 1), i, \"+transpose\"));\n              }\n              r.push(new ki(i, i));\n            }\n            e.setSelections(r);\n          });\n        },\n        newlineAndIndent: function (e) {\n          return Qn(e, function () {\n            for (var t = e.listSelections(), r = t.length - 1; r >= 0; r--) e.replaceRange(e.doc.lineSeparator(), t[r].anchor, t[r].head, \"+input\");\n            t = e.listSelections();\n            for (var n = 0; n < t.length; n++) e.indentLine(t[n].from().line, null, !0);\n            Dn(e);\n          });\n        },\n        openLine: function (e) {\n          return e.replaceSelection(\"\\n\", \"start\");\n        },\n        toggleOverwrite: function (e) {\n          return e.toggleOverwrite();\n        }\n      };\n      function rl(e, t) {\n        var r = Ke(e.doc, t),\n          n = zt(r);\n        return n != r && (t = Ye(n)), el(!0, e, n, t, 1);\n      }\n      function nl(e, t) {\n        var r = rl(e, t.line),\n          n = Ke(e.doc, r.line),\n          i = ue(n, e.doc.direction);\n        if (!i || 0 == i[0].level) {\n          var o = Math.max(0, n.text.search(/\\S/)),\n            l = t.line == r.line && t.ch <= o && t.ch;\n          return et(r.line, l ? 0 : o, r.sticky);\n        }\n        return r;\n      }\n      function il(e, t, r) {\n        if (\"string\" == typeof t && !(t = tl[t])) return !1;\n        e.display.input.ensurePolled();\n        var n = e.display.shift,\n          i = !1;\n        try {\n          e.isReadOnly() && (e.state.suppressEdits = !0), r && (e.display.shift = !1), i = t(e) != j;\n        } finally {\n          e.display.shift = n, e.state.suppressEdits = !1;\n        }\n        return i;\n      }\n      var ol = new _();\n      function ll(e, t, r, n) {\n        var i = e.state.keySeq;\n        if (i) {\n          if ($o(t)) return \"handled\";\n          if (/\\'$/.test(t) ? e.state.keySeq = null : ol.set(50, function () {\n            e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset());\n          }), al(e, i + \" \" + t, r, n)) return !0;\n        }\n        return al(e, t, r, n);\n      }\n      function al(e, t, r, n) {\n        var i = function (e, t, r) {\n          for (var n = 0; n < e.state.keyMaps.length; n++) {\n            var i = Ko(t, e.state.keyMaps[n], r, e);\n            if (i) return i;\n          }\n          return e.options.extraKeys && Ko(t, e.options.extraKeys, r, e) || Ko(t, e.options.keyMap, r, e);\n        }(e, t, n);\n        return \"multi\" == i && (e.state.keySeq = t), \"handled\" == i && ar(e, \"keyHandled\", e, t, r), \"handled\" != i && \"multi\" != i || (be(r), xn(e)), !!i;\n      }\n      function sl(e, t) {\n        var r = qo(t, !0);\n        return !!r && (t.shiftKey && !e.state.keySeq ? ll(e, \"Shift-\" + r, t, function (t) {\n          return il(e, t, !0);\n        }) || ll(e, r, t, function (t) {\n          if (\"string\" == typeof t ? /^go[A-Z]/.test(t) : t.motion) return il(e, t);\n        }) : ll(e, r, t, function (t) {\n          return il(e, t);\n        }));\n      }\n      var ul = null;\n      function cl(e) {\n        var t = this;\n        if (t.curOp.focus = P(), !ve(t, e)) {\n          l && a < 11 && 27 == e.keyCode && (e.returnValue = !1);\n          var n = e.keyCode;\n          t.display.shift = 16 == n || e.shiftKey;\n          var i = sl(t, e);\n          d && (ul = i ? n : null, !i && 88 == n && !Ee && (y ? e.metaKey : e.ctrlKey) && t.replaceSelection(\"\", null, \"cut\")), r && !y && !i && 46 == n && e.shiftKey && !e.ctrlKey && document.execCommand && document.execCommand(\"cut\"), 18 != n || /\\bCodeMirror-crosshair\\b/.test(t.display.lineDiv.className) || function (e) {\n            var t = e.display.lineDiv;\n            function r(e) {\n              18 != e.keyCode && e.altKey || (L(t, \"CodeMirror-crosshair\"), he(document, \"keyup\", r), he(document, \"mouseover\", r));\n            }\n            E(t, \"CodeMirror-crosshair\"), de(document, \"keyup\", r), de(document, \"mouseover\", r);\n          }(t);\n        }\n      }\n      function dl(e) {\n        16 == e.keyCode && (this.doc.sel.shift = !1), ve(this, e);\n      }\n      function fl(e) {\n        var t = this;\n        if (!(xr(t.display, e) || ve(t, e) || e.ctrlKey && !e.altKey || y && e.metaKey)) {\n          var r = e.keyCode,\n            n = e.charCode;\n          if (d && r == ul) return ul = null, void be(e);\n          if (!d || e.which && !(e.which < 10) || !sl(t, e)) {\n            var i = String.fromCharCode(null == n ? r : n);\n            \"\\b\" != i && (function (e, t, r) {\n              return ll(e, \"'\" + r + \"'\", t, function (t) {\n                return il(e, t, !0);\n              });\n            }(t, e, i) || t.display.input.onKeyPress(e));\n          }\n        }\n      }\n      var hl,\n        pl,\n        vl = function (e, t, r) {\n          this.time = e, this.pos = t, this.button = r;\n        };\n      function gl(e) {\n        var t = this,\n          r = t.display;\n        if (!(ve(t, e) || r.activeTouch && r.input.supportsTouch())) if (r.input.ensurePolled(), r.shift = e.shiftKey, xr(r, e)) s || (r.scroller.draggable = !1, setTimeout(function () {\n          return r.scroller.draggable = !0;\n        }, 100));else if (!bl(t, e)) {\n          var n = un(t, e),\n            i = Se(e),\n            o = n ? function (e, t) {\n              var r = +new Date();\n              return pl && pl.compare(r, e, t) ? (hl = pl = null, \"triple\") : hl && hl.compare(r, e, t) ? (pl = new vl(r, e, t), hl = null, \"double\") : (hl = new vl(r, e, t), pl = null, \"single\");\n            }(n, i) : \"single\";\n          window.focus(), 1 == i && t.state.selectingText && t.state.selectingText(e), n && function (e, t, r, n, i) {\n            var o = \"Click\";\n            return \"double\" == n ? o = \"Double\" + o : \"triple\" == n && (o = \"Triple\" + o), ll(e, Xo(o = (1 == t ? \"Left\" : 2 == t ? \"Middle\" : \"Right\") + o, i), i, function (t) {\n              if (\"string\" == typeof t && (t = tl[t]), !t) return !1;\n              var n = !1;\n              try {\n                e.isReadOnly() && (e.state.suppressEdits = !0), n = t(e, r) != j;\n              } finally {\n                e.state.suppressEdits = !1;\n              }\n              return n;\n            });\n          }(t, i, n, o, e) || (1 == i ? n ? function (e, t, r, n) {\n            l ? setTimeout(I(Cn, e), 0) : e.curOp.focus = P();\n            var i,\n              o = function (e, t, r) {\n                var n = e.getOption(\"configureMouse\"),\n                  i = n ? n(e, t, r) : {};\n                if (null == i.unit) {\n                  var o = b ? r.shiftKey && r.metaKey : r.altKey;\n                  i.unit = o ? \"rectangle\" : \"single\" == t ? \"char\" : \"double\" == t ? \"word\" : \"line\";\n                }\n                return (null == i.extend || e.doc.extend) && (i.extend = e.doc.extend || r.shiftKey), null == i.addNew && (i.addNew = y ? r.metaKey : r.ctrlKey), null == i.moveOnDrag && (i.moveOnDrag = !(y ? r.altKey : r.ctrlKey)), i;\n              }(e, r, n),\n              u = e.doc.sel;\n            e.options.dragDrop && Te && !e.isReadOnly() && \"single\" == r && (i = u.contains(t)) > -1 && (tt((i = u.ranges[i]).from(), t) < 0 || t.xRel > 0) && (tt(i.to(), t) > 0 || t.xRel < 0) ? function (e, t, r, n) {\n              var i = e.display,\n                o = !1,\n                u = ei(e, function (t) {\n                  s && (i.scroller.draggable = !1), e.state.draggingText = !1, he(i.wrapper.ownerDocument, \"mouseup\", u), he(i.wrapper.ownerDocument, \"mousemove\", c), he(i.scroller, \"dragstart\", d), he(i.scroller, \"drop\", u), o || (be(t), n.addNew || Xi(e.doc, r, null, null, n.extend), s || l && 9 == a ? setTimeout(function () {\n                    i.wrapper.ownerDocument.body.focus(), i.input.focus();\n                  }, 20) : i.input.focus());\n                }),\n                c = function (e) {\n                  o = o || Math.abs(t.clientX - e.clientX) + Math.abs(t.clientY - e.clientY) >= 10;\n                },\n                d = function () {\n                  return o = !0;\n                };\n              s && (i.scroller.draggable = !0), e.state.draggingText = u, u.copy = !n.moveOnDrag, i.scroller.dragDrop && i.scroller.dragDrop(), de(i.wrapper.ownerDocument, \"mouseup\", u), de(i.wrapper.ownerDocument, \"mousemove\", c), de(i.scroller, \"dragstart\", d), de(i.scroller, \"drop\", u), kn(e), setTimeout(function () {\n                return i.input.focus();\n              }, 20);\n            }(e, n, t, o) : function (e, t, r, n) {\n              var i = e.display,\n                o = e.doc;\n              be(t);\n              var l,\n                a,\n                s = o.sel,\n                u = s.ranges;\n              if (n.addNew && !n.extend ? (a = o.sel.contains(r), l = a > -1 ? u[a] : new ki(r, r)) : (l = o.sel.primary(), a = o.sel.primIndex), \"rectangle\" == n.unit) n.addNew || (l = new ki(r, r)), r = un(e, t, !0, !0), a = -1;else {\n                var c = ml(e, r, n.unit);\n                l = n.extend ? $i(l, c.anchor, c.head, n.extend) : c;\n              }\n              n.addNew ? -1 == a ? (a = u.length, Qi(o, Si(e, u.concat([l]), a), {\n                scroll: !1,\n                origin: \"*mouse\"\n              })) : u.length > 1 && u[a].empty() && \"char\" == n.unit && !n.extend ? (Qi(o, Si(e, u.slice(0, a).concat(u.slice(a + 1)), 0), {\n                scroll: !1,\n                origin: \"*mouse\"\n              }), s = o.sel) : Yi(o, a, l, V) : (a = 0, Qi(o, new Ci([l], 0), V), s = o.sel);\n              var d = r;\n              function f(t) {\n                if (0 != tt(d, t)) if (d = t, \"rectangle\" == n.unit) {\n                  for (var i = [], u = e.options.tabSize, c = z(Ke(o, r.line).text, r.ch, u), f = z(Ke(o, t.line).text, t.ch, u), h = Math.min(c, f), p = Math.max(c, f), v = Math.min(r.line, t.line), g = Math.min(e.lastLine(), Math.max(r.line, t.line)); v <= g; v++) {\n                    var m = Ke(o, v).text,\n                      y = U(m, h, u);\n                    h == p ? i.push(new ki(et(v, y), et(v, y))) : m.length > y && i.push(new ki(et(v, y), et(v, U(m, p, u))));\n                  }\n                  i.length || i.push(new ki(r, r)), Qi(o, Si(e, s.ranges.slice(0, a).concat(i), a), {\n                    origin: \"*mouse\",\n                    scroll: !1\n                  }), e.scrollIntoView(t);\n                } else {\n                  var b,\n                    w = l,\n                    x = ml(e, t, n.unit),\n                    C = w.anchor;\n                  tt(x.anchor, C) > 0 ? (b = x.head, C = ot(w.from(), x.anchor)) : (b = x.anchor, C = it(w.to(), x.head));\n                  var k = s.ranges.slice(0);\n                  k[a] = function (e, t) {\n                    var r = t.anchor,\n                      n = t.head,\n                      i = Ke(e.doc, r.line);\n                    if (0 == tt(r, n) && r.sticky == n.sticky) return t;\n                    var o = ue(i);\n                    if (!o) return t;\n                    var l = ae(o, r.ch, r.sticky),\n                      a = o[l];\n                    if (a.from != r.ch && a.to != r.ch) return t;\n                    var s,\n                      u = l + (a.from == r.ch == (1 != a.level) ? 0 : 1);\n                    if (0 == u || u == o.length) return t;\n                    if (n.line != r.line) s = (n.line - r.line) * (\"ltr\" == e.doc.direction ? 1 : -1) > 0;else {\n                      var c = ae(o, n.ch, n.sticky),\n                        d = c - l || (n.ch - r.ch) * (1 == a.level ? -1 : 1);\n                      s = c == u - 1 || c == u ? d < 0 : d > 0;\n                    }\n                    var f = o[u + (s ? -1 : 0)],\n                      h = s == (1 == f.level),\n                      p = h ? f.from : f.to,\n                      v = h ? \"after\" : \"before\";\n                    return r.ch == p && r.sticky == v ? t : new ki(new et(r.line, p, v), n);\n                  }(e, new ki(at(o, C), b)), Qi(o, Si(e, k, a), V);\n                }\n              }\n              var h = i.wrapper.getBoundingClientRect(),\n                p = 0;\n              function v(t) {\n                e.state.selectingText = !1, p = 1 / 0, t && (be(t), i.input.focus()), he(i.wrapper.ownerDocument, \"mousemove\", g), he(i.wrapper.ownerDocument, \"mouseup\", m), o.history.lastSelOrigin = null;\n              }\n              var g = ei(e, function (t) {\n                  0 !== t.buttons && Se(t) ? function t(r) {\n                    var l = ++p,\n                      a = un(e, r, !0, \"rectangle\" == n.unit);\n                    if (a) if (0 != tt(a, d)) {\n                      e.curOp.focus = P(), f(a);\n                      var s = On(i, o);\n                      (a.line >= s.to || a.line < s.from) && setTimeout(ei(e, function () {\n                        p == l && t(r);\n                      }), 150);\n                    } else {\n                      var u = r.clientY < h.top ? -20 : r.clientY > h.bottom ? 20 : 0;\n                      u && setTimeout(ei(e, function () {\n                        p == l && (i.scroller.scrollTop += u, t(r));\n                      }), 50);\n                    }\n                  }(t) : v(t);\n                }),\n                m = ei(e, v);\n              e.state.selectingText = m, de(i.wrapper.ownerDocument, \"mousemove\", g), de(i.wrapper.ownerDocument, \"mouseup\", m);\n            }(e, n, t, o);\n          }(t, n, o, e) : ke(e) == r.scroller && be(e) : 2 == i ? (n && Xi(t.doc, n), setTimeout(function () {\n            return r.input.focus();\n          }, 20)) : 3 == i && (k ? t.display.input.onContextMenu(e) : kn(t)));\n        }\n      }\n      function ml(e, t, r) {\n        if (\"char\" == r) return new ki(t, t);\n        if (\"word\" == r) return e.findWordAt(t);\n        if (\"line\" == r) return new ki(et(t.line, 0), at(e.doc, et(t.line + 1, 0)));\n        var n = r(e, t);\n        return new ki(n.from, n.to);\n      }\n      function yl(e, t, r, n) {\n        var i, o;\n        if (t.touches) i = t.touches[0].clientX, o = t.touches[0].clientY;else try {\n          i = t.clientX, o = t.clientY;\n        } catch (t) {\n          return !1;\n        }\n        if (i >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1;\n        n && be(t);\n        var l = e.display,\n          a = l.lineDiv.getBoundingClientRect();\n        if (o > a.bottom || !me(e, r)) return xe(t);\n        o -= a.top - l.viewOffset;\n        for (var s = 0; s < e.display.gutterSpecs.length; ++s) {\n          var u = l.gutters.childNodes[s];\n          if (u && u.getBoundingClientRect().right >= i) return pe(e, r, e, Ze(e.doc, o), e.display.gutterSpecs[s].className, t), xe(t);\n        }\n      }\n      function bl(e, t) {\n        return yl(e, t, \"gutterClick\", !0);\n      }\n      function wl(e, t) {\n        xr(e.display, t) || function (e, t) {\n          return !!me(e, \"gutterContextMenu\") && yl(e, t, \"gutterContextMenu\", !1);\n        }(e, t) || ve(e, t, \"contextmenu\") || k || e.display.input.onContextMenu(t);\n      }\n      function xl(e) {\n        e.display.wrapper.className = e.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + e.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\"), _r(e);\n      }\n      vl.prototype.compare = function (e, t, r) {\n        return this.time + 400 > e && 0 == tt(t, this.pos) && r == this.button;\n      };\n      var Cl = {\n          toString: function () {\n            return \"CodeMirror.Init\";\n          }\n        },\n        kl = {},\n        Sl = {};\n      function Ml(e, t, r) {\n        if (!t != !(r && r != Cl)) {\n          var n = e.display.dragFunctions,\n            i = t ? de : he;\n          i(e.display.scroller, \"dragstart\", n.start), i(e.display.scroller, \"dragenter\", n.enter), i(e.display.scroller, \"dragover\", n.over), i(e.display.scroller, \"dragleave\", n.leave), i(e.display.scroller, \"drop\", n.drop);\n        }\n      }\n      function Ll(e) {\n        e.options.lineWrapping ? (E(e.display.wrapper, \"CodeMirror-wrap\"), e.display.sizer.style.minWidth = \"\", e.display.sizerWidth = null) : (L(e.display.wrapper, \"CodeMirror-wrap\"), Ut(e)), sn(e), dn(e), _r(e), setTimeout(function () {\n          return jn(e);\n        }, 100);\n      }\n      function Tl(e, t) {\n        var r = this;\n        if (!(this instanceof Tl)) return new Tl(e, t);\n        this.options = t = t ? F(t) : {}, F(kl, t, !1);\n        var n = t.value;\n        \"string\" == typeof n ? n = new Do(n, t.mode, null, t.lineSeparator, t.direction) : t.mode && (n.modeOption = t.mode), this.doc = n;\n        var i = new Tl.inputStyles[t.inputStyle](this),\n          o = this.display = new gi(e, n, i, t);\n        for (var u in o.wrapper.CodeMirror = this, xl(this), t.lineWrapping && (this.display.wrapper.className += \" CodeMirror-wrap\"), Gn(this), this.state = {\n          keyMaps: [],\n          overlays: [],\n          modeGen: 0,\n          overwrite: !1,\n          delayingBlurEvent: !1,\n          focused: !1,\n          suppressEdits: !1,\n          pasteIncoming: -1,\n          cutIncoming: -1,\n          selectingText: !1,\n          draggingText: !1,\n          highlight: new _(),\n          keySeq: null,\n          specialChars: null\n        }, t.autofocus && !m && o.input.focus(), l && a < 11 && setTimeout(function () {\n          return r.display.input.reset(!0);\n        }, 20), function (e) {\n          var t = e.display;\n          de(t.scroller, \"mousedown\", ei(e, gl)), de(t.scroller, \"dblclick\", l && a < 11 ? ei(e, function (t) {\n            if (!ve(e, t)) {\n              var r = un(e, t);\n              if (r && !bl(e, t) && !xr(e.display, t)) {\n                be(t);\n                var n = e.findWordAt(r);\n                Xi(e.doc, n.anchor, n.head);\n              }\n            }\n          }) : function (t) {\n            return ve(e, t) || be(t);\n          }), de(t.scroller, \"contextmenu\", function (t) {\n            return wl(e, t);\n          });\n          var r,\n            n = {\n              end: 0\n            };\n          function i() {\n            t.activeTouch && (r = setTimeout(function () {\n              return t.activeTouch = null;\n            }, 1e3), (n = t.activeTouch).end = +new Date());\n          }\n          function o(e, t) {\n            if (null == t.left) return !0;\n            var r = t.left - e.left,\n              n = t.top - e.top;\n            return r * r + n * n > 400;\n          }\n          de(t.scroller, \"touchstart\", function (i) {\n            if (!ve(e, i) && !function (e) {\n              if (1 != e.touches.length) return !1;\n              var t = e.touches[0];\n              return t.radiusX <= 1 && t.radiusY <= 1;\n            }(i) && !bl(e, i)) {\n              t.input.ensurePolled(), clearTimeout(r);\n              var o = +new Date();\n              t.activeTouch = {\n                start: o,\n                moved: !1,\n                prev: o - n.end <= 300 ? n : null\n              }, 1 == i.touches.length && (t.activeTouch.left = i.touches[0].pageX, t.activeTouch.top = i.touches[0].pageY);\n            }\n          }), de(t.scroller, \"touchmove\", function () {\n            t.activeTouch && (t.activeTouch.moved = !0);\n          }), de(t.scroller, \"touchend\", function (r) {\n            var n = t.activeTouch;\n            if (n && !xr(t, r) && null != n.left && !n.moved && new Date() - n.start < 300) {\n              var l,\n                a = e.coordsChar(t.activeTouch, \"page\");\n              l = !n.prev || o(n, n.prev) ? new ki(a, a) : !n.prev.prev || o(n, n.prev.prev) ? e.findWordAt(a) : new ki(et(a.line, 0), at(e.doc, et(a.line + 1, 0))), e.setSelection(l.anchor, l.head), e.focus(), be(r);\n            }\n            i();\n          }), de(t.scroller, \"touchcancel\", i), de(t.scroller, \"scroll\", function () {\n            t.scroller.clientHeight && (Wn(e, t.scroller.scrollTop), Fn(e, t.scroller.scrollLeft, !0), pe(e, \"scroll\", e));\n          }), de(t.scroller, \"mousewheel\", function (t) {\n            return xi(e, t);\n          }), de(t.scroller, \"DOMMouseScroll\", function (t) {\n            return xi(e, t);\n          }), de(t.wrapper, \"scroll\", function () {\n            return t.wrapper.scrollTop = t.wrapper.scrollLeft = 0;\n          }), t.dragFunctions = {\n            enter: function (t) {\n              ve(e, t) || Ce(t);\n            },\n            over: function (t) {\n              ve(e, t) || (function (e, t) {\n                var r = un(e, t);\n                if (r) {\n                  var n = document.createDocumentFragment();\n                  yn(e, r, n), e.display.dragCursor || (e.display.dragCursor = N(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\"), e.display.lineSpace.insertBefore(e.display.dragCursor, e.display.cursorDiv)), O(e.display.dragCursor, n);\n                }\n              }(e, t), Ce(t));\n            },\n            start: function (t) {\n              return function (e, t) {\n                if (l && (!e.state.draggingText || +new Date() - Po < 100)) Ce(t);else if (!ve(e, t) && !xr(e.display, t) && (t.dataTransfer.setData(\"Text\", e.getSelection()), t.dataTransfer.effectAllowed = \"copyMove\", t.dataTransfer.setDragImage && !f)) {\n                  var r = N(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n                  r.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\", d && (r.width = r.height = 1, e.display.wrapper.appendChild(r), r._top = r.offsetTop), t.dataTransfer.setDragImage(r, 0, 0), d && r.parentNode.removeChild(r);\n                }\n              }(e, t);\n            },\n            drop: ei(e, Eo),\n            leave: function (t) {\n              ve(e, t) || Ho(e);\n            }\n          };\n          var s = t.input.getField();\n          de(s, \"keyup\", function (t) {\n            return dl.call(e, t);\n          }), de(s, \"keydown\", ei(e, cl)), de(s, \"keypress\", ei(e, fl)), de(s, \"focus\", function (t) {\n            return Sn(e, t);\n          }), de(s, \"blur\", function (t) {\n            return Mn(e, t);\n          });\n        }(this), Fo(), Kn(this), this.curOp.forceUpdate = !0, Wi(this, n), t.autofocus && !m || this.hasFocus() ? setTimeout(I(Sn, this), 20) : Mn(this), Sl) Sl.hasOwnProperty(u) && Sl[u](this, t[u], Cl);\n        fi(this), t.finishInit && t.finishInit(this);\n        for (var c = 0; c < Ol.length; ++c) Ol[c](this);\n        $n(this), s && t.lineWrapping && \"optimizelegibility\" == getComputedStyle(o.lineDiv).textRendering && (o.lineDiv.style.textRendering = \"auto\");\n      }\n      Tl.defaults = kl, Tl.optionHandlers = Sl;\n      var Ol = [];\n      function Nl(e, t, r, n) {\n        var i,\n          o = e.doc;\n        null == r && (r = \"add\"), \"smart\" == r && (o.mode.indent ? i = ht(e, t).state : r = \"prev\");\n        var l = e.options.tabSize,\n          a = Ke(o, t),\n          s = z(a.text, null, l);\n        a.stateAfter && (a.stateAfter = null);\n        var u,\n          c = a.text.match(/^\\s*/)[0];\n        if (n || /\\S/.test(a.text)) {\n          if (\"smart\" == r && ((u = o.mode.indent(i, a.text.slice(c.length), a.text)) == j || u > 150)) {\n            if (!n) return;\n            r = \"prev\";\n          }\n        } else u = 0, r = \"not\";\n        \"prev\" == r ? u = t > o.first ? z(Ke(o, t - 1).text, null, l) : 0 : \"add\" == r ? u = s + e.options.indentUnit : \"subtract\" == r ? u = s - e.options.indentUnit : \"number\" == typeof r && (u = s + r), u = Math.max(0, u);\n        var d = \"\",\n          f = 0;\n        if (e.options.indentWithTabs) for (var h = Math.floor(u / l); h; --h) f += l, d += \"\\t\";\n        if (f < u && (d += $(u - f)), d != c) return vo(o, d, et(t, 0), et(t, c.length), \"+input\"), a.stateAfter = null, !0;\n        for (var p = 0; p < o.sel.ranges.length; p++) {\n          var v = o.sel.ranges[p];\n          if (v.head.line == t && v.head.ch < c.length) {\n            var g = et(t, c.length);\n            Yi(o, p, new ki(g, g));\n            break;\n          }\n        }\n      }\n      Tl.defineInitHook = function (e) {\n        return Ol.push(e);\n      };\n      var Al = null;\n      function Dl(e) {\n        Al = e;\n      }\n      function Pl(e, t, r, n, i) {\n        var o = e.doc;\n        e.display.shift = !1, n || (n = o.sel);\n        var l = +new Date() - 200,\n          a = \"paste\" == i || e.state.pasteIncoming > l,\n          s = De(t),\n          u = null;\n        if (a && n.ranges.length > 1) if (Al && Al.text.join(\"\\n\") == t) {\n          if (n.ranges.length % Al.text.length == 0) {\n            u = [];\n            for (var c = 0; c < Al.text.length; c++) u.push(o.splitLines(Al.text[c]));\n          }\n        } else s.length == n.ranges.length && e.options.pasteLinesPerSelection && (u = q(s, function (e) {\n          return [e];\n        }));\n        for (var d = e.curOp.updateInput, f = n.ranges.length - 1; f >= 0; f--) {\n          var h = n.ranges[f],\n            p = h.from(),\n            v = h.to();\n          h.empty() && (r && r > 0 ? p = et(p.line, p.ch - r) : e.state.overwrite && !a ? v = et(v.line, Math.min(Ke(o, v.line).text.length, v.ch + X(s).length)) : a && Al && Al.lineWise && Al.text.join(\"\\n\") == t && (p = v = et(p.line, 0)));\n          var g = {\n            from: p,\n            to: v,\n            text: u ? u[f % u.length] : s,\n            origin: i || (a ? \"paste\" : e.state.cutIncoming > l ? \"cut\" : \"+input\")\n          };\n          uo(e.doc, g), ar(e, \"inputRead\", e, g);\n        }\n        t && !a && Hl(e, t), Dn(e), e.curOp.updateInput < 2 && (e.curOp.updateInput = d), e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = -1;\n      }\n      function El(e, t) {\n        var r = e.clipboardData && e.clipboardData.getData(\"Text\");\n        if (r) return e.preventDefault(), t.isReadOnly() || t.options.disableInput || Qn(t, function () {\n          return Pl(t, r, 0, null, \"paste\");\n        }), !0;\n      }\n      function Hl(e, t) {\n        if (e.options.electricChars && e.options.smartIndent) for (var r = e.doc.sel, n = r.ranges.length - 1; n >= 0; n--) {\n          var i = r.ranges[n];\n          if (!(i.head.ch > 100 || n && r.ranges[n - 1].head.line == i.head.line)) {\n            var o = e.getModeAt(i.head),\n              l = !1;\n            if (o.electricChars) {\n              for (var a = 0; a < o.electricChars.length; a++) if (t.indexOf(o.electricChars.charAt(a)) > -1) {\n                l = Nl(e, i.head.line, \"smart\");\n                break;\n              }\n            } else o.electricInput && o.electricInput.test(Ke(e.doc, i.head.line).text.slice(0, i.head.ch)) && (l = Nl(e, i.head.line, \"smart\"));\n            l && ar(e, \"electricInput\", e, i.head.line);\n          }\n        }\n      }\n      function Wl(e) {\n        for (var t = [], r = [], n = 0; n < e.doc.sel.ranges.length; n++) {\n          var i = e.doc.sel.ranges[n].head.line,\n            o = {\n              anchor: et(i, 0),\n              head: et(i + 1, 0)\n            };\n          r.push(o), t.push(e.getRange(o.anchor, o.head));\n        }\n        return {\n          text: t,\n          ranges: r\n        };\n      }\n      function Il(e, t, r, n) {\n        e.setAttribute(\"autocorrect\", r ? \"\" : \"off\"), e.setAttribute(\"autocapitalize\", n ? \"\" : \"off\"), e.setAttribute(\"spellcheck\", !!t);\n      }\n      function Fl() {\n        var e = N(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\"),\n          t = N(\"div\", [e], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n        return s ? e.style.width = \"1000px\" : e.setAttribute(\"wrap\", \"off\"), v && (e.style.border = \"1px solid black\"), Il(e), t;\n      }\n      function zl(e, t, r, n, i) {\n        var o = t,\n          l = r,\n          a = Ke(e, t.line);\n        function s(n) {\n          var o, l;\n          if (null == (o = i ? function (e, t, r, n) {\n            var i = ue(t, e.doc.direction);\n            if (!i) return Qo(t, r, n);\n            r.ch >= t.text.length ? (r.ch = t.text.length, r.sticky = \"before\") : r.ch <= 0 && (r.ch = 0, r.sticky = \"after\");\n            var o = ae(i, r.ch, r.sticky),\n              l = i[o];\n            if (\"ltr\" == e.doc.direction && l.level % 2 == 0 && (n > 0 ? l.to > r.ch : l.from < r.ch)) return Qo(t, r, n);\n            var a,\n              s = function (e, r) {\n                return Jo(t, e instanceof et ? e.ch : e, r);\n              },\n              u = function (r) {\n                return e.options.lineWrapping ? (a = a || Dr(e, t), Zr(e, t, a, r)) : {\n                  begin: 0,\n                  end: t.text.length\n                };\n              },\n              c = u(\"before\" == r.sticky ? s(r, -1) : r.ch);\n            if (\"rtl\" == e.doc.direction || 1 == l.level) {\n              var d = 1 == l.level == n < 0,\n                f = s(r, d ? 1 : -1);\n              if (null != f && (d ? f <= l.to && f <= c.end : f >= l.from && f >= c.begin)) {\n                var h = d ? \"before\" : \"after\";\n                return new et(r.line, f, h);\n              }\n            }\n            var p = function (e, t, n) {\n                for (var o = function (e, t) {\n                  return t ? new et(r.line, s(e, 1), \"before\") : new et(r.line, e, \"after\");\n                }; e >= 0 && e < i.length; e += t) {\n                  var l = i[e],\n                    a = t > 0 == (1 != l.level),\n                    u = a ? n.begin : s(n.end, -1);\n                  if (l.from <= u && u < l.to) return o(u, a);\n                  if (u = a ? l.from : s(l.to, -1), n.begin <= u && u < n.end) return o(u, a);\n                }\n              },\n              v = p(o + n, n, c);\n            if (v) return v;\n            var g = n > 0 ? c.end : s(c.begin, -1);\n            return null == g || n > 0 && g == t.text.length || !(v = p(n > 0 ? 0 : i.length - 1, n, u(g))) ? null : v;\n          }(e.cm, a, t, r) : Qo(a, t, r))) {\n            if (n || (l = t.line + r) < e.first || l >= e.first + e.size || (t = new et(l, t.ch, t.sticky), !(a = Ke(e, l)))) return !1;\n            t = el(i, e.cm, a, t.line, r);\n          } else t = o;\n          return !0;\n        }\n        if (\"char\" == n) s();else if (\"column\" == n) s(!0);else if (\"word\" == n || \"group\" == n) for (var u = null, c = \"group\" == n, d = e.cm && e.cm.getHelper(t, \"wordChars\"), f = !0; !(r < 0) || s(!f); f = !1) {\n          var h = a.text.charAt(t.ch) || \"\\n\",\n            p = ee(h, d) ? \"w\" : c && \"\\n\" == h ? \"n\" : !c || /\\s/.test(h) ? null : \"p\";\n          if (!c || f || p || (p = \"s\"), u && u != p) {\n            r < 0 && (r = 1, s(), t.sticky = \"after\");\n            break;\n          }\n          if (p && (u = p), r > 0 && !s(!f)) break;\n        }\n        var v = oo(e, t, o, l, !0);\n        return rt(o, v) && (v.hitSide = !0), v;\n      }\n      function _l(e, t, r, n) {\n        var i,\n          o,\n          l = e.doc,\n          a = t.left;\n        if (\"page\" == n) {\n          var s = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight),\n            u = Math.max(s - .5 * rn(e.display), 3);\n          i = (r > 0 ? t.bottom : t.top) + r * u;\n        } else \"line\" == n && (i = r > 0 ? t.bottom + 3 : t.top - 3);\n        for (; (o = qr(e, a, i)).outside;) {\n          if (r < 0 ? i <= 0 : i >= l.height) {\n            o.hitSide = !0;\n            break;\n          }\n          i += 5 * r;\n        }\n        return o;\n      }\n      var Rl = function (e) {\n        this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new _(), this.composing = null, this.gracePeriod = !1, this.readDOMTimeout = null;\n      };\n      function jl(e, t) {\n        var r = Ar(e, t.line);\n        if (!r || r.hidden) return null;\n        var n = Ke(e.doc, t.line),\n          i = Or(r, n, t.line),\n          o = ue(n, e.doc.direction),\n          l = \"left\";\n        o && (l = ae(o, t.ch) % 2 ? \"right\" : \"left\");\n        var a = Wr(i.map, t.ch, l);\n        return a.offset = \"right\" == a.collapse ? a.end : a.start, a;\n      }\n      function Bl(e, t) {\n        return t && (e.bad = !0), e;\n      }\n      function Vl(e, t, r) {\n        var n;\n        if (t == e.display.lineDiv) {\n          if (!(n = e.display.lineDiv.childNodes[r])) return Bl(e.clipPos(et(e.display.viewTo - 1)), !0);\n          t = null, r = 0;\n        } else for (n = t;; n = n.parentNode) {\n          if (!n || n == e.display.lineDiv) return null;\n          if (n.parentNode && n.parentNode == e.display.lineDiv) break;\n        }\n        for (var i = 0; i < e.display.view.length; i++) {\n          var o = e.display.view[i];\n          if (o.node == n) return Gl(o, t, r);\n        }\n      }\n      function Gl(e, t, r) {\n        var n = e.text.firstChild,\n          i = !1;\n        if (!t || !D(n, t)) return Bl(et(Ye(e.line), 0), !0);\n        if (t == n && (i = !0, t = n.childNodes[r], r = 0, !t)) {\n          var o = e.rest ? X(e.rest) : e.line;\n          return Bl(et(Ye(o), o.text.length), i);\n        }\n        var l = 3 == t.nodeType ? t : null,\n          a = t;\n        for (l || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (l = t.firstChild, r && (r = l.nodeValue.length)); a.parentNode != n;) a = a.parentNode;\n        var s = e.measure,\n          u = s.maps;\n        function c(t, r, n) {\n          for (var i = -1; i < (u ? u.length : 0); i++) for (var o = i < 0 ? s.map : u[i], l = 0; l < o.length; l += 3) {\n            var a = o[l + 2];\n            if (a == t || a == r) {\n              var c = Ye(i < 0 ? e.line : e.rest[i]),\n                d = o[l] + n;\n              return (n < 0 || a != t) && (d = o[l + (n ? 1 : 0)]), et(c, d);\n            }\n          }\n        }\n        var d = c(l, a, r);\n        if (d) return Bl(d, i);\n        for (var f = a.nextSibling, h = l ? l.nodeValue.length - r : 0; f; f = f.nextSibling) {\n          if (d = c(f, f.firstChild, 0)) return Bl(et(d.line, d.ch - h), i);\n          h += f.textContent.length;\n        }\n        for (var p = a.previousSibling, v = r; p; p = p.previousSibling) {\n          if (d = c(p, p.firstChild, -1)) return Bl(et(d.line, d.ch + v), i);\n          v += p.textContent.length;\n        }\n      }\n      Rl.prototype.init = function (e) {\n        var t = this,\n          r = this,\n          n = r.cm,\n          i = r.div = e.lineDiv;\n        function o(e) {\n          if (!ve(n, e)) {\n            if (n.somethingSelected()) Dl({\n              lineWise: !1,\n              text: n.getSelections()\n            }), \"cut\" == e.type && n.replaceSelection(\"\", null, \"cut\");else {\n              if (!n.options.lineWiseCopyCut) return;\n              var t = Wl(n);\n              Dl({\n                lineWise: !0,\n                text: t.text\n              }), \"cut\" == e.type && n.operation(function () {\n                n.setSelections(t.ranges, 0, B), n.replaceSelection(\"\", null, \"cut\");\n              });\n            }\n            if (e.clipboardData) {\n              e.clipboardData.clearData();\n              var o = Al.text.join(\"\\n\");\n              if (e.clipboardData.setData(\"Text\", o), e.clipboardData.getData(\"Text\") == o) return void e.preventDefault();\n            }\n            var l = Fl(),\n              a = l.firstChild;\n            n.display.lineSpace.insertBefore(l, n.display.lineSpace.firstChild), a.value = Al.text.join(\"\\n\");\n            var s = document.activeElement;\n            W(a), setTimeout(function () {\n              n.display.lineSpace.removeChild(l), s.focus(), s == i && r.showPrimarySelection();\n            }, 50);\n          }\n        }\n        Il(i, n.options.spellcheck, n.options.autocorrect, n.options.autocapitalize), de(i, \"paste\", function (e) {\n          ve(n, e) || El(e, n) || a <= 11 && setTimeout(ei(n, function () {\n            return t.updateFromDOM();\n          }), 20);\n        }), de(i, \"compositionstart\", function (e) {\n          t.composing = {\n            data: e.data,\n            done: !1\n          };\n        }), de(i, \"compositionupdate\", function (e) {\n          t.composing || (t.composing = {\n            data: e.data,\n            done: !1\n          });\n        }), de(i, \"compositionend\", function (e) {\n          t.composing && (e.data != t.composing.data && t.readFromDOMSoon(), t.composing.done = !0);\n        }), de(i, \"touchstart\", function () {\n          return r.forceCompositionEnd();\n        }), de(i, \"input\", function () {\n          t.composing || t.readFromDOMSoon();\n        }), de(i, \"copy\", o), de(i, \"cut\", o);\n      }, Rl.prototype.prepareSelection = function () {\n        var e = mn(this.cm, !1);\n        return e.focus = this.cm.state.focused, e;\n      }, Rl.prototype.showSelection = function (e, t) {\n        e && this.cm.display.view.length && ((e.focus || t) && this.showPrimarySelection(), this.showMultipleSelections(e));\n      }, Rl.prototype.getSelection = function () {\n        return this.cm.display.wrapper.ownerDocument.getSelection();\n      }, Rl.prototype.showPrimarySelection = function () {\n        var e = this.getSelection(),\n          t = this.cm,\n          n = t.doc.sel.primary(),\n          i = n.from(),\n          o = n.to();\n        if (t.display.viewTo == t.display.viewFrom || i.line >= t.display.viewTo || o.line < t.display.viewFrom) e.removeAllRanges();else {\n          var l = Vl(t, e.anchorNode, e.anchorOffset),\n            a = Vl(t, e.focusNode, e.focusOffset);\n          if (!l || l.bad || !a || a.bad || 0 != tt(ot(l, a), i) || 0 != tt(it(l, a), o)) {\n            var s = t.display.view,\n              u = i.line >= t.display.viewFrom && jl(t, i) || {\n                node: s[0].measure.map[2],\n                offset: 0\n              },\n              c = o.line < t.display.viewTo && jl(t, o);\n            if (!c) {\n              var d = s[s.length - 1].measure,\n                f = d.maps ? d.maps[d.maps.length - 1] : d.map;\n              c = {\n                node: f[f.length - 1],\n                offset: f[f.length - 2] - f[f.length - 3]\n              };\n            }\n            if (u && c) {\n              var h,\n                p = e.rangeCount && e.getRangeAt(0);\n              try {\n                h = M(u.node, u.offset, c.offset, c.node);\n              } catch (e) {}\n              h && (!r && t.state.focused ? (e.collapse(u.node, u.offset), h.collapsed || (e.removeAllRanges(), e.addRange(h))) : (e.removeAllRanges(), e.addRange(h)), p && null == e.anchorNode ? e.addRange(p) : r && this.startGracePeriod()), this.rememberSelection();\n            } else e.removeAllRanges();\n          }\n        }\n      }, Rl.prototype.startGracePeriod = function () {\n        var e = this;\n        clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function () {\n          e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function () {\n            return e.cm.curOp.selectionChanged = !0;\n          });\n        }, 20);\n      }, Rl.prototype.showMultipleSelections = function (e) {\n        O(this.cm.display.cursorDiv, e.cursors), O(this.cm.display.selectionDiv, e.selection);\n      }, Rl.prototype.rememberSelection = function () {\n        var e = this.getSelection();\n        this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset;\n      }, Rl.prototype.selectionInEditor = function () {\n        var e = this.getSelection();\n        if (!e.rangeCount) return !1;\n        var t = e.getRangeAt(0).commonAncestorContainer;\n        return D(this.div, t);\n      }, Rl.prototype.focus = function () {\n        \"nocursor\" != this.cm.options.readOnly && (this.selectionInEditor() || this.showSelection(this.prepareSelection(), !0), this.div.focus());\n      }, Rl.prototype.blur = function () {\n        this.div.blur();\n      }, Rl.prototype.getField = function () {\n        return this.div;\n      }, Rl.prototype.supportsTouch = function () {\n        return !0;\n      }, Rl.prototype.receivedFocus = function () {\n        var e = this;\n        this.selectionInEditor() ? this.pollSelection() : Qn(this.cm, function () {\n          return e.cm.curOp.selectionChanged = !0;\n        }), this.polling.set(this.cm.options.pollInterval, function t() {\n          e.cm.state.focused && (e.pollSelection(), e.polling.set(e.cm.options.pollInterval, t));\n        });\n      }, Rl.prototype.selectionChanged = function () {\n        var e = this.getSelection();\n        return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset;\n      }, Rl.prototype.pollSelection = function () {\n        if (null == this.readDOMTimeout && !this.gracePeriod && this.selectionChanged()) {\n          var e = this.getSelection(),\n            t = this.cm;\n          if (g && c && this.cm.display.gutterSpecs.length && function (e) {\n            for (var t = e; t; t = t.parentNode) if (/CodeMirror-gutter-wrapper/.test(t.className)) return !0;\n            return !1;\n          }(e.anchorNode)) return this.cm.triggerOnKeyDown({\n            type: \"keydown\",\n            keyCode: 8,\n            preventDefault: Math.abs\n          }), this.blur(), void this.focus();\n          if (!this.composing) {\n            this.rememberSelection();\n            var r = Vl(t, e.anchorNode, e.anchorOffset),\n              n = Vl(t, e.focusNode, e.focusOffset);\n            r && n && Qn(t, function () {\n              Qi(t.doc, Mi(r, n), B), (r.bad || n.bad) && (t.curOp.selectionChanged = !0);\n            });\n          }\n        }\n      }, Rl.prototype.pollContent = function () {\n        null != this.readDOMTimeout && (clearTimeout(this.readDOMTimeout), this.readDOMTimeout = null);\n        var e,\n          t,\n          r,\n          n = this.cm,\n          i = n.display,\n          o = n.doc.sel.primary(),\n          l = o.from(),\n          a = o.to();\n        if (0 == l.ch && l.line > n.firstLine() && (l = et(l.line - 1, Ke(n.doc, l.line - 1).length)), a.ch == Ke(n.doc, a.line).text.length && a.line < n.lastLine() && (a = et(a.line + 1, 0)), l.line < i.viewFrom || a.line > i.viewTo - 1) return !1;\n        l.line == i.viewFrom || 0 == (e = cn(n, l.line)) ? (t = Ye(i.view[0].line), r = i.view[0].node) : (t = Ye(i.view[e].line), r = i.view[e - 1].node.nextSibling);\n        var s,\n          u,\n          c = cn(n, a.line);\n        if (c == i.view.length - 1 ? (s = i.viewTo - 1, u = i.lineDiv.lastChild) : (s = Ye(i.view[c + 1].line) - 1, u = i.view[c + 1].node.previousSibling), !r) return !1;\n        for (var d = n.doc.splitLines(function (e, t, r, n, i) {\n            var o = \"\",\n              l = !1,\n              a = e.doc.lineSeparator(),\n              s = !1;\n            function u() {\n              l && (o += a, s && (o += a), l = s = !1);\n            }\n            function c(e) {\n              e && (u(), o += e);\n            }\n            function d(t) {\n              if (1 == t.nodeType) {\n                var r = t.getAttribute(\"cm-text\");\n                if (r) return void c(r);\n                var o,\n                  f = t.getAttribute(\"cm-marker\");\n                if (f) {\n                  var h = e.findMarks(et(n, 0), et(i + 1, 0), (g = +f, function (e) {\n                    return e.id == g;\n                  }));\n                  return void (h.length && (o = h[0].find(0)) && c($e(e.doc, o.from, o.to).join(a)));\n                }\n                if (\"false\" == t.getAttribute(\"contenteditable\")) return;\n                var p = /^(pre|div|p|li|table|br)$/i.test(t.nodeName);\n                if (!/^br$/i.test(t.nodeName) && 0 == t.textContent.length) return;\n                p && u();\n                for (var v = 0; v < t.childNodes.length; v++) d(t.childNodes[v]);\n                /^(pre|p)$/i.test(t.nodeName) && (s = !0), p && (l = !0);\n              } else 3 == t.nodeType && c(t.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n              var g;\n            }\n            for (; d(t), t != r;) t = t.nextSibling, s = !1;\n            return o;\n          }(n, r, u, t, s)), f = $e(n.doc, et(t, 0), et(s, Ke(n.doc, s).text.length)); d.length > 1 && f.length > 1;) if (X(d) == X(f)) d.pop(), f.pop(), s--;else {\n          if (d[0] != f[0]) break;\n          d.shift(), f.shift(), t++;\n        }\n        for (var h = 0, p = 0, v = d[0], g = f[0], m = Math.min(v.length, g.length); h < m && v.charCodeAt(h) == g.charCodeAt(h);) ++h;\n        for (var y = X(d), b = X(f), w = Math.min(y.length - (1 == d.length ? h : 0), b.length - (1 == f.length ? h : 0)); p < w && y.charCodeAt(y.length - p - 1) == b.charCodeAt(b.length - p - 1);) ++p;\n        if (1 == d.length && 1 == f.length && t == l.line) for (; h && h > l.ch && y.charCodeAt(y.length - p - 1) == b.charCodeAt(b.length - p - 1);) h--, p++;\n        d[d.length - 1] = y.slice(0, y.length - p).replace(/^\\u200b+/, \"\"), d[0] = d[0].slice(h).replace(/\\u200b+$/, \"\");\n        var x = et(t, h),\n          C = et(s, f.length ? X(f).length - p : 0);\n        return d.length > 1 || d[0] || tt(x, C) ? (vo(n.doc, d, x, C, \"+input\"), !0) : void 0;\n      }, Rl.prototype.ensurePolled = function () {\n        this.forceCompositionEnd();\n      }, Rl.prototype.reset = function () {\n        this.forceCompositionEnd();\n      }, Rl.prototype.forceCompositionEnd = function () {\n        this.composing && (clearTimeout(this.readDOMTimeout), this.composing = null, this.updateFromDOM(), this.div.blur(), this.div.focus());\n      }, Rl.prototype.readFromDOMSoon = function () {\n        var e = this;\n        null == this.readDOMTimeout && (this.readDOMTimeout = setTimeout(function () {\n          if (e.readDOMTimeout = null, e.composing) {\n            if (!e.composing.done) return;\n            e.composing = null;\n          }\n          e.updateFromDOM();\n        }, 80));\n      }, Rl.prototype.updateFromDOM = function () {\n        var e = this;\n        !this.cm.isReadOnly() && this.pollContent() || Qn(this.cm, function () {\n          return dn(e.cm);\n        });\n      }, Rl.prototype.setUneditable = function (e) {\n        e.contentEditable = \"false\";\n      }, Rl.prototype.onKeyPress = function (e) {\n        0 == e.charCode || this.composing || (e.preventDefault(), this.cm.isReadOnly() || ei(this.cm, Pl)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0));\n      }, Rl.prototype.readOnlyChanged = function (e) {\n        this.div.contentEditable = String(\"nocursor\" != e);\n      }, Rl.prototype.onContextMenu = function () {}, Rl.prototype.resetPosition = function () {}, Rl.prototype.needsContentAttribute = !0;\n      var Ul = function (e) {\n        this.cm = e, this.prevInput = \"\", this.pollingFast = !1, this.polling = new _(), this.hasSelection = !1, this.composing = null;\n      };\n      Ul.prototype.init = function (e) {\n        var t = this,\n          r = this,\n          n = this.cm;\n        this.createField(e);\n        var i = this.textarea;\n        function o(e) {\n          if (!ve(n, e)) {\n            if (n.somethingSelected()) Dl({\n              lineWise: !1,\n              text: n.getSelections()\n            });else {\n              if (!n.options.lineWiseCopyCut) return;\n              var t = Wl(n);\n              Dl({\n                lineWise: !0,\n                text: t.text\n              }), \"cut\" == e.type ? n.setSelections(t.ranges, null, B) : (r.prevInput = \"\", i.value = t.text.join(\"\\n\"), W(i));\n            }\n            \"cut\" == e.type && (n.state.cutIncoming = +new Date());\n          }\n        }\n        e.wrapper.insertBefore(this.wrapper, e.wrapper.firstChild), v && (i.style.width = \"0px\"), de(i, \"input\", function () {\n          l && a >= 9 && t.hasSelection && (t.hasSelection = null), r.poll();\n        }), de(i, \"paste\", function (e) {\n          ve(n, e) || El(e, n) || (n.state.pasteIncoming = +new Date(), r.fastPoll());\n        }), de(i, \"cut\", o), de(i, \"copy\", o), de(e.scroller, \"paste\", function (t) {\n          if (!xr(e, t) && !ve(n, t)) {\n            if (!i.dispatchEvent) return n.state.pasteIncoming = +new Date(), void r.focus();\n            var o = new Event(\"paste\");\n            o.clipboardData = t.clipboardData, i.dispatchEvent(o);\n          }\n        }), de(e.lineSpace, \"selectstart\", function (t) {\n          xr(e, t) || be(t);\n        }), de(i, \"compositionstart\", function () {\n          var e = n.getCursor(\"from\");\n          r.composing && r.composing.range.clear(), r.composing = {\n            start: e,\n            range: n.markText(e, n.getCursor(\"to\"), {\n              className: \"CodeMirror-composing\"\n            })\n          };\n        }), de(i, \"compositionend\", function () {\n          r.composing && (r.poll(), r.composing.range.clear(), r.composing = null);\n        });\n      }, Ul.prototype.createField = function (e) {\n        this.wrapper = Fl(), this.textarea = this.wrapper.firstChild;\n      }, Ul.prototype.prepareSelection = function () {\n        var e = this.cm,\n          t = e.display,\n          r = e.doc,\n          n = mn(e);\n        if (e.options.moveInputWithCursor) {\n          var i = Kr(e, r.sel.primary().head, \"div\"),\n            o = t.wrapper.getBoundingClientRect(),\n            l = t.lineDiv.getBoundingClientRect();\n          n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + l.top - o.top)), n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + l.left - o.left));\n        }\n        return n;\n      }, Ul.prototype.showSelection = function (e) {\n        var t = this.cm.display;\n        O(t.cursorDiv, e.cursors), O(t.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + \"px\", this.wrapper.style.left = e.teLeft + \"px\");\n      }, Ul.prototype.reset = function (e) {\n        if (!this.contextMenuPending && !this.composing) {\n          var t = this.cm;\n          if (t.somethingSelected()) {\n            this.prevInput = \"\";\n            var r = t.getSelection();\n            this.textarea.value = r, t.state.focused && W(this.textarea), l && a >= 9 && (this.hasSelection = r);\n          } else e || (this.prevInput = this.textarea.value = \"\", l && a >= 9 && (this.hasSelection = null));\n        }\n      }, Ul.prototype.getField = function () {\n        return this.textarea;\n      }, Ul.prototype.supportsTouch = function () {\n        return !1;\n      }, Ul.prototype.focus = function () {\n        if (\"nocursor\" != this.cm.options.readOnly && (!m || P() != this.textarea)) try {\n          this.textarea.focus();\n        } catch (e) {}\n      }, Ul.prototype.blur = function () {\n        this.textarea.blur();\n      }, Ul.prototype.resetPosition = function () {\n        this.wrapper.style.top = this.wrapper.style.left = 0;\n      }, Ul.prototype.receivedFocus = function () {\n        this.slowPoll();\n      }, Ul.prototype.slowPoll = function () {\n        var e = this;\n        this.pollingFast || this.polling.set(this.cm.options.pollInterval, function () {\n          e.poll(), e.cm.state.focused && e.slowPoll();\n        });\n      }, Ul.prototype.fastPoll = function () {\n        var e = !1,\n          t = this;\n        t.pollingFast = !0, t.polling.set(20, function r() {\n          t.poll() || e ? (t.pollingFast = !1, t.slowPoll()) : (e = !0, t.polling.set(60, r));\n        });\n      }, Ul.prototype.poll = function () {\n        var e = this,\n          t = this.cm,\n          r = this.textarea,\n          n = this.prevInput;\n        if (this.contextMenuPending || !t.state.focused || Pe(r) && !n && !this.composing || t.isReadOnly() || t.options.disableInput || t.state.keySeq) return !1;\n        var i = r.value;\n        if (i == n && !t.somethingSelected()) return !1;\n        if (l && a >= 9 && this.hasSelection === i || y && /[\\uf700-\\uf7ff]/.test(i)) return t.display.input.reset(), !1;\n        if (t.doc.sel == t.display.selForContextMenu) {\n          var o = i.charCodeAt(0);\n          if (8203 != o || n || (n = \"​\"), 8666 == o) return this.reset(), this.cm.execCommand(\"undo\");\n        }\n        for (var s = 0, u = Math.min(n.length, i.length); s < u && n.charCodeAt(s) == i.charCodeAt(s);) ++s;\n        return Qn(t, function () {\n          Pl(t, i.slice(s), n.length - s, null, e.composing ? \"*compose\" : null), i.length > 1e3 || i.indexOf(\"\\n\") > -1 ? r.value = e.prevInput = \"\" : e.prevInput = i, e.composing && (e.composing.range.clear(), e.composing.range = t.markText(e.composing.start, t.getCursor(\"to\"), {\n            className: \"CodeMirror-composing\"\n          }));\n        }), !0;\n      }, Ul.prototype.ensurePolled = function () {\n        this.pollingFast && this.poll() && (this.pollingFast = !1);\n      }, Ul.prototype.onKeyPress = function () {\n        l && a >= 9 && (this.hasSelection = null), this.fastPoll();\n      }, Ul.prototype.onContextMenu = function (e) {\n        var t = this,\n          r = t.cm,\n          n = r.display,\n          i = t.textarea;\n        t.contextMenuPending && t.contextMenuPending();\n        var o = un(r, e),\n          u = n.scroller.scrollTop;\n        if (o && !d) {\n          r.options.resetSelectionOnContextMenu && -1 == r.doc.sel.contains(o) && ei(r, Qi)(r.doc, Mi(o), B);\n          var c,\n            f = i.style.cssText,\n            h = t.wrapper.style.cssText,\n            p = t.wrapper.offsetParent.getBoundingClientRect();\n          if (t.wrapper.style.cssText = \"position: static\", i.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - p.top - 5) + \"px; left: \" + (e.clientX - p.left - 5) + \"px;\\n      z-index: 1000; background: \" + (l ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\", s && (c = window.scrollY), n.input.focus(), s && window.scrollTo(null, c), n.input.reset(), r.somethingSelected() || (i.value = t.prevInput = \" \"), t.contextMenuPending = m, n.selForContextMenu = r.doc.sel, clearTimeout(n.detectingSelectAll), l && a >= 9 && g(), k) {\n            Ce(e);\n            var v = function () {\n              he(window, \"mouseup\", v), setTimeout(m, 20);\n            };\n            de(window, \"mouseup\", v);\n          } else setTimeout(m, 50);\n        }\n        function g() {\n          if (null != i.selectionStart) {\n            var e = r.somethingSelected(),\n              o = \"​\" + (e ? i.value : \"\");\n            i.value = \"⇚\", i.value = o, t.prevInput = e ? \"\" : \"​\", i.selectionStart = 1, i.selectionEnd = o.length, n.selForContextMenu = r.doc.sel;\n          }\n        }\n        function m() {\n          if (t.contextMenuPending == m && (t.contextMenuPending = !1, t.wrapper.style.cssText = h, i.style.cssText = f, l && a < 9 && n.scrollbars.setScrollTop(n.scroller.scrollTop = u), null != i.selectionStart)) {\n            (!l || l && a < 9) && g();\n            var e = 0,\n              o = function () {\n                n.selForContextMenu == r.doc.sel && 0 == i.selectionStart && i.selectionEnd > 0 && \"​\" == t.prevInput ? ei(r, ao)(r) : e++ < 10 ? n.detectingSelectAll = setTimeout(o, 500) : (n.selForContextMenu = null, n.input.reset());\n              };\n            n.detectingSelectAll = setTimeout(o, 200);\n          }\n        }\n      }, Ul.prototype.readOnlyChanged = function (e) {\n        e || this.reset(), this.textarea.disabled = \"nocursor\" == e;\n      }, Ul.prototype.setUneditable = function () {}, Ul.prototype.needsContentAttribute = !1, function (e) {\n        var t = e.optionHandlers;\n        function r(r, n, i, o) {\n          e.defaults[r] = n, i && (t[r] = o ? function (e, t, r) {\n            r != Cl && i(e, t, r);\n          } : i);\n        }\n        e.defineOption = r, e.Init = Cl, r(\"value\", \"\", function (e, t) {\n          return e.setValue(t);\n        }, !0), r(\"mode\", null, function (e, t) {\n          e.doc.modeOption = t, Ai(e);\n        }, !0), r(\"indentUnit\", 2, Ai, !0), r(\"indentWithTabs\", !1), r(\"smartIndent\", !0), r(\"tabSize\", 4, function (e) {\n          Di(e), _r(e), dn(e);\n        }, !0), r(\"lineSeparator\", null, function (e, t) {\n          if (e.doc.lineSep = t, t) {\n            var r = [],\n              n = e.doc.first;\n            e.doc.iter(function (e) {\n              for (var i = 0;;) {\n                var o = e.text.indexOf(t, i);\n                if (-1 == o) break;\n                i = o + t.length, r.push(et(n, o));\n              }\n              n++;\n            });\n            for (var i = r.length - 1; i >= 0; i--) vo(e.doc, t, r[i], et(r[i].line, r[i].ch + t.length));\n          }\n        }), r(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (e, t, r) {\n          e.state.specialChars = new RegExp(t.source + (t.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\"), r != Cl && e.refresh();\n        }), r(\"specialCharPlaceholder\", Jt, function (e) {\n          return e.refresh();\n        }, !0), r(\"electricChars\", !0), r(\"inputStyle\", m ? \"contenteditable\" : \"textarea\", function () {\n          throw new Error(\"inputStyle can not (yet) be changed in a running editor\");\n        }, !0), r(\"spellcheck\", !1, function (e, t) {\n          return e.getInputField().spellcheck = t;\n        }, !0), r(\"autocorrect\", !1, function (e, t) {\n          return e.getInputField().autocorrect = t;\n        }, !0), r(\"autocapitalize\", !1, function (e, t) {\n          return e.getInputField().autocapitalize = t;\n        }, !0), r(\"rtlMoveVisually\", !w), r(\"wholeLineUpdateBefore\", !0), r(\"theme\", \"default\", function (e) {\n          xl(e), vi(e);\n        }, !0), r(\"keyMap\", \"default\", function (e, t, r) {\n          var n = Yo(t),\n            i = r != Cl && Yo(r);\n          i && i.detach && i.detach(e, n), n.attach && n.attach(e, i || null);\n        }), r(\"extraKeys\", null), r(\"configureMouse\", null), r(\"lineWrapping\", !1, Ll, !0), r(\"gutters\", [], function (e, t) {\n          e.display.gutterSpecs = hi(t, e.options.lineNumbers), vi(e);\n        }, !0), r(\"fixedGutter\", !0, function (e, t) {\n          e.display.gutters.style.left = t ? ln(e.display) + \"px\" : \"0\", e.refresh();\n        }, !0), r(\"coverGutterNextToScrollbar\", !1, function (e) {\n          return jn(e);\n        }, !0), r(\"scrollbarStyle\", \"native\", function (e) {\n          Gn(e), jn(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft);\n        }, !0), r(\"lineNumbers\", !1, function (e, t) {\n          e.display.gutterSpecs = hi(e.options.gutters, t), vi(e);\n        }, !0), r(\"firstLineNumber\", 1, vi, !0), r(\"lineNumberFormatter\", function (e) {\n          return e;\n        }, vi, !0), r(\"showCursorWhenSelecting\", !1, gn, !0), r(\"resetSelectionOnContextMenu\", !0), r(\"lineWiseCopyCut\", !0), r(\"pasteLinesPerSelection\", !0), r(\"selectionsMayTouch\", !1), r(\"readOnly\", !1, function (e, t) {\n          \"nocursor\" == t && (Mn(e), e.display.input.blur()), e.display.input.readOnlyChanged(t);\n        }), r(\"disableInput\", !1, function (e, t) {\n          t || e.display.input.reset();\n        }, !0), r(\"dragDrop\", !0, Ml), r(\"allowDropFileTypes\", null), r(\"cursorBlinkRate\", 530), r(\"cursorScrollMargin\", 0), r(\"cursorHeight\", 1, gn, !0), r(\"singleCursorHeightPerLine\", !0, gn, !0), r(\"workTime\", 100), r(\"workDelay\", 100), r(\"flattenSpans\", !0, Di, !0), r(\"addModeClass\", !1, Di, !0), r(\"pollInterval\", 100), r(\"undoDepth\", 200, function (e, t) {\n          return e.doc.history.undoDepth = t;\n        }), r(\"historyEventDelay\", 1250), r(\"viewportMargin\", 10, function (e) {\n          return e.refresh();\n        }, !0), r(\"maxHighlightLength\", 1e4, Di, !0), r(\"moveInputWithCursor\", !0, function (e, t) {\n          t || e.display.input.resetPosition();\n        }), r(\"tabindex\", null, function (e, t) {\n          return e.display.input.getField().tabIndex = t || \"\";\n        }), r(\"autofocus\", null), r(\"direction\", \"ltr\", function (e, t) {\n          return e.doc.setDirection(t);\n        }, !0), r(\"phrases\", null);\n      }(Tl), function (e) {\n        var t = e.optionHandlers,\n          r = e.helpers = {};\n        e.prototype = {\n          constructor: e,\n          focus: function () {\n            window.focus(), this.display.input.focus();\n          },\n          setOption: function (e, r) {\n            var n = this.options,\n              i = n[e];\n            n[e] == r && \"mode\" != e || (n[e] = r, t.hasOwnProperty(e) && ei(this, t[e])(this, r, i), pe(this, \"optionChange\", this, e));\n          },\n          getOption: function (e) {\n            return this.options[e];\n          },\n          getDoc: function () {\n            return this.doc;\n          },\n          addKeyMap: function (e, t) {\n            this.state.keyMaps[t ? \"push\" : \"unshift\"](Yo(e));\n          },\n          removeKeyMap: function (e) {\n            for (var t = this.state.keyMaps, r = 0; r < t.length; ++r) if (t[r] == e || t[r].name == e) return t.splice(r, 1), !0;\n          },\n          addOverlay: ti(function (t, r) {\n            var n = t.token ? t : e.getMode(this.options, t);\n            if (n.startState) throw new Error(\"Overlays may not be stateful.\");\n            !function (e, t, r) {\n              for (var n = 0, i = r(t); n < e.length && r(e[n]) <= i;) n++;\n              e.splice(n, 0, t);\n            }(this.state.overlays, {\n              mode: n,\n              modeSpec: t,\n              opaque: r && r.opaque,\n              priority: r && r.priority || 0\n            }, function (e) {\n              return e.priority;\n            }), this.state.modeGen++, dn(this);\n          }),\n          removeOverlay: ti(function (e) {\n            for (var t = this.state.overlays, r = 0; r < t.length; ++r) {\n              var n = t[r].modeSpec;\n              if (n == e || \"string\" == typeof e && n.name == e) return t.splice(r, 1), this.state.modeGen++, void dn(this);\n            }\n          }),\n          indentLine: ti(function (e, t, r) {\n            \"string\" != typeof t && \"number\" != typeof t && (t = null == t ? this.options.smartIndent ? \"smart\" : \"prev\" : t ? \"add\" : \"subtract\"), Je(this.doc, e) && Nl(this, e, t, r);\n          }),\n          indentSelection: ti(function (e) {\n            for (var t = this.doc.sel.ranges, r = -1, n = 0; n < t.length; n++) {\n              var i = t[n];\n              if (i.empty()) i.head.line > r && (Nl(this, i.head.line, e, !0), r = i.head.line, n == this.doc.sel.primIndex && Dn(this));else {\n                var o = i.from(),\n                  l = i.to(),\n                  a = Math.max(r, o.line);\n                r = Math.min(this.lastLine(), l.line - (l.ch ? 0 : 1)) + 1;\n                for (var s = a; s < r; ++s) Nl(this, s, e);\n                var u = this.doc.sel.ranges;\n                0 == o.ch && t.length == u.length && u[n].from().ch > 0 && Yi(this.doc, n, new ki(o, u[n].to()), B);\n              }\n            }\n          }),\n          getTokenAt: function (e, t) {\n            return yt(this, e, t);\n          },\n          getLineTokens: function (e, t) {\n            return yt(this, et(e), t, !0);\n          },\n          getTokenTypeAt: function (e) {\n            e = at(this.doc, e);\n            var t,\n              r = ft(this, Ke(this.doc, e.line)),\n              n = 0,\n              i = (r.length - 1) / 2,\n              o = e.ch;\n            if (0 == o) t = r[2];else for (;;) {\n              var l = n + i >> 1;\n              if ((l ? r[2 * l - 1] : 0) >= o) i = l;else {\n                if (!(r[2 * l + 1] < o)) {\n                  t = r[2 * l + 2];\n                  break;\n                }\n                n = l + 1;\n              }\n            }\n            var a = t ? t.indexOf(\"overlay \") : -1;\n            return a < 0 ? t : 0 == a ? null : t.slice(0, a - 1);\n          },\n          getModeAt: function (t) {\n            var r = this.doc.mode;\n            return r.innerMode ? e.innerMode(r, this.getTokenAt(t).state).mode : r;\n          },\n          getHelper: function (e, t) {\n            return this.getHelpers(e, t)[0];\n          },\n          getHelpers: function (e, t) {\n            var n = [];\n            if (!r.hasOwnProperty(t)) return n;\n            var i = r[t],\n              o = this.getModeAt(e);\n            if (\"string\" == typeof o[t]) i[o[t]] && n.push(i[o[t]]);else if (o[t]) for (var l = 0; l < o[t].length; l++) {\n              var a = i[o[t][l]];\n              a && n.push(a);\n            } else o.helperType && i[o.helperType] ? n.push(i[o.helperType]) : i[o.name] && n.push(i[o.name]);\n            for (var s = 0; s < i._global.length; s++) {\n              var u = i._global[s];\n              u.pred(o, this) && -1 == R(n, u.val) && n.push(u.val);\n            }\n            return n;\n          },\n          getStateAfter: function (e, t) {\n            var r = this.doc;\n            return ht(this, (e = lt(r, null == e ? r.first + r.size - 1 : e)) + 1, t).state;\n          },\n          cursorCoords: function (e, t) {\n            var r = this.doc.sel.primary();\n            return Kr(this, null == e ? r.head : \"object\" == typeof e ? at(this.doc, e) : e ? r.from() : r.to(), t || \"page\");\n          },\n          charCoords: function (e, t) {\n            return Ur(this, at(this.doc, e), t || \"page\");\n          },\n          coordsChar: function (e, t) {\n            return qr(this, (e = Gr(this, e, t || \"page\")).left, e.top);\n          },\n          lineAtHeight: function (e, t) {\n            return e = Gr(this, {\n              top: e,\n              left: 0\n            }, t || \"page\").top, Ze(this.doc, e + this.display.viewOffset);\n          },\n          heightAtLine: function (e, t, r) {\n            var n,\n              i = !1;\n            if (\"number\" == typeof e) {\n              var o = this.doc.first + this.doc.size - 1;\n              e < this.doc.first ? e = this.doc.first : e > o && (e = o, i = !0), n = Ke(this.doc, e);\n            } else n = e;\n            return Vr(this, n, {\n              top: 0,\n              left: 0\n            }, t || \"page\", r || i).top + (i ? this.doc.height - Vt(n) : 0);\n          },\n          defaultTextHeight: function () {\n            return rn(this.display);\n          },\n          defaultCharWidth: function () {\n            return nn(this.display);\n          },\n          getViewport: function () {\n            return {\n              from: this.display.viewFrom,\n              to: this.display.viewTo\n            };\n          },\n          addWidget: function (e, t, r, n, i) {\n            var o,\n              l,\n              a,\n              s = this.display,\n              u = (e = Kr(this, at(this.doc, e))).bottom,\n              c = e.left;\n            if (t.style.position = \"absolute\", t.setAttribute(\"cm-ignore-events\", \"true\"), this.display.input.setUneditable(t), s.sizer.appendChild(t), \"over\" == n) u = e.top;else if (\"above\" == n || \"near\" == n) {\n              var d = Math.max(s.wrapper.clientHeight, this.doc.height),\n                f = Math.max(s.sizer.clientWidth, s.lineSpace.clientWidth);\n              (\"above\" == n || e.bottom + t.offsetHeight > d) && e.top > t.offsetHeight ? u = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= d && (u = e.bottom), c + t.offsetWidth > f && (c = f - t.offsetWidth);\n            }\n            t.style.top = u + \"px\", t.style.left = t.style.right = \"\", \"right\" == i ? (c = s.sizer.clientWidth - t.offsetWidth, t.style.right = \"0px\") : (\"left\" == i ? c = 0 : \"middle\" == i && (c = (s.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = c + \"px\"), r && (o = this, l = {\n              left: c,\n              top: u,\n              right: c + t.offsetWidth,\n              bottom: u + t.offsetHeight\n            }, null != (a = Nn(o, l)).scrollTop && Wn(o, a.scrollTop), null != a.scrollLeft && Fn(o, a.scrollLeft));\n          },\n          triggerOnKeyDown: ti(cl),\n          triggerOnKeyPress: ti(fl),\n          triggerOnKeyUp: dl,\n          triggerOnMouseDown: ti(gl),\n          execCommand: function (e) {\n            if (tl.hasOwnProperty(e)) return tl[e].call(null, this);\n          },\n          triggerElectric: ti(function (e) {\n            Hl(this, e);\n          }),\n          findPosH: function (e, t, r, n) {\n            var i = 1;\n            t < 0 && (i = -1, t = -t);\n            for (var o = at(this.doc, e), l = 0; l < t && !(o = zl(this.doc, o, i, r, n)).hitSide; ++l);\n            return o;\n          },\n          moveH: ti(function (e, t) {\n            var r = this;\n            this.extendSelectionsBy(function (n) {\n              return r.display.shift || r.doc.extend || n.empty() ? zl(r.doc, n.head, e, t, r.options.rtlMoveVisually) : e < 0 ? n.from() : n.to();\n            }, G);\n          }),\n          deleteH: ti(function (e, t) {\n            var r = this.doc.sel,\n              n = this.doc;\n            r.somethingSelected() ? n.replaceSelection(\"\", null, \"+delete\") : Zo(this, function (r) {\n              var i = zl(n, r.head, e, t, !1);\n              return e < 0 ? {\n                from: i,\n                to: r.head\n              } : {\n                from: r.head,\n                to: i\n              };\n            });\n          }),\n          findPosV: function (e, t, r, n) {\n            var i = 1,\n              o = n;\n            t < 0 && (i = -1, t = -t);\n            for (var l = at(this.doc, e), a = 0; a < t; ++a) {\n              var s = Kr(this, l, \"div\");\n              if (null == o ? o = s.left : s.left = o, (l = _l(this, s, i, r)).hitSide) break;\n            }\n            return l;\n          },\n          moveV: ti(function (e, t) {\n            var r = this,\n              n = this.doc,\n              i = [],\n              o = !this.display.shift && !n.extend && n.sel.somethingSelected();\n            if (n.extendSelectionsBy(function (l) {\n              if (o) return e < 0 ? l.from() : l.to();\n              var a = Kr(r, l.head, \"div\");\n              null != l.goalColumn && (a.left = l.goalColumn), i.push(a.left);\n              var s = _l(r, a, e, t);\n              return \"page\" == t && l == n.sel.primary() && An(r, Ur(r, s, \"div\").top - a.top), s;\n            }, G), i.length) for (var l = 0; l < n.sel.ranges.length; l++) n.sel.ranges[l].goalColumn = i[l];\n          }),\n          findWordAt: function (e) {\n            var t = Ke(this.doc, e.line).text,\n              r = e.ch,\n              n = e.ch;\n            if (t) {\n              var i = this.getHelper(e, \"wordChars\");\n              \"before\" != e.sticky && n != t.length || !r ? ++n : --r;\n              for (var o = t.charAt(r), l = ee(o, i) ? function (e) {\n                  return ee(e, i);\n                } : /\\s/.test(o) ? function (e) {\n                  return /\\s/.test(e);\n                } : function (e) {\n                  return !/\\s/.test(e) && !ee(e);\n                }; r > 0 && l(t.charAt(r - 1));) --r;\n              for (; n < t.length && l(t.charAt(n));) ++n;\n            }\n            return new ki(et(e.line, r), et(e.line, n));\n          },\n          toggleOverwrite: function (e) {\n            null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? E(this.display.cursorDiv, \"CodeMirror-overwrite\") : L(this.display.cursorDiv, \"CodeMirror-overwrite\"), pe(this, \"overwriteToggle\", this, this.state.overwrite));\n          },\n          hasFocus: function () {\n            return this.display.input.getField() == P();\n          },\n          isReadOnly: function () {\n            return !(!this.options.readOnly && !this.doc.cantEdit);\n          },\n          scrollTo: ti(function (e, t) {\n            Pn(this, e, t);\n          }),\n          getScrollInfo: function () {\n            var e = this.display.scroller;\n            return {\n              left: e.scrollLeft,\n              top: e.scrollTop,\n              height: e.scrollHeight - Mr(this) - this.display.barHeight,\n              width: e.scrollWidth - Mr(this) - this.display.barWidth,\n              clientHeight: Tr(this),\n              clientWidth: Lr(this)\n            };\n          },\n          scrollIntoView: ti(function (e, t) {\n            null == e ? (e = {\n              from: this.doc.sel.primary().head,\n              to: null\n            }, null == t && (t = this.options.cursorScrollMargin)) : \"number\" == typeof e ? e = {\n              from: et(e, 0),\n              to: null\n            } : null == e.from && (e = {\n              from: e,\n              to: null\n            }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line ? function (e, t) {\n              En(e), e.curOp.scrollToPos = t;\n            }(this, e) : Hn(this, e.from, e.to, e.margin);\n          }),\n          setSize: ti(function (e, t) {\n            var r = this,\n              n = function (e) {\n                return \"number\" == typeof e || /^\\d+$/.test(String(e)) ? e + \"px\" : e;\n              };\n            null != e && (this.display.wrapper.style.width = n(e)), null != t && (this.display.wrapper.style.height = n(t)), this.options.lineWrapping && zr(this);\n            var i = this.display.viewFrom;\n            this.doc.iter(i, this.display.viewTo, function (e) {\n              if (e.widgets) for (var t = 0; t < e.widgets.length; t++) if (e.widgets[t].noHScroll) {\n                fn(r, i, \"widget\");\n                break;\n              }\n              ++i;\n            }), this.curOp.forceUpdate = !0, pe(this, \"refresh\", this);\n          }),\n          operation: function (e) {\n            return Qn(this, e);\n          },\n          startOperation: function () {\n            return Kn(this);\n          },\n          endOperation: function () {\n            return $n(this);\n          },\n          refresh: ti(function () {\n            var e = this.display.cachedTextHeight;\n            dn(this), this.curOp.forceUpdate = !0, _r(this), Pn(this, this.doc.scrollLeft, this.doc.scrollTop), ui(this.display), (null == e || Math.abs(e - rn(this.display)) > .5) && sn(this), pe(this, \"refresh\", this);\n          }),\n          swapDoc: ti(function (e) {\n            var t = this.doc;\n            return t.cm = null, this.state.selectingText && this.state.selectingText(), Wi(this, e), _r(this), this.display.input.reset(), Pn(this, e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, ar(this, \"swapDoc\", this, t), t;\n          }),\n          phrase: function (e) {\n            var t = this.options.phrases;\n            return t && Object.prototype.hasOwnProperty.call(t, e) ? t[e] : e;\n          },\n          getInputField: function () {\n            return this.display.input.getField();\n          },\n          getWrapperElement: function () {\n            return this.display.wrapper;\n          },\n          getScrollerElement: function () {\n            return this.display.scroller;\n          },\n          getGutterElement: function () {\n            return this.display.gutters;\n          }\n        }, ye(e), e.registerHelper = function (t, n, i) {\n          r.hasOwnProperty(t) || (r[t] = e[t] = {\n            _global: []\n          }), r[t][n] = i;\n        }, e.registerGlobalHelper = function (t, n, i, o) {\n          e.registerHelper(t, n, o), r[t]._global.push({\n            pred: i,\n            val: o\n          });\n        };\n      }(Tl);\n      var Kl = \"iter insert remove copy getEditor constructor\".split(\" \");\n      for (var $l in Do.prototype) Do.prototype.hasOwnProperty($l) && R(Kl, $l) < 0 && (Tl.prototype[$l] = function (e) {\n        return function () {\n          return e.apply(this.doc, arguments);\n        };\n      }(Do.prototype[$l]));\n      return ye(Do), Tl.inputStyles = {\n        textarea: Ul,\n        contenteditable: Rl\n      }, Tl.defineMode = function (e) {\n        Tl.defaults.mode || \"null\" == e || (Tl.defaults.mode = e), Fe.apply(this, arguments);\n      }, Tl.defineMIME = function (e, t) {\n        Ie[e] = t;\n      }, Tl.defineMode(\"null\", function () {\n        return {\n          token: function (e) {\n            return e.skipToEnd();\n          }\n        };\n      }), Tl.defineMIME(\"text/plain\", \"null\"), Tl.defineExtension = function (e, t) {\n        Tl.prototype[e] = t;\n      }, Tl.defineDocExtension = function (e, t) {\n        Do.prototype[e] = t;\n      }, Tl.fromTextArea = function (e, t) {\n        if ((t = t ? F(t) : {}).value = e.value, !t.tabindex && e.tabIndex && (t.tabindex = e.tabIndex), !t.placeholder && e.placeholder && (t.placeholder = e.placeholder), null == t.autofocus) {\n          var r = P();\n          t.autofocus = r == e || null != e.getAttribute(\"autofocus\") && r == document.body;\n        }\n        function n() {\n          e.value = a.getValue();\n        }\n        var i;\n        if (e.form && (de(e.form, \"submit\", n), !t.leaveSubmitMethodAlone)) {\n          var o = e.form;\n          i = o.submit;\n          try {\n            var l = o.submit = function () {\n              n(), o.submit = i, o.submit(), o.submit = l;\n            };\n          } catch (e) {}\n        }\n        t.finishInit = function (r) {\n          r.save = n, r.getTextArea = function () {\n            return e;\n          }, r.toTextArea = function () {\n            r.toTextArea = isNaN, n(), e.parentNode.removeChild(r.getWrapperElement()), e.style.display = \"\", e.form && (he(e.form, \"submit\", n), t.leaveSubmitMethodAlone || \"function\" != typeof e.form.submit || (e.form.submit = i));\n          };\n        }, e.style.display = \"none\";\n        var a = Tl(function (t) {\n          return e.parentNode.insertBefore(t, e.nextSibling);\n        }, t);\n        return a;\n      }, function (e) {\n        e.off = he, e.on = de, e.wheelEventPixels = wi, e.Doc = Do, e.splitLines = De, e.countColumn = z, e.findColumn = U, e.isWordChar = Q, e.Pass = j, e.signal = pe, e.Line = Kt, e.changeEnd = Li, e.scrollbarModel = Vn, e.Pos = et, e.cmpPos = tt, e.modes = We, e.mimeModes = Ie, e.resolveMode = ze, e.getMode = _e, e.modeExtensions = Re, e.extendMode = je, e.copyState = Be, e.startState = Ge, e.innerMode = Ve, e.commands = tl, e.keyMap = Vo, e.keyName = qo, e.isModifierKey = $o, e.lookupKey = Ko, e.normalizeKeyMap = Uo, e.StringStream = Ue, e.SharedTextMarker = To, e.TextMarker = Mo, e.LineWidget = Co, e.e_preventDefault = be, e.e_stopPropagation = we, e.e_stop = Ce, e.addClass = E, e.contains = D, e.rmClass = L, e.keyNames = _o;\n      }(Tl), Tl.version = \"5.50.2\", Tl;\n    }();\n  }, function (e, t, r) {\n    \"use strict\";\n\n    (function (e, n) {\n      r.d(t, \"a\", function () {\n        return k;\n      }), r.d(t, \"b\", function () {\n        return S;\n      });\n      var i,\n        o,\n        l,\n        a = r(6),\n        s = r.n(a),\n        u = {},\n        c = u.allKeys = function (e) {\n          var t,\n            r = [];\n          for (t in e) r.push(t);\n          return r;\n        },\n        d = u.noop = function () {},\n        f = u.isUndef = function (e) {\n          return void 0 === e;\n        },\n        h = u.optimizeCb = function (e, t, r) {\n          if (f(t)) return e;\n          switch (null == r ? 3 : r) {\n            case 1:\n              return function (r) {\n                return e.call(t, r);\n              };\n            case 3:\n              return function (r, n, i) {\n                return e.call(t, r, n, i);\n              };\n            case 4:\n              return function (r, n, i, o) {\n                return e.call(t, r, n, i, o);\n              };\n          }\n          return function () {\n            return e.apply(t, arguments);\n          };\n        },\n        p = u.has = (i = Object.prototype.hasOwnProperty, function (e, t) {\n          return i.call(e, t);\n        }),\n        v = u.keys = Object.keys || function (e) {\n          var t,\n            r = [];\n          for (t in e) p(e, t) && r.push(t);\n          return r;\n        },\n        g = u.objToStr = (o = Object.prototype.toString, function (e) {\n          return o.call(e);\n        }),\n        m = u.isFn = function (e) {\n          var t = g(e);\n          return \"[object Function]\" === t || \"[object GeneratorFunction]\" === t;\n        },\n        y = u.isNum = function (e) {\n          return \"[object Number]\" === g(e);\n        },\n        b = u.isArrLike = (l = Math.pow(2, 53) - 1, function (e) {\n          if (!e) return !1;\n          var t = e.length;\n          return y(t) && t >= 0 && t <= l && !m(e);\n        }),\n        w = u.each = function (e, t, r) {\n          var n, i;\n          if (t = h(t, r), b(e)) for (n = 0, i = e.length; n < i; n++) t(e[n], n, e);else {\n            var o = v(e);\n            for (n = 0, i = o.length; n < i; n++) t(e[o[n]], o[n], e);\n          }\n          return e;\n        },\n        x = u.createAssigner = function (e, t) {\n          return function (r) {\n            return w(arguments, function (n, i) {\n              if (0 !== i) {\n                var o = e(n);\n                w(o, function (e) {\n                  t && !f(r[e]) || (r[e] = n[e]);\n                });\n              }\n            }), r;\n          };\n        },\n        C = u.extend = x(c),\n        k = u.copy = function (e, t) {\n          t = t || d;\n          var r = document.createElement(\"textarea\"),\n            n = document.body;\n          C(r.style, {\n            fontSize: \"12pt\",\n            border: \"0\",\n            padding: \"0\",\n            margin: \"0\",\n            position: \"absolute\",\n            left: \"-9999px\"\n          }), r.value = e, n.appendChild(r), r.setAttribute(\"readonly\", \"\"), r.select(), r.setSelectionRange(0, e.length);\n          try {\n            document.execCommand(\"copy\"), t();\n          } catch (e) {\n            t(e);\n          } finally {\n            n.removeChild(r);\n          }\n        },\n        S = u.nextTick = function (t) {\n          function r(e) {\n            if (\"function\" != typeof e) throw new TypeError(e + \" is not a function\");\n            return e;\n          }\n          return \"object\" === (void 0 === e ? \"undefined\" : s()(e)) && e.nextTick ? e.nextTick : \"function\" == typeof n ? function (e) {\n            n(r(e));\n          } : function (e) {\n            setTimeout(r(e), 0);\n          };\n        }();\n    }).call(this, r(9), r(22).setImmediate);\n  }, function (e, t) {\n    var r,\n      n,\n      i = e.exports = {};\n    function o() {\n      throw new Error(\"setTimeout has not been defined\");\n    }\n    function l() {\n      throw new Error(\"clearTimeout has not been defined\");\n    }\n    function a(e) {\n      if (r === setTimeout) return setTimeout(e, 0);\n      if ((r === o || !r) && setTimeout) return r = setTimeout, setTimeout(e, 0);\n      try {\n        return r(e, 0);\n      } catch (t) {\n        try {\n          return r.call(null, e, 0);\n        } catch (t) {\n          return r.call(this, e, 0);\n        }\n      }\n    }\n    !function () {\n      try {\n        r = \"function\" == typeof setTimeout ? setTimeout : o;\n      } catch (e) {\n        r = o;\n      }\n      try {\n        n = \"function\" == typeof clearTimeout ? clearTimeout : l;\n      } catch (e) {\n        n = l;\n      }\n    }();\n    var s,\n      u = [],\n      c = !1,\n      d = -1;\n    function f() {\n      c && s && (c = !1, s.length ? u = s.concat(u) : d = -1, u.length && h());\n    }\n    function h() {\n      if (!c) {\n        var e = a(f);\n        c = !0;\n        for (var t = u.length; t;) {\n          for (s = u, u = []; ++d < t;) s && s[d].run();\n          d = -1, t = u.length;\n        }\n        s = null, c = !1, function (e) {\n          if (n === clearTimeout) return clearTimeout(e);\n          if ((n === l || !n) && clearTimeout) return n = clearTimeout, clearTimeout(e);\n          try {\n            n(e);\n          } catch (t) {\n            try {\n              return n.call(null, e);\n            } catch (t) {\n              return n.call(this, e);\n            }\n          }\n        }(e);\n      }\n    }\n    function p(e, t) {\n      this.fun = e, this.array = t;\n    }\n    function v() {}\n    i.nextTick = function (e) {\n      var t = new Array(arguments.length - 1);\n      if (arguments.length > 1) for (var r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];\n      u.push(new p(e, t)), 1 !== u.length || c || a(h);\n    }, p.prototype.run = function () {\n      this.fun.apply(null, this.array);\n    }, i.title = \"browser\", i.browser = !0, i.env = {}, i.argv = [], i.version = \"\", i.versions = {}, i.on = v, i.addListener = v, i.once = v, i.off = v, i.removeListener = v, i.removeAllListeners = v, i.emit = v, i.prependListener = v, i.prependOnceListener = v, i.listeners = function (e) {\n      return [];\n    }, i.binding = function (e) {\n      throw new Error(\"process.binding is not supported\");\n    }, i.cwd = function () {\n      return \"/\";\n    }, i.chdir = function (e) {\n      throw new Error(\"process.chdir is not supported\");\n    }, i.umask = function () {\n      return 0;\n    };\n  }, function (e, t, r) {\n    \"use strict\";\n\n    function n(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n    t.__esModule = !0, t.HandlebarsEnvironment = u;\n    var i = r(0),\n      o = n(r(1)),\n      l = r(11),\n      a = r(37),\n      s = n(r(39));\n    t.VERSION = \"4.5.3\";\n    t.COMPILER_REVISION = 8;\n    t.LAST_COMPATIBLE_COMPILER_REVISION = 7;\n    t.REVISION_CHANGES = {\n      1: \"<= 1.0.rc.2\",\n      2: \"== 1.0.0-rc.3\",\n      3: \"== 1.0.0-rc.4\",\n      4: \"== 1.x.x\",\n      5: \"== 2.0.0-alpha.x\",\n      6: \">= 2.0.0-beta.1\",\n      7: \">= 4.0.0 <4.3.0\",\n      8: \">= 4.3.0\"\n    };\n    function u(e, t, r) {\n      this.helpers = e || {}, this.partials = t || {}, this.decorators = r || {}, l.registerDefaultHelpers(this), a.registerDefaultDecorators(this);\n    }\n    u.prototype = {\n      constructor: u,\n      logger: s.default,\n      log: s.default.log,\n      registerHelper: function (e, t) {\n        if (\"[object Object]\" === i.toString.call(e)) {\n          if (t) throw new o.default(\"Arg not supported with multiple helpers\");\n          i.extend(this.helpers, e);\n        } else this.helpers[e] = t;\n      },\n      unregisterHelper: function (e) {\n        delete this.helpers[e];\n      },\n      registerPartial: function (e, t) {\n        if (\"[object Object]\" === i.toString.call(e)) i.extend(this.partials, e);else {\n          if (void 0 === t) throw new o.default('Attempting to register a partial called \"' + e + '\" as undefined');\n          this.partials[e] = t;\n        }\n      },\n      unregisterPartial: function (e) {\n        delete this.partials[e];\n      },\n      registerDecorator: function (e, t) {\n        if (\"[object Object]\" === i.toString.call(e)) {\n          if (t) throw new o.default(\"Arg not supported with multiple decorators\");\n          i.extend(this.decorators, e);\n        } else this.decorators[e] = t;\n      },\n      unregisterDecorator: function (e) {\n        delete this.decorators[e];\n      }\n    };\n    var c = s.default.log;\n    t.log = c, t.createFrame = i.createFrame, t.logger = s.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    function n(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n    t.__esModule = !0, t.registerDefaultHelpers = function (e) {\n      i.default(e), o.default(e), l.default(e), a.default(e), s.default(e), u.default(e), c.default(e);\n    }, t.moveHelperToHooks = function (e, t, r) {\n      e.helpers[t] && (e.hooks[t] = e.helpers[t], r || delete e.helpers[t]);\n    };\n    var i = n(r(30)),\n      o = n(r(31)),\n      l = n(r(32)),\n      a = n(r(33)),\n      s = n(r(34)),\n      u = n(r(35)),\n      c = n(r(36));\n  }, function (e, t) {\n    e.exports = function (e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    };\n  }, function (e, t) {\n    function r(e, t) {\n      for (var r = 0; r < t.length; r++) {\n        var n = t[r];\n        n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n      }\n    }\n    e.exports = function (e, t, n) {\n      return t && r(e.prototype, t), n && r(e, n), e;\n    };\n  }, function (e, t, r) {\n    var n = r(6),\n      i = r(18);\n    e.exports = function (e, t) {\n      return !t || \"object\" !== n(t) && \"function\" != typeof t ? i(e) : t;\n    };\n  }, function (e, t, r) {\n    var n = r(20);\n    e.exports = function (e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function\");\n      e.prototype = Object.create(t && t.prototype, {\n        constructor: {\n          value: e,\n          writable: !0,\n          configurable: !0\n        }\n      }), t && n(e, t);\n    };\n  }, function (e, t, r) {\n    e.exports = r(17).default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    r.r(t);\n    var n = r(12),\n      i = r.n(n),\n      o = r(13),\n      l = r.n(o),\n      a = r(14),\n      s = r.n(a),\n      u = r(2),\n      c = r.n(u),\n      d = r(3),\n      f = r.n(d),\n      h = r(15),\n      p = r.n(h),\n      v = r(7),\n      g = r.n(v),\n      m = (r(21), r(8));\n    t.default = function (e) {\n      var t = e.util,\n        n = t.evalCss,\n        o = t.beautify,\n        a = function (e) {\n          function t() {\n            var e;\n            return i()(this, t), (e = s()(this, c()(t).call(this))).name = \"code\", e._style = n(r(24)), e._CodeMirrorStyle = n(r(25)), e._CodeMirrorCustomStyle = n(r(26)), e._editor = null, e;\n          }\n          return p()(t, e), l()(t, [{\n            key: \"init\",\n            value: function (e, n) {\n              f()(c()(t.prototype), \"init\", this).call(this, e, n), e.html(r(27)()), this._bindEvent();\n            }\n          }, {\n            key: \"show\",\n            value: function () {\n              var e = this;\n              if (f()(c()(t.prototype), \"show\", this).call(this), !this._editor) {\n                var r = this._$el.find(\".eruda-editor\").get(0);\n                this._editor = g.a.fromTextArea(r, {\n                  lineNumbers: \"true\",\n                  mode: \"javascript\"\n                }), Object(m.b)(function () {\n                  return e._editor.refresh();\n                });\n              }\n            }\n          }, {\n            key: \"hide\",\n            value: function () {\n              f()(c()(t.prototype), \"hide\", this).call(this);\n            }\n          }, {\n            key: \"run\",\n            value: function () {\n              try {\n                u(this._editor.getValue());\n              } catch (e) {\n                console.error(e);\n              }\n            }\n          }, {\n            key: \"beautify\",\n            value: function () {\n              var e = this._editor,\n                t = e.getValue();\n              e.setValue(o(t));\n            }\n          }, {\n            key: \"copy\",\n            value: function () {\n              Object(m.a)(this._editor.getValue());\n            }\n          }, {\n            key: \"clear\",\n            value: function () {\n              this._editor.setValue(\"\");\n            }\n          }, {\n            key: \"destroy\",\n            value: function () {\n              f()(c()(t.prototype), \"destroy\", this).call(this), n.remove(this._style), n.remove(this._CodeMirrorStyle), n.remove(this._CodeMirrorCustomStyle);\n            }\n          }, {\n            key: \"_bindEvent\",\n            value: function () {\n              var e = this;\n              this._$el.on(\"click\", \".eruda-run\", function () {\n                return e.run();\n              }).on(\"click\", \".eruda-beautify\", function () {\n                return e.beautify();\n              }).on(\"click\", \".eruda-clear\", function () {\n                return e.clear();\n              }).on(\"click\", \".eruda-copy\", function () {\n                return e.copy();\n              });\n            }\n          }]), t;\n        }(e.Tool),\n        u = function (e) {\n          var t;\n          try {\n            t = eval.call(window, \"(\".concat(e, \")\"));\n          } catch (r) {\n            t = eval.call(window, e);\n          }\n          return t;\n        };\n      return new a();\n    };\n  }, function (e, t) {\n    e.exports = function (e) {\n      if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return e;\n    };\n  }, function (e, t, r) {\n    var n = r(2);\n    e.exports = function (e, t) {\n      for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = n(e)););\n      return e;\n    };\n  }, function (e, t) {\n    function r(t, n) {\n      return e.exports = r = Object.setPrototypeOf || function (e, t) {\n        return e.__proto__ = t, e;\n      }, r(t, n);\n    }\n    e.exports = r;\n  }, function (e, t, r) {\n    !function (e) {\n      \"use strict\";\n\n      e.defineMode(\"javascript\", function (t, r) {\n        var n,\n          i,\n          o = t.indentUnit,\n          l = r.statementIndent,\n          a = r.jsonld,\n          s = r.json || a,\n          u = r.typescript,\n          c = r.wordCharacters || /[\\w$\\xa1-\\uffff]/,\n          d = function () {\n            function e(e) {\n              return {\n                type: e,\n                style: \"keyword\"\n              };\n            }\n            var t = e(\"keyword a\"),\n              r = e(\"keyword b\"),\n              n = e(\"keyword c\"),\n              i = e(\"keyword d\"),\n              o = e(\"operator\"),\n              l = {\n                type: \"atom\",\n                style: \"atom\"\n              };\n            return {\n              if: e(\"if\"),\n              while: t,\n              with: t,\n              else: r,\n              do: r,\n              try: r,\n              finally: r,\n              return: i,\n              break: i,\n              continue: i,\n              new: e(\"new\"),\n              delete: n,\n              void: n,\n              throw: n,\n              debugger: e(\"debugger\"),\n              var: e(\"var\"),\n              const: e(\"var\"),\n              let: e(\"var\"),\n              function: e(\"function\"),\n              catch: e(\"catch\"),\n              for: e(\"for\"),\n              switch: e(\"switch\"),\n              case: e(\"case\"),\n              default: e(\"default\"),\n              in: o,\n              typeof: o,\n              instanceof: o,\n              true: l,\n              false: l,\n              null: l,\n              undefined: l,\n              NaN: l,\n              Infinity: l,\n              this: e(\"this\"),\n              class: e(\"class\"),\n              super: e(\"atom\"),\n              yield: n,\n              export: e(\"export\"),\n              import: e(\"import\"),\n              extends: n,\n              await: n\n            };\n          }(),\n          f = /[+\\-*&%=<>!?|~^@]/,\n          h = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n        function p(e, t, r) {\n          return n = e, i = r, t;\n        }\n        function v(e, t) {\n          var r,\n            n = e.next();\n          if ('\"' == n || \"'\" == n) return t.tokenize = (r = n, function (e, t) {\n            var n,\n              i = !1;\n            if (a && \"@\" == e.peek() && e.match(h)) return t.tokenize = v, p(\"jsonld-keyword\", \"meta\");\n            for (; null != (n = e.next()) && (n != r || i);) i = !i && \"\\\\\" == n;\n            return i || (t.tokenize = v), p(\"string\", \"string\");\n          }), t.tokenize(e, t);\n          if (\".\" == n && e.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)) return p(\"number\", \"number\");\n          if (\".\" == n && e.match(\"..\")) return p(\"spread\", \"meta\");\n          if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(n)) return p(n);\n          if (\"=\" == n && e.eat(\">\")) return p(\"=>\", \"operator\");\n          if (\"0\" == n && e.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) return p(\"number\", \"number\");\n          if (/\\d/.test(n)) return e.match(/^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/), p(\"number\", \"number\");\n          if (\"/\" == n) return e.eat(\"*\") ? (t.tokenize = g, g(e, t)) : e.eat(\"/\") ? (e.skipToEnd(), p(\"comment\", \"comment\")) : $e(e, t, 1) ? (function (e) {\n            for (var t, r = !1, n = !1; null != (t = e.next());) {\n              if (!r) {\n                if (\"/\" == t && !n) return;\n                \"[\" == t ? n = !0 : n && \"]\" == t && (n = !1);\n              }\n              r = !r && \"\\\\\" == t;\n            }\n          }(e), e.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/), p(\"regexp\", \"string-2\")) : (e.eat(\"=\"), p(\"operator\", \"operator\", e.current()));\n          if (\"`\" == n) return t.tokenize = m, m(e, t);\n          if (\"#\" == n) return e.skipToEnd(), p(\"error\", \"error\");\n          if (\"<\" == n && e.match(\"!--\") || \"-\" == n && e.match(\"->\")) return e.skipToEnd(), p(\"comment\", \"comment\");\n          if (f.test(n)) return \">\" == n && t.lexical && \">\" == t.lexical.type || (e.eat(\"=\") ? \"!\" != n && \"=\" != n || e.eat(\"=\") : /[<>*+\\-]/.test(n) && (e.eat(n), \">\" == n && e.eat(n))), p(\"operator\", \"operator\", e.current());\n          if (c.test(n)) {\n            e.eatWhile(c);\n            var i = e.current();\n            if (\".\" != t.lastType) {\n              if (d.propertyIsEnumerable(i)) {\n                var o = d[i];\n                return p(o.type, o.style, i);\n              }\n              if (\"async\" == i && e.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/, !1)) return p(\"async\", \"keyword\", i);\n            }\n            return p(\"variable\", \"variable\", i);\n          }\n        }\n        function g(e, t) {\n          for (var r, n = !1; r = e.next();) {\n            if (\"/\" == r && n) {\n              t.tokenize = v;\n              break;\n            }\n            n = \"*\" == r;\n          }\n          return p(\"comment\", \"comment\");\n        }\n        function m(e, t) {\n          for (var r, n = !1; null != (r = e.next());) {\n            if (!n && (\"`\" == r || \"$\" == r && e.eat(\"{\"))) {\n              t.tokenize = v;\n              break;\n            }\n            n = !n && \"\\\\\" == r;\n          }\n          return p(\"quasi\", \"string-2\", e.current());\n        }\n        function y(e, t) {\n          t.fatArrowAt && (t.fatArrowAt = null);\n          var r = e.string.indexOf(\"=>\", e.start);\n          if (!(r < 0)) {\n            if (u) {\n              var n = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(e.string.slice(e.start, r));\n              n && (r = n.index);\n            }\n            for (var i = 0, o = !1, l = r - 1; l >= 0; --l) {\n              var a = e.string.charAt(l),\n                s = \"([{}])\".indexOf(a);\n              if (s >= 0 && s < 3) {\n                if (!i) {\n                  ++l;\n                  break;\n                }\n                if (0 == --i) {\n                  \"(\" == a && (o = !0);\n                  break;\n                }\n              } else if (s >= 3 && s < 6) ++i;else if (c.test(a)) o = !0;else if (/[\"'\\/`]/.test(a)) for (;; --l) {\n                if (0 == l) return;\n                if (e.string.charAt(l - 1) == a && \"\\\\\" != e.string.charAt(l - 2)) {\n                  l--;\n                  break;\n                }\n              } else if (o && !i) {\n                ++l;\n                break;\n              }\n            }\n            o && !i && (t.fatArrowAt = l);\n          }\n        }\n        var b = {\n          atom: !0,\n          number: !0,\n          variable: !0,\n          string: !0,\n          regexp: !0,\n          this: !0,\n          \"jsonld-keyword\": !0\n        };\n        function w(e, t, r, n, i, o) {\n          this.indented = e, this.column = t, this.type = r, this.prev = i, this.info = o, null != n && (this.align = n);\n        }\n        function x(e, t) {\n          for (var r = e.localVars; r; r = r.next) if (r.name == t) return !0;\n          for (var n = e.context; n; n = n.prev) for (r = n.vars; r; r = r.next) if (r.name == t) return !0;\n        }\n        var C = {\n          state: null,\n          column: null,\n          marked: null,\n          cc: null\n        };\n        function k() {\n          for (var e = arguments.length - 1; e >= 0; e--) C.cc.push(arguments[e]);\n        }\n        function S() {\n          return k.apply(null, arguments), !0;\n        }\n        function M(e, t) {\n          for (var r = t; r; r = r.next) if (r.name == e) return !0;\n          return !1;\n        }\n        function L(e) {\n          var t = C.state;\n          if (C.marked = \"def\", t.context) if (\"var\" == t.lexical.info && t.context && t.context.block) {\n            var n = function e(t, r) {\n              if (r) {\n                if (r.block) {\n                  var n = e(t, r.prev);\n                  return n ? n == r.prev ? r : new O(n, r.vars, !0) : null;\n                }\n                return M(t, r.vars) ? r : new O(r.prev, new N(t, r.vars), !1);\n              }\n              return null;\n            }(e, t.context);\n            if (null != n) return void (t.context = n);\n          } else if (!M(e, t.localVars)) return void (t.localVars = new N(e, t.localVars));\n          r.globalVars && !M(e, t.globalVars) && (t.globalVars = new N(e, t.globalVars));\n        }\n        function T(e) {\n          return \"public\" == e || \"private\" == e || \"protected\" == e || \"abstract\" == e || \"readonly\" == e;\n        }\n        function O(e, t, r) {\n          this.prev = e, this.vars = t, this.block = r;\n        }\n        function N(e, t) {\n          this.name = e, this.next = t;\n        }\n        var A = new N(\"this\", new N(\"arguments\", null));\n        function D() {\n          C.state.context = new O(C.state.context, C.state.localVars, !1), C.state.localVars = A;\n        }\n        function P() {\n          C.state.context = new O(C.state.context, C.state.localVars, !0), C.state.localVars = null;\n        }\n        function E() {\n          C.state.localVars = C.state.context.vars, C.state.context = C.state.context.prev;\n        }\n        function H(e, t) {\n          var r = function () {\n            var r = C.state,\n              n = r.indented;\n            if (\"stat\" == r.lexical.type) n = r.lexical.indented;else for (var i = r.lexical; i && \")\" == i.type && i.align; i = i.prev) n = i.indented;\n            r.lexical = new w(n, C.stream.column(), e, null, r.lexical, t);\n          };\n          return r.lex = !0, r;\n        }\n        function W() {\n          var e = C.state;\n          e.lexical.prev && (\")\" == e.lexical.type && (e.indented = e.lexical.indented), e.lexical = e.lexical.prev);\n        }\n        function I(e) {\n          return function t(r) {\n            return r == e ? S() : \";\" == e || \"}\" == r || \")\" == r || \"]\" == r ? k() : S(t);\n          };\n        }\n        function F(e, t) {\n          return \"var\" == e ? S(H(\"vardef\", t), ye, I(\";\"), W) : \"keyword a\" == e ? S(H(\"form\"), j, F, W) : \"keyword b\" == e ? S(H(\"form\"), F, W) : \"keyword d\" == e ? C.stream.match(/^\\s*$/, !1) ? S() : S(H(\"stat\"), V, I(\";\"), W) : \"debugger\" == e ? S(I(\";\")) : \"{\" == e ? S(H(\"}\"), P, oe, W, E) : \";\" == e ? S() : \"if\" == e ? (\"else\" == C.state.lexical.info && C.state.cc[C.state.cc.length - 1] == W && C.state.cc.pop()(), S(H(\"form\"), j, F, W, Se)) : \"function\" == e ? S(Oe) : \"for\" == e ? S(H(\"form\"), Me, F, W) : \"class\" == e || u && \"interface\" == t ? (C.marked = \"keyword\", S(H(\"form\", \"class\" == e ? e : t), Ee, W)) : \"variable\" == e ? u && \"declare\" == t ? (C.marked = \"keyword\", S(F)) : u && (\"module\" == t || \"enum\" == t || \"type\" == t) && C.stream.match(/^\\s*\\w/, !1) ? (C.marked = \"keyword\", \"enum\" == t ? S(Ue) : \"type\" == t ? S(Ae, I(\"operator\"), ce, I(\";\")) : S(H(\"form\"), be, I(\"{\"), H(\"}\"), oe, W, W)) : u && \"namespace\" == t ? (C.marked = \"keyword\", S(H(\"form\"), _, F, W)) : u && \"abstract\" == t ? (C.marked = \"keyword\", S(F)) : S(H(\"stat\"), J) : \"switch\" == e ? S(H(\"form\"), j, I(\"{\"), H(\"}\", \"switch\"), P, oe, W, W, E) : \"case\" == e ? S(_, I(\":\")) : \"default\" == e ? S(I(\":\")) : \"catch\" == e ? S(H(\"form\"), D, z, F, W, E) : \"export\" == e ? S(H(\"stat\"), Fe, W) : \"import\" == e ? S(H(\"stat\"), _e, W) : \"async\" == e ? S(F) : \"@\" == t ? S(_, F) : k(H(\"stat\"), _, I(\";\"), W);\n        }\n        function z(e) {\n          if (\"(\" == e) return S(De, I(\")\"));\n        }\n        function _(e, t) {\n          return B(e, t, !1);\n        }\n        function R(e, t) {\n          return B(e, t, !0);\n        }\n        function j(e) {\n          return \"(\" != e ? k() : S(H(\")\"), _, I(\")\"), W);\n        }\n        function B(e, t, r) {\n          if (C.state.fatArrowAt == C.stream.start) {\n            var n = r ? q : X;\n            if (\"(\" == e) return S(D, H(\")\"), ne(De, \")\"), W, I(\"=>\"), n, E);\n            if (\"variable\" == e) return k(D, be, I(\"=>\"), n, E);\n          }\n          var i = r ? U : G;\n          return b.hasOwnProperty(e) ? S(i) : \"function\" == e ? S(Oe, i) : \"class\" == e || u && \"interface\" == t ? (C.marked = \"keyword\", S(H(\"form\"), Pe, W)) : \"keyword c\" == e || \"async\" == e ? S(r ? R : _) : \"(\" == e ? S(H(\")\"), V, I(\")\"), W, i) : \"operator\" == e || \"spread\" == e ? S(r ? R : _) : \"[\" == e ? S(H(\"]\"), Ge, W, i) : \"{\" == e ? ie(ee, \"}\", null, i) : \"quasi\" == e ? k(K, i) : \"new\" == e ? S(function (e) {\n            return function (t) {\n              return \".\" == t ? S(e ? Z : Y) : \"variable\" == t && u ? S(ve, e ? U : G) : k(e ? R : _);\n            };\n          }(r)) : \"import\" == e ? S(_) : S();\n        }\n        function V(e) {\n          return e.match(/[;\\}\\)\\],]/) ? k() : k(_);\n        }\n        function G(e, t) {\n          return \",\" == e ? S(_) : U(e, t, !1);\n        }\n        function U(e, t, r) {\n          var n = 0 == r ? G : U,\n            i = 0 == r ? _ : R;\n          return \"=>\" == e ? S(D, r ? q : X, E) : \"operator\" == e ? /\\+\\+|--/.test(t) || u && \"!\" == t ? S(n) : u && \"<\" == t && C.stream.match(/^([^>]|<.*?>)*>\\s*\\(/, !1) ? S(H(\">\"), ne(ce, \">\"), W, n) : \"?\" == t ? S(_, I(\":\"), i) : S(i) : \"quasi\" == e ? k(K, n) : \";\" != e ? \"(\" == e ? ie(R, \")\", \"call\", n) : \".\" == e ? S(Q, n) : \"[\" == e ? S(H(\"]\"), V, I(\"]\"), W, n) : u && \"as\" == t ? (C.marked = \"keyword\", S(ce, n)) : \"regexp\" == e ? (C.state.lastType = C.marked = \"operator\", C.stream.backUp(C.stream.pos - C.stream.start - 1), S(i)) : void 0 : void 0;\n        }\n        function K(e, t) {\n          return \"quasi\" != e ? k() : \"${\" != t.slice(t.length - 2) ? S(K) : S(_, $);\n        }\n        function $(e) {\n          if (\"}\" == e) return C.marked = \"string-2\", C.state.tokenize = m, S(K);\n        }\n        function X(e) {\n          return y(C.stream, C.state), k(\"{\" == e ? F : _);\n        }\n        function q(e) {\n          return y(C.stream, C.state), k(\"{\" == e ? F : R);\n        }\n        function Y(e, t) {\n          if (\"target\" == t) return C.marked = \"keyword\", S(G);\n        }\n        function Z(e, t) {\n          if (\"target\" == t) return C.marked = \"keyword\", S(U);\n        }\n        function J(e) {\n          return \":\" == e ? S(W, F) : k(G, I(\";\"), W);\n        }\n        function Q(e) {\n          if (\"variable\" == e) return C.marked = \"property\", S();\n        }\n        function ee(e, t) {\n          return \"async\" == e ? (C.marked = \"property\", S(ee)) : \"variable\" == e || \"keyword\" == C.style ? (C.marked = \"property\", \"get\" == t || \"set\" == t ? S(te) : (u && C.state.fatArrowAt == C.stream.start && (r = C.stream.match(/^\\s*:\\s*/, !1)) && (C.state.fatArrowAt = C.stream.pos + r[0].length), S(re))) : \"number\" == e || \"string\" == e ? (C.marked = a ? \"property\" : C.style + \" property\", S(re)) : \"jsonld-keyword\" == e ? S(re) : u && T(t) ? (C.marked = \"keyword\", S(ee)) : \"[\" == e ? S(_, le, I(\"]\"), re) : \"spread\" == e ? S(R, re) : \"*\" == t ? (C.marked = \"keyword\", S(ee)) : \":\" == e ? k(re) : void 0;\n          var r;\n        }\n        function te(e) {\n          return \"variable\" != e ? k(re) : (C.marked = \"property\", S(Oe));\n        }\n        function re(e) {\n          return \":\" == e ? S(R) : \"(\" == e ? k(Oe) : void 0;\n        }\n        function ne(e, t, r) {\n          function n(i, o) {\n            if (r ? r.indexOf(i) > -1 : \",\" == i) {\n              var l = C.state.lexical;\n              return \"call\" == l.info && (l.pos = (l.pos || 0) + 1), S(function (r, n) {\n                return r == t || n == t ? k() : k(e);\n              }, n);\n            }\n            return i == t || o == t ? S() : r && r.indexOf(\";\") > -1 ? k(e) : S(I(t));\n          }\n          return function (r, i) {\n            return r == t || i == t ? S() : k(e, n);\n          };\n        }\n        function ie(e, t, r) {\n          for (var n = 3; n < arguments.length; n++) C.cc.push(arguments[n]);\n          return S(H(t, r), ne(e, t), W);\n        }\n        function oe(e) {\n          return \"}\" == e ? S() : k(F, oe);\n        }\n        function le(e, t) {\n          if (u) {\n            if (\":\" == e) return S(ce);\n            if (\"?\" == t) return S(le);\n          }\n        }\n        function ae(e, t) {\n          if (u && (\":\" == e || \"in\" == t)) return S(ce);\n        }\n        function se(e) {\n          if (u && \":\" == e) return C.stream.match(/^\\s*\\w+\\s+is\\b/, !1) ? S(_, ue, ce) : S(ce);\n        }\n        function ue(e, t) {\n          if (\"is\" == t) return C.marked = \"keyword\", S();\n        }\n        function ce(e, t) {\n          return \"keyof\" == t || \"typeof\" == t || \"infer\" == t ? (C.marked = \"keyword\", S(\"typeof\" == t ? R : ce)) : \"variable\" == e || \"void\" == t ? (C.marked = \"type\", S(pe)) : \"|\" == t || \"&\" == t ? S(ce) : \"string\" == e || \"number\" == e || \"atom\" == e ? S(pe) : \"[\" == e ? S(H(\"]\"), ne(ce, \"]\", \",\"), W, pe) : \"{\" == e ? S(H(\"}\"), ne(fe, \"}\", \",;\"), W, pe) : \"(\" == e ? S(ne(he, \")\"), de, pe) : \"<\" == e ? S(ne(ce, \">\"), ce) : void 0;\n        }\n        function de(e) {\n          if (\"=>\" == e) return S(ce);\n        }\n        function fe(e, t) {\n          return \"variable\" == e || \"keyword\" == C.style ? (C.marked = \"property\", S(fe)) : \"?\" == t || \"number\" == e || \"string\" == e ? S(fe) : \":\" == e ? S(ce) : \"[\" == e ? S(I(\"variable\"), ae, I(\"]\"), fe) : \"(\" == e ? k(Ne, fe) : void 0;\n        }\n        function he(e, t) {\n          return \"variable\" == e && C.stream.match(/^\\s*[?:]/, !1) || \"?\" == t ? S(he) : \":\" == e ? S(ce) : \"spread\" == e ? S(he) : k(ce);\n        }\n        function pe(e, t) {\n          return \"<\" == t ? S(H(\">\"), ne(ce, \">\"), W, pe) : \"|\" == t || \".\" == e || \"&\" == t ? S(ce) : \"[\" == e ? S(ce, I(\"]\"), pe) : \"extends\" == t || \"implements\" == t ? (C.marked = \"keyword\", S(ce)) : \"?\" == t ? S(ce, I(\":\"), ce) : void 0;\n        }\n        function ve(e, t) {\n          if (\"<\" == t) return S(H(\">\"), ne(ce, \">\"), W, pe);\n        }\n        function ge() {\n          return k(ce, me);\n        }\n        function me(e, t) {\n          if (\"=\" == t) return S(ce);\n        }\n        function ye(e, t) {\n          return \"enum\" == t ? (C.marked = \"keyword\", S(Ue)) : k(be, le, Ce, ke);\n        }\n        function be(e, t) {\n          return u && T(t) ? (C.marked = \"keyword\", S(be)) : \"variable\" == e ? (L(t), S()) : \"spread\" == e ? S(be) : \"[\" == e ? ie(xe, \"]\") : \"{\" == e ? ie(we, \"}\") : void 0;\n        }\n        function we(e, t) {\n          return \"variable\" != e || C.stream.match(/^\\s*:/, !1) ? (\"variable\" == e && (C.marked = \"property\"), \"spread\" == e ? S(be) : \"}\" == e ? k() : \"[\" == e ? S(_, I(\"]\"), I(\":\"), we) : S(I(\":\"), be, Ce)) : (L(t), S(Ce));\n        }\n        function xe() {\n          return k(be, Ce);\n        }\n        function Ce(e, t) {\n          if (\"=\" == t) return S(R);\n        }\n        function ke(e) {\n          if (\",\" == e) return S(ye);\n        }\n        function Se(e, t) {\n          if (\"keyword b\" == e && \"else\" == t) return S(H(\"form\", \"else\"), F, W);\n        }\n        function Me(e, t) {\n          return \"await\" == t ? S(Me) : \"(\" == e ? S(H(\")\"), Le, W) : void 0;\n        }\n        function Le(e) {\n          return \"var\" == e ? S(ye, Te) : \"variable\" == e ? S(Te) : k(Te);\n        }\n        function Te(e, t) {\n          return \")\" == e ? S() : \";\" == e ? S(Te) : \"in\" == t || \"of\" == t ? (C.marked = \"keyword\", S(_, Te)) : k(_, Te);\n        }\n        function Oe(e, t) {\n          return \"*\" == t ? (C.marked = \"keyword\", S(Oe)) : \"variable\" == e ? (L(t), S(Oe)) : \"(\" == e ? S(D, H(\")\"), ne(De, \")\"), W, se, F, E) : u && \"<\" == t ? S(H(\">\"), ne(ge, \">\"), W, Oe) : void 0;\n        }\n        function Ne(e, t) {\n          return \"*\" == t ? (C.marked = \"keyword\", S(Ne)) : \"variable\" == e ? (L(t), S(Ne)) : \"(\" == e ? S(D, H(\")\"), ne(De, \")\"), W, se, E) : u && \"<\" == t ? S(H(\">\"), ne(ge, \">\"), W, Ne) : void 0;\n        }\n        function Ae(e, t) {\n          return \"keyword\" == e || \"variable\" == e ? (C.marked = \"type\", S(Ae)) : \"<\" == t ? S(H(\">\"), ne(ge, \">\"), W) : void 0;\n        }\n        function De(e, t) {\n          return \"@\" == t && S(_, De), \"spread\" == e ? S(De) : u && T(t) ? (C.marked = \"keyword\", S(De)) : u && \"this\" == e ? S(le, Ce) : k(be, le, Ce);\n        }\n        function Pe(e, t) {\n          return \"variable\" == e ? Ee(e, t) : He(e, t);\n        }\n        function Ee(e, t) {\n          if (\"variable\" == e) return L(t), S(He);\n        }\n        function He(e, t) {\n          return \"<\" == t ? S(H(\">\"), ne(ge, \">\"), W, He) : \"extends\" == t || \"implements\" == t || u && \",\" == e ? (\"implements\" == t && (C.marked = \"keyword\"), S(u ? ce : _, He)) : \"{\" == e ? S(H(\"}\"), We, W) : void 0;\n        }\n        function We(e, t) {\n          return \"async\" == e || \"variable\" == e && (\"static\" == t || \"get\" == t || \"set\" == t || u && T(t)) && C.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, !1) ? (C.marked = \"keyword\", S(We)) : \"variable\" == e || \"keyword\" == C.style ? (C.marked = \"property\", S(u ? Ie : Oe, We)) : \"number\" == e || \"string\" == e ? S(u ? Ie : Oe, We) : \"[\" == e ? S(_, le, I(\"]\"), u ? Ie : Oe, We) : \"*\" == t ? (C.marked = \"keyword\", S(We)) : u && \"(\" == e ? k(Ne, We) : \";\" == e || \",\" == e ? S(We) : \"}\" == e ? S() : \"@\" == t ? S(_, We) : void 0;\n        }\n        function Ie(e, t) {\n          if (\"?\" == t) return S(Ie);\n          if (\":\" == e) return S(ce, Ce);\n          if (\"=\" == t) return S(R);\n          var r = C.state.lexical.prev;\n          return k(r && \"interface\" == r.info ? Ne : Oe);\n        }\n        function Fe(e, t) {\n          return \"*\" == t ? (C.marked = \"keyword\", S(Ve, I(\";\"))) : \"default\" == t ? (C.marked = \"keyword\", S(_, I(\";\"))) : \"{\" == e ? S(ne(ze, \"}\"), Ve, I(\";\")) : k(F);\n        }\n        function ze(e, t) {\n          return \"as\" == t ? (C.marked = \"keyword\", S(I(\"variable\"))) : \"variable\" == e ? k(R, ze) : void 0;\n        }\n        function _e(e) {\n          return \"string\" == e ? S() : \"(\" == e ? k(_) : k(Re, je, Ve);\n        }\n        function Re(e, t) {\n          return \"{\" == e ? ie(Re, \"}\") : (\"variable\" == e && L(t), \"*\" == t && (C.marked = \"keyword\"), S(Be));\n        }\n        function je(e) {\n          if (\",\" == e) return S(Re, je);\n        }\n        function Be(e, t) {\n          if (\"as\" == t) return C.marked = \"keyword\", S(Re);\n        }\n        function Ve(e, t) {\n          if (\"from\" == t) return C.marked = \"keyword\", S(_);\n        }\n        function Ge(e) {\n          return \"]\" == e ? S() : k(ne(R, \"]\"));\n        }\n        function Ue() {\n          return k(H(\"form\"), be, I(\"{\"), H(\"}\"), ne(Ke, \"}\"), W, W);\n        }\n        function Ke() {\n          return k(be, Ce);\n        }\n        function $e(e, t, r) {\n          return t.tokenize == v && /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(t.lastType) || \"quasi\" == t.lastType && /\\{\\s*$/.test(e.string.slice(0, e.pos - (r || 0)));\n        }\n        return E.lex = !0, W.lex = !0, {\n          startState: function (e) {\n            var t = {\n              tokenize: v,\n              lastType: \"sof\",\n              cc: [],\n              lexical: new w((e || 0) - o, 0, \"block\", !1),\n              localVars: r.localVars,\n              context: r.localVars && new O(null, null, !1),\n              indented: e || 0\n            };\n            return r.globalVars && \"object\" == typeof r.globalVars && (t.globalVars = r.globalVars), t;\n          },\n          token: function (e, t) {\n            if (e.sol() && (t.lexical.hasOwnProperty(\"align\") || (t.lexical.align = !1), t.indented = e.indentation(), y(e, t)), t.tokenize != g && e.eatSpace()) return null;\n            var r = t.tokenize(e, t);\n            return \"comment\" == n ? r : (t.lastType = \"operator\" != n || \"++\" != i && \"--\" != i ? n : \"incdec\", function (e, t, r, n, i) {\n              var o = e.cc;\n              for (C.state = e, C.stream = i, C.marked = null, C.cc = o, C.style = t, e.lexical.hasOwnProperty(\"align\") || (e.lexical.align = !0);;) if ((o.length ? o.pop() : s ? _ : F)(r, n)) {\n                for (; o.length && o[o.length - 1].lex;) o.pop()();\n                return C.marked ? C.marked : \"variable\" == r && x(e, n) ? \"variable-2\" : t;\n              }\n            }(t, r, n, i, e));\n          },\n          indent: function (t, n) {\n            if (t.tokenize == g) return e.Pass;\n            if (t.tokenize != v) return 0;\n            var i,\n              a = n && n.charAt(0),\n              s = t.lexical;\n            if (!/^\\s*else\\b/.test(n)) for (var u = t.cc.length - 1; u >= 0; --u) {\n              var c = t.cc[u];\n              if (c == W) s = s.prev;else if (c != Se) break;\n            }\n            for (; (\"stat\" == s.type || \"form\" == s.type) && (\"}\" == a || (i = t.cc[t.cc.length - 1]) && (i == G || i == U) && !/^[,\\.=+\\-*:?[\\(]/.test(n));) s = s.prev;\n            l && \")\" == s.type && \"stat\" == s.prev.type && (s = s.prev);\n            var d = s.type,\n              h = a == d;\n            return \"vardef\" == d ? s.indented + (\"operator\" == t.lastType || \",\" == t.lastType ? s.info.length + 1 : 0) : \"form\" == d && \"{\" == a ? s.indented : \"form\" == d ? s.indented + o : \"stat\" == d ? s.indented + (function (e, t) {\n              return \"operator\" == e.lastType || \",\" == e.lastType || f.test(t.charAt(0)) || /[,.]/.test(t.charAt(0));\n            }(t, n) ? l || o : 0) : \"switch\" != s.info || h || 0 == r.doubleIndentSwitch ? s.align ? s.column + (h ? 0 : 1) : s.indented + (h ? 0 : o) : s.indented + (/^(?:case|default)\\b/.test(n) ? o : 2 * o);\n          },\n          electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n          blockCommentStart: s ? null : \"/*\",\n          blockCommentEnd: s ? null : \"*/\",\n          blockCommentContinue: s ? null : \" * \",\n          lineComment: s ? null : \"//\",\n          fold: \"brace\",\n          closeBrackets: \"()[]{}''\\\"\\\"``\",\n          helperType: s ? \"json\" : \"javascript\",\n          jsonldMode: a,\n          jsonMode: s,\n          expressionAllowed: $e,\n          skipExpression: function (e) {\n            var t = e.cc[e.cc.length - 1];\n            t != _ && t != R || e.cc.pop();\n          }\n        };\n      }), e.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/), e.defineMIME(\"text/javascript\", \"javascript\"), e.defineMIME(\"text/ecmascript\", \"javascript\"), e.defineMIME(\"application/javascript\", \"javascript\"), e.defineMIME(\"application/x-javascript\", \"javascript\"), e.defineMIME(\"application/ecmascript\", \"javascript\"), e.defineMIME(\"application/json\", {\n        name: \"javascript\",\n        json: !0\n      }), e.defineMIME(\"application/x-json\", {\n        name: \"javascript\",\n        json: !0\n      }), e.defineMIME(\"application/ld+json\", {\n        name: \"javascript\",\n        jsonld: !0\n      }), e.defineMIME(\"text/typescript\", {\n        name: \"javascript\",\n        typescript: !0\n      }), e.defineMIME(\"application/typescript\", {\n        name: \"javascript\",\n        typescript: !0\n      });\n    }(r(7));\n  }, function (e, t, r) {\n    (function (e) {\n      var n = void 0 !== e && e || \"undefined\" != typeof self && self || window,\n        i = Function.prototype.apply;\n      function o(e, t) {\n        this._id = e, this._clearFn = t;\n      }\n      t.setTimeout = function () {\n        return new o(i.call(setTimeout, n, arguments), clearTimeout);\n      }, t.setInterval = function () {\n        return new o(i.call(setInterval, n, arguments), clearInterval);\n      }, t.clearTimeout = t.clearInterval = function (e) {\n        e && e.close();\n      }, o.prototype.unref = o.prototype.ref = function () {}, o.prototype.close = function () {\n        this._clearFn.call(n, this._id);\n      }, t.enroll = function (e, t) {\n        clearTimeout(e._idleTimeoutId), e._idleTimeout = t;\n      }, t.unenroll = function (e) {\n        clearTimeout(e._idleTimeoutId), e._idleTimeout = -1;\n      }, t._unrefActive = t.active = function (e) {\n        clearTimeout(e._idleTimeoutId);\n        var t = e._idleTimeout;\n        t >= 0 && (e._idleTimeoutId = setTimeout(function () {\n          e._onTimeout && e._onTimeout();\n        }, t));\n      }, r(23), t.setImmediate = \"undefined\" != typeof self && self.setImmediate || void 0 !== e && e.setImmediate || this && this.setImmediate, t.clearImmediate = \"undefined\" != typeof self && self.clearImmediate || void 0 !== e && e.clearImmediate || this && this.clearImmediate;\n    }).call(this, r(4));\n  }, function (e, t, r) {\n    (function (e, t) {\n      !function (e, r) {\n        \"use strict\";\n\n        if (!e.setImmediate) {\n          var n,\n            i,\n            o,\n            l,\n            a,\n            s = 1,\n            u = {},\n            c = !1,\n            d = e.document,\n            f = Object.getPrototypeOf && Object.getPrototypeOf(e);\n          f = f && f.setTimeout ? f : e, \"[object process]\" === {}.toString.call(e.process) ? n = function (e) {\n            t.nextTick(function () {\n              p(e);\n            });\n          } : !function () {\n            if (e.postMessage && !e.importScripts) {\n              var t = !0,\n                r = e.onmessage;\n              return e.onmessage = function () {\n                t = !1;\n              }, e.postMessage(\"\", \"*\"), e.onmessage = r, t;\n            }\n          }() ? e.MessageChannel ? ((o = new MessageChannel()).port1.onmessage = function (e) {\n            p(e.data);\n          }, n = function (e) {\n            o.port2.postMessage(e);\n          }) : d && \"onreadystatechange\" in d.createElement(\"script\") ? (i = d.documentElement, n = function (e) {\n            var t = d.createElement(\"script\");\n            t.onreadystatechange = function () {\n              p(e), t.onreadystatechange = null, i.removeChild(t), t = null;\n            }, i.appendChild(t);\n          }) : n = function (e) {\n            setTimeout(p, 0, e);\n          } : (l = \"setImmediate$\" + Math.random() + \"$\", a = function (t) {\n            t.source === e && \"string\" == typeof t.data && 0 === t.data.indexOf(l) && p(+t.data.slice(l.length));\n          }, e.addEventListener ? e.addEventListener(\"message\", a, !1) : e.attachEvent(\"onmessage\", a), n = function (t) {\n            e.postMessage(l + t, \"*\");\n          }), f.setImmediate = function (e) {\n            \"function\" != typeof e && (e = new Function(\"\" + e));\n            for (var t = new Array(arguments.length - 1), r = 0; r < t.length; r++) t[r] = arguments[r + 1];\n            var i = {\n              callback: e,\n              args: t\n            };\n            return u[s] = i, n(s), s++;\n          }, f.clearImmediate = h;\n        }\n        function h(e) {\n          delete u[e];\n        }\n        function p(e) {\n          if (c) setTimeout(p, 0, e);else {\n            var t = u[e];\n            if (t) {\n              c = !0;\n              try {\n                !function (e) {\n                  var t = e.callback,\n                    r = e.args;\n                  switch (r.length) {\n                    case 0:\n                      t();\n                      break;\n                    case 1:\n                      t(r[0]);\n                      break;\n                    case 2:\n                      t(r[0], r[1]);\n                      break;\n                    case 3:\n                      t(r[0], r[1], r[2]);\n                      break;\n                    default:\n                      t.apply(void 0, r);\n                  }\n                }(t);\n              } finally {\n                h(e), c = !1;\n              }\n            }\n          }\n        }\n      }(\"undefined\" == typeof self ? void 0 === e ? this : e : self);\n    }).call(this, r(4), r(9));\n  }, function (e, t, r) {\n    (t = r(5)(!1)).push([e.i, \".eruda-dev-tools .eruda-tools .eruda-code{padding-bottom:40px}.eruda-dev-tools .eruda-tools .eruda-code .eruda-editor{height:100%}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar{height:40px;background:var(--darker-background);position:absolute;left:0;bottom:0;width:100%;font-size:0;border-top:1px solid var(--border)}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar .eruda-btn{cursor:pointer;text-align:center;color:var(--foreground);font-size:14px;line-height:40px;width:25%;border-right:1px solid var(--border);display:inline-block;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar .eruda-btn:active{background:var(--highlight);color:var(--select-foreground)}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar .eruda-btn.eruda-active{color:var(--select-foreground)}\\n\", \"\"]), e.exports = t;\n  }, function (e, t, r) {\n    (t = r(5)(!1)).push([e.i, \"/* BASICS */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror {\\n  /* Set height, width, borders, and global font properties here */\\n  font-family: monospace;\\n  height: 300px;\\n  color: black;\\n  direction: ltr;\\n}\\n\\n/* PADDING */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-lines {\\n  padding: 4px 0; /* Vertical padding around content */\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line,\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line-like {\\n  padding: 0 4px; /* Horizontal padding of content */\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-scrollbar-filler, .eruda-dev-tools .eruda-tools .CodeMirror-gutter-filler {\\n  background-color: white; /* The little square between H and V scrollbars */\\n}\\n\\n/* GUTTER */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutters {\\n  border-right: 1px solid #ddd;\\n  background-color: #f7f7f7;\\n  white-space: nowrap;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-linenumbers {}\\n.eruda-dev-tools .eruda-tools .CodeMirror-linenumber {\\n  padding: 0 3px 0 5px;\\n  min-width: 20px;\\n  text-align: right;\\n  color: #999;\\n  white-space: nowrap;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-guttermarker { color: black; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-guttermarker-subtle { color: #999; }\\n\\n/* CURSOR */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-cursor {\\n  border-left: 1px solid black;\\n  border-right: none;\\n  width: 0;\\n}\\n/* Shown when moving in bi-directional text */\\n.eruda-dev-tools .eruda-tools .CodeMirror div.CodeMirror-secondarycursor {\\n  border-left: 1px solid silver;\\n}\\n.eruda-dev-tools .eruda-tools .cm-fat-cursor .CodeMirror-cursor {\\n  width: auto;\\n  border: 0 !important;\\n  background: #7e7;\\n}\\n.eruda-dev-tools .eruda-tools .cm-fat-cursor div.CodeMirror-cursors {\\n  z-index: 1;\\n}\\n.eruda-dev-tools .eruda-tools .cm-fat-cursor-mark {\\n  background-color: rgba(20, 255, 20, 0.5);\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n}\\n.eruda-dev-tools .eruda-tools .cm-animate-fat-cursor {\\n  width: auto;\\n  border: 0;\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n  background-color: #7e7;\\n}\\n@-webkit-keyframes blink {\\n  .eruda-dev-tools .eruda-tools 0% {}\\n  .eruda-dev-tools .eruda-tools 50% { background-color: transparent; }\\n  .eruda-dev-tools .eruda-tools 100% {}\\n}\\n@keyframes blink {\\n  .eruda-dev-tools .eruda-tools 0% {}\\n  .eruda-dev-tools .eruda-tools 50% { background-color: transparent; }\\n  .eruda-dev-tools .eruda-tools 100% {}\\n}\\n\\n/* Can style cursor different in overwrite (non-insert) mode */\\n.eruda-dev-tools .eruda-tools .CodeMirror-overwrite .CodeMirror-cursor {}\\n\\n.eruda-dev-tools .eruda-tools .cm-tab { display: inline-block; text-decoration: inherit; }\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-rulers {\\n  position: absolute;\\n  left: 0; right: 0; top: -50px; bottom: 0;\\n  overflow: hidden;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-ruler {\\n  border-left: 1px solid #ccc;\\n  top: 0; bottom: 0;\\n  position: absolute;\\n}\\n\\n/* DEFAULT THEME */\\n\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-header {color: blue;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-quote {color: #090;}\\n.eruda-dev-tools .eruda-tools .cm-negative {color: #d44;}\\n.eruda-dev-tools .eruda-tools .cm-positive {color: #292;}\\n.eruda-dev-tools .eruda-tools .cm-header, .eruda-dev-tools .eruda-tools .cm-strong {font-weight: bold;}\\n.eruda-dev-tools .eruda-tools .cm-em {font-style: italic;}\\n.eruda-dev-tools .eruda-tools .cm-link {text-decoration: underline;}\\n.eruda-dev-tools .eruda-tools .cm-strikethrough {text-decoration: line-through;}\\n\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-keyword {color: #708;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-atom {color: #219;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-number {color: #164;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-def {color: #00f;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-variable,\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-punctuation,\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-property,\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-operator {}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-variable-2 {color: #05a;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-variable-3, .eruda-dev-tools .eruda-tools .cm-s-default .cm-type {color: #085;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-comment {color: #a50;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-string {color: #a11;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-string-2 {color: #f50;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-meta {color: #555;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-qualifier {color: #555;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-builtin {color: #30a;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-bracket {color: #997;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-tag {color: #170;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-attribute {color: #00c;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-hr {color: #999;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-link {color: #00c;}\\n\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-error {color: #f00;}\\n.eruda-dev-tools .eruda-tools .cm-invalidchar {color: #f00;}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-composing { border-bottom: 2px solid; }\\n\\n/* Default styles for common addons */\\n\\n.eruda-dev-tools .eruda-tools div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\\n.eruda-dev-tools .eruda-tools div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\\n.eruda-dev-tools .eruda-tools .CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\\n.eruda-dev-tools .eruda-tools .CodeMirror-activeline-background {background: #e8f2ff;}\\n\\n/* STOP */\\n\\n/* The rest of this file contains styles related to the mechanics of\\n   the editor. You probably shouldn't touch them. */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror {\\n  position: relative;\\n  overflow: hidden;\\n  background: white;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-scroll {\\n  overflow: scroll !important; /* Things will break if this is overridden */\\n  /* 30px is the magic margin used to hide the element's real scrollbars */\\n  /* See overflow: hidden in .CodeMirror */\\n  margin-bottom: -30px; margin-right: -30px;\\n  padding-bottom: 30px;\\n  height: 100%;\\n  outline: none; /* Prevent dragging from highlighting the element */\\n  position: relative;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-sizer {\\n  position: relative;\\n  border-right: 30px solid transparent;\\n}\\n\\n/* The fake, visible scrollbars. Used to force redraw during scrolling\\n   before actual scrolling happens, thus preventing shaking and\\n   flickering artifacts. */\\n.eruda-dev-tools .eruda-tools .CodeMirror-vscrollbar, .eruda-dev-tools .eruda-tools .CodeMirror-hscrollbar, .eruda-dev-tools .eruda-tools .CodeMirror-scrollbar-filler, .eruda-dev-tools .eruda-tools .CodeMirror-gutter-filler {\\n  position: absolute;\\n  z-index: 6;\\n  display: none;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-vscrollbar {\\n  right: 0; top: 0;\\n  overflow-x: hidden;\\n  overflow-y: scroll;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-hscrollbar {\\n  bottom: 0; left: 0;\\n  overflow-y: hidden;\\n  overflow-x: scroll;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-scrollbar-filler {\\n  right: 0; bottom: 0;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-filler {\\n  left: 0; bottom: 0;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutters {\\n  position: absolute; left: 0; top: 0;\\n  min-height: 100%;\\n  z-index: 3;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter {\\n  white-space: normal;\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  margin-bottom: -30px;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper {\\n  position: absolute;\\n  z-index: 4;\\n  background: none !important;\\n  border: none !important;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-background {\\n  position: absolute;\\n  top: 0; bottom: 0;\\n  z-index: 4;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-elt {\\n  position: absolute;\\n  cursor: default;\\n  z-index: 4;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper ::selection { background-color: transparent }\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-lines {\\n  cursor: text;\\n  min-height: 1px; /* prevents collapsing before first draw */\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line,\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line-like {\\n  /* Reset some styles that the rest of the page might have set */ border-radius: 0;\\n  border-width: 0;\\n  background: transparent;\\n  font-family: inherit;\\n  font-size: inherit;\\n  margin: 0;\\n  white-space: pre;\\n  word-wrap: normal;\\n  line-height: inherit;\\n  color: inherit;\\n  z-index: 2;\\n  position: relative;\\n  overflow: visible;\\n  -webkit-tap-highlight-color: transparent;\\n  font-variant-ligatures: contextual;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-wrap pre.CodeMirror-line,\\n.eruda-dev-tools .eruda-tools .CodeMirror-wrap pre.CodeMirror-line-like {\\n  word-wrap: break-word;\\n  white-space: pre-wrap;\\n  word-break: normal;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-linebackground {\\n  position: absolute;\\n  left: 0; right: 0; top: 0; bottom: 0;\\n  z-index: 0;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-linewidget {\\n  position: relative;\\n  z-index: 2;\\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-widget {}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-rtl pre { direction: rtl; }\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-code {\\n  outline: none;\\n}\\n\\n/* Force content-box sizing for the elements where we expect it */\\n.eruda-dev-tools .eruda-tools .CodeMirror-scroll,\\n.eruda-dev-tools .eruda-tools .CodeMirror-sizer,\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter,\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutters,\\n.eruda-dev-tools .eruda-tools .CodeMirror-linenumber {\\n  box-sizing: content-box;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-measure {\\n  position: absolute;\\n  width: 100%;\\n  height: 0;\\n  overflow: hidden;\\n  visibility: hidden;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-cursor {\\n  position: absolute;\\n  pointer-events: none;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-measure pre { position: static; }\\n\\n.eruda-dev-tools .eruda-tools div.CodeMirror-cursors {\\n  visibility: hidden;\\n  position: relative;\\n  z-index: 3;\\n}\\n.eruda-dev-tools .eruda-tools div.CodeMirror-dragcursors {\\n  visibility: visible;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-focused div.CodeMirror-cursors {\\n  visibility: visible;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-selected { background: #d9d9d9; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-crosshair { cursor: crosshair; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-line::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-line::selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span::selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span > span::selection { background: #d7d4f0; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-line::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n\\n.eruda-dev-tools .eruda-tools .cm-searching {\\n  background-color: #ffa;\\n  background-color: rgba(255, 255, 0, .4);\\n}\\n\\n/* Used to force a border model for a node */\\n.eruda-dev-tools .eruda-tools .cm-force-border { padding-right: .1px; }\\n\\n@media print {\\n  /* Hide the cursor when printing */\\n  .eruda-dev-tools .eruda-tools .CodeMirror div.CodeMirror-cursors {\\n    visibility: hidden;\\n  }\\n}\\n\\n/* See issue #2901 */\\n.eruda-dev-tools .eruda-tools .cm-tab-wrap-hack:after { content: ''; }\\n\\n/* Help users use markselection to safely style text background */\\n.eruda-dev-tools .eruda-tools span.CodeMirror-selectedtext { background: none; }\\n\", \"\"]), e.exports = t;\n  }, function (e, t, r) {\n    (t = r(5)(!1)).push([e.i, \".eruda-dev-tools .eruda-tools .CodeMirror {\\n  height: 100%;\\n}\\n\\n/* Sync style with chrome dev-tool */\\n.eruda-dev-tools .eruda-tools .cm-keyword {\\n  color: hsl(310, 86%, 36%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-number {\\n  color: hsl(248, 100%, 41%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-comment {\\n  color: hsl(120, 100%, 23%) !important;\\n  font-style: italic;\\n}\\n.eruda-dev-tools .eruda-tools .cm-string {\\n  color: hsl(1, 80%, 43%) !important;\\n}\\n.eruda-dev-tools .eruda-tools .cm-string-2 {\\n  color: hsl(1, 99%, 39%) !important;\\n}\\n.eruda-dev-tools .eruda-tools .cm-atom {\\n  color: hsl(310, 86%, 36%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-def {\\n  color: hsl(240, 73%, 38%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-operator {\\n  color: hsl(27, 100%, 30%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-meta {\\n  color: hsl(27, 100%, 30%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-variable-2 {\\n  color: hsl(240, 73%, 38%);\\n}\\n\", \"\"]), e.exports = t;\n  }, function (e, t, r) {\n    var n = r(28);\n    e.exports = (n.default || n).template({\n      compiler: [8, \">= 4.3.0\"],\n      main: function (e, t, r, n, i) {\n        return '<textarea class=\"eruda-editor\">function fib(num) {\\n    if (num <= 2) return 1;\\n    return fib(num - 1) + fib(num - 2);\\n}\\nconsole.log(fib(5));</textarea>\\n<div class=\"eruda-bottom-bar\">\\n    <div class=\"eruda-btn eruda-beautify\">\\n        Beautify\\n    </div>\\n    <div class=\"eruda-btn eruda-copy\">\\n        Copy\\n    </div>\\n    <div class=\"eruda-btn eruda-clear\">\\n        Clear\\n    </div>\\n    <div class=\"eruda-btn eruda-run\">\\n        Run\\n    </div>\\n</div>';\n      },\n      useData: !0\n    });\n  }, function (e, t, r) {\n    e.exports = r(29).default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    function n(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n    function i(e) {\n      if (e && e.__esModule) return e;\n      var t = {};\n      if (null != e) for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n      return t.default = e, t;\n    }\n    t.__esModule = !0;\n    var o = i(r(10)),\n      l = n(r(40)),\n      a = n(r(1)),\n      s = i(r(0)),\n      u = i(r(41)),\n      c = n(r(42));\n    function d() {\n      var e = new o.HandlebarsEnvironment();\n      return s.extend(e, o), e.SafeString = l.default, e.Exception = a.default, e.Utils = s, e.escapeExpression = s.escapeExpression, e.VM = u, e.template = function (t) {\n        return u.template(t, e);\n      }, e;\n    }\n    var f = d();\n    f.create = d, c.default(f), f.default = f, t.default = f, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n = r(0);\n    t.default = function (e) {\n      e.registerHelper(\"blockHelperMissing\", function (t, r) {\n        var i = r.inverse,\n          o = r.fn;\n        if (!0 === t) return o(this);\n        if (!1 === t || null == t) return i(this);\n        if (n.isArray(t)) return t.length > 0 ? (r.ids && (r.ids = [r.name]), e.helpers.each(t, r)) : i(this);\n        if (r.data && r.ids) {\n          var l = n.createFrame(r.data);\n          l.contextPath = n.appendContextPath(r.data.contextPath, r.name), r = {\n            data: l\n          };\n        }\n        return o(t, r);\n      });\n    }, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    (function (n) {\n      t.__esModule = !0;\n      var i,\n        o = r(0),\n        l = r(1),\n        a = (i = l) && i.__esModule ? i : {\n          default: i\n        };\n      t.default = function (e) {\n        e.registerHelper(\"each\", function (e, t) {\n          if (!t) throw new a.default(\"Must pass iterator to #each\");\n          var r,\n            i = t.fn,\n            l = t.inverse,\n            s = 0,\n            u = \"\",\n            c = void 0,\n            d = void 0;\n          function f(t, r, n) {\n            c && (c.key = t, c.index = r, c.first = 0 === r, c.last = !!n, d && (c.contextPath = d + t)), u += i(e[t], {\n              data: c,\n              blockParams: o.blockParams([e[t], t], [d + t, null])\n            });\n          }\n          if (t.data && t.ids && (d = o.appendContextPath(t.data.contextPath, t.ids[0]) + \".\"), o.isFunction(e) && (e = e.call(this)), t.data && (c = o.createFrame(t.data)), e && \"object\" == typeof e) if (o.isArray(e)) for (var h = e.length; s < h; s++) s in e && f(s, s, s === e.length - 1);else if (n.Symbol && e[n.Symbol.iterator]) {\n            for (var p = [], v = e[n.Symbol.iterator](), g = v.next(); !g.done; g = v.next()) p.push(g.value);\n            for (h = (e = p).length; s < h; s++) f(s, s, s === e.length - 1);\n          } else r = void 0, Object.keys(e).forEach(function (e) {\n            void 0 !== r && f(r, s - 1), r = e, s++;\n          }), void 0 !== r && f(r, s - 1, !0);\n          return 0 === s && (u = l(this)), u;\n        });\n      }, e.exports = t.default;\n    }).call(this, r(4));\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n,\n      i = r(1),\n      o = (n = i) && n.__esModule ? n : {\n        default: n\n      };\n    t.default = function (e) {\n      e.registerHelper(\"helperMissing\", function () {\n        if (1 !== arguments.length) throw new o.default('Missing helper: \"' + arguments[arguments.length - 1].name + '\"');\n      });\n    }, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n,\n      i = r(0),\n      o = r(1),\n      l = (n = o) && n.__esModule ? n : {\n        default: n\n      };\n    t.default = function (e) {\n      e.registerHelper(\"if\", function (e, t) {\n        if (2 != arguments.length) throw new l.default(\"#if requires exactly one argument\");\n        return i.isFunction(e) && (e = e.call(this)), !t.hash.includeZero && !e || i.isEmpty(e) ? t.inverse(this) : t.fn(this);\n      }), e.registerHelper(\"unless\", function (t, r) {\n        if (2 != arguments.length) throw new l.default(\"#unless requires exactly one argument\");\n        return e.helpers.if.call(this, t, {\n          fn: r.inverse,\n          inverse: r.fn,\n          hash: r.hash\n        });\n      });\n    }, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0, t.default = function (e) {\n      e.registerHelper(\"log\", function () {\n        for (var t = [void 0], r = arguments[arguments.length - 1], n = 0; n < arguments.length - 1; n++) t.push(arguments[n]);\n        var i = 1;\n        null != r.hash.level ? i = r.hash.level : r.data && null != r.data.level && (i = r.data.level), t[0] = i, e.log.apply(e, t);\n      });\n    }, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n = /^(constructor|__defineGetter__|__defineSetter__|__lookupGetter__|__proto__)$/;\n    t.dangerousPropertyRegex = n, t.default = function (e) {\n      e.registerHelper(\"lookup\", function (e, t) {\n        return e ? !n.test(String(t)) || Object.prototype.propertyIsEnumerable.call(e, t) ? e[t] : void 0 : e;\n      });\n    };\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n,\n      i = r(0),\n      o = r(1),\n      l = (n = o) && n.__esModule ? n : {\n        default: n\n      };\n    t.default = function (e) {\n      e.registerHelper(\"with\", function (e, t) {\n        if (2 != arguments.length) throw new l.default(\"#with requires exactly one argument\");\n        i.isFunction(e) && (e = e.call(this));\n        var r = t.fn;\n        if (i.isEmpty(e)) return t.inverse(this);\n        var n = t.data;\n        return t.data && t.ids && ((n = i.createFrame(t.data)).contextPath = i.appendContextPath(t.data.contextPath, t.ids[0])), r(e, {\n          data: n,\n          blockParams: i.blockParams([e], [n && n.contextPath])\n        });\n      });\n    }, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0, t.registerDefaultDecorators = function (e) {\n      o.default(e);\n    };\n    var n,\n      i = r(38),\n      o = (n = i) && n.__esModule ? n : {\n        default: n\n      };\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n = r(0);\n    t.default = function (e) {\n      e.registerDecorator(\"inline\", function (e, t, r, i) {\n        var o = e;\n        return t.partials || (t.partials = {}, o = function (i, o) {\n          var l = r.partials;\n          r.partials = n.extend({}, l, t.partials);\n          var a = e(i, o);\n          return r.partials = l, a;\n        }), t.partials[i.args[0]] = i.fn, o;\n      });\n    }, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0;\n    var n = r(0),\n      i = {\n        methodMap: [\"debug\", \"info\", \"warn\", \"error\"],\n        level: \"info\",\n        lookupLevel: function (e) {\n          if (\"string\" == typeof e) {\n            var t = n.indexOf(i.methodMap, e.toLowerCase());\n            e = t >= 0 ? t : parseInt(e, 10);\n          }\n          return e;\n        },\n        log: function (e) {\n          if (e = i.lookupLevel(e), \"undefined\" != typeof console && i.lookupLevel(i.level) <= e) {\n            var t = i.methodMap[e];\n            console[t] || (t = \"log\");\n            for (var r = arguments.length, n = Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++) n[o - 1] = arguments[o];\n            console[t].apply(console, n);\n          }\n        }\n      };\n    t.default = i, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    function n(e) {\n      this.string = e;\n    }\n    t.__esModule = !0, n.prototype.toString = n.prototype.toHTML = function () {\n      return \"\" + this.string;\n    }, t.default = n, e.exports = t.default;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    t.__esModule = !0, t.checkRevision = function (e) {\n      var t = e && e[0] || 1,\n        r = a.COMPILER_REVISION;\n      if (t >= a.LAST_COMPATIBLE_COMPILER_REVISION && t <= a.COMPILER_REVISION) return;\n      if (t < a.LAST_COMPATIBLE_COMPILER_REVISION) {\n        var n = a.REVISION_CHANGES[r],\n          i = a.REVISION_CHANGES[t];\n        throw new l.default(\"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (\" + n + \") or downgrade your runtime to an older version (\" + i + \").\");\n      }\n      throw new l.default(\"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (\" + e[1] + \").\");\n    }, t.template = function (e, t) {\n      if (!t) throw new l.default(\"No environment passed to template\");\n      if (!e || !e.main) throw new l.default(\"Unknown template object: \" + typeof e);\n      e.main.decorator = e.main_d, t.VM.checkRevision(e.compiler);\n      var r = e.compiler && 7 === e.compiler[0];\n      var n = {\n        strict: function (e, t, r) {\n          if (!(e && t in e)) throw new l.default('\"' + t + '\" not defined in ' + e, {\n            loc: r\n          });\n          return e[t];\n        },\n        lookup: function (e, t) {\n          for (var r = e.length, n = 0; n < r; n++) if (e[n] && null != e[n][t]) return e[n][t];\n        },\n        lambda: function (e, t) {\n          return \"function\" == typeof e ? e.call(t) : e;\n        },\n        escapeExpression: i.escapeExpression,\n        invokePartial: function (r, n, o) {\n          o.hash && (n = i.extend({}, n, o.hash), o.ids && (o.ids[0] = !0)), r = t.VM.resolvePartial.call(this, r, n, o);\n          var a = i.extend({}, o, {\n              hooks: this.hooks\n            }),\n            s = t.VM.invokePartial.call(this, r, n, a);\n          if (null == s && t.compile && (o.partials[o.name] = t.compile(r, e.compilerOptions, t), s = o.partials[o.name](n, a)), null != s) {\n            if (o.indent) {\n              for (var u = s.split(\"\\n\"), c = 0, d = u.length; c < d && (u[c] || c + 1 !== d); c++) u[c] = o.indent + u[c];\n              s = u.join(\"\\n\");\n            }\n            return s;\n          }\n          throw new l.default(\"The partial \" + o.name + \" could not be compiled when running in runtime-only mode\");\n        },\n        fn: function (t) {\n          var r = e[t];\n          return r.decorator = e[t + \"_d\"], r;\n        },\n        programs: [],\n        program: function (e, t, r, n, i) {\n          var o = this.programs[e],\n            l = this.fn(e);\n          return t || i || n || r ? o = u(this, e, l, t, r, n, i) : o || (o = this.programs[e] = u(this, e, l)), o;\n        },\n        data: function (e, t) {\n          for (; e && t--;) e = e._parent;\n          return e;\n        },\n        nullContext: Object.seal({}),\n        noop: t.VM.noop,\n        compilerInfo: e.compiler\n      };\n      function o(t) {\n        var r = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1],\n          i = r.data;\n        o._setup(r), !r.partial && e.useData && (i = d(t, i));\n        var l = void 0,\n          a = e.useBlockParams ? [] : void 0;\n        function s(t) {\n          return \"\" + e.main(n, t, n.helpers, n.partials, i, a, l);\n        }\n        return e.useDepths && (l = r.depths ? t != r.depths[0] ? [t].concat(r.depths) : r.depths : [t]), (s = f(e.main, s, n, r.depths || [], i, a))(t, r);\n      }\n      return o.isTop = !0, o._setup = function (o) {\n        if (o.partial) n.helpers = o.helpers, n.partials = o.partials, n.decorators = o.decorators, n.hooks = o.hooks;else {\n          n.helpers = i.extend({}, t.helpers, o.helpers), e.usePartial && (n.partials = i.extend({}, t.partials, o.partials)), (e.usePartial || e.useDecorators) && (n.decorators = i.extend({}, t.decorators, o.decorators)), n.hooks = {};\n          var l = o.allowCallsToHelperMissing || r;\n          s.moveHelperToHooks(n, \"helperMissing\", l), s.moveHelperToHooks(n, \"blockHelperMissing\", l);\n        }\n      }, o._child = function (t, r, i, o) {\n        if (e.useBlockParams && !i) throw new l.default(\"must pass block params\");\n        if (e.useDepths && !o) throw new l.default(\"must pass parent depths\");\n        return u(n, t, e[t], r, 0, i, o);\n      }, o;\n    }, t.wrapProgram = u, t.resolvePartial = function (e, t, r) {\n      e ? e.call || r.name || (r.name = e, e = r.partials[e]) : e = \"@partial-block\" === r.name ? r.data[\"partial-block\"] : r.partials[r.name];\n      return e;\n    }, t.invokePartial = function (e, t, r) {\n      var n = r.data && r.data[\"partial-block\"];\n      r.partial = !0, r.ids && (r.data.contextPath = r.ids[0] || r.data.contextPath);\n      var o = void 0;\n      r.fn && r.fn !== c && function () {\n        r.data = a.createFrame(r.data);\n        var e = r.fn;\n        o = r.data[\"partial-block\"] = function (t) {\n          var r = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1];\n          return r.data = a.createFrame(r.data), r.data[\"partial-block\"] = n, e(t, r);\n        }, e.partials && (r.partials = i.extend({}, r.partials, e.partials));\n      }();\n      void 0 === e && o && (e = o);\n      if (void 0 === e) throw new l.default(\"The partial \" + r.name + \" could not be found\");\n      if (e instanceof Function) return e(t, r);\n    }, t.noop = c;\n    var n,\n      i = function (e) {\n        if (e && e.__esModule) return e;\n        var t = {};\n        if (null != e) for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n        return t.default = e, t;\n      }(r(0)),\n      o = r(1),\n      l = (n = o) && n.__esModule ? n : {\n        default: n\n      },\n      a = r(10),\n      s = r(11);\n    function u(e, t, r, n, i, o, l) {\n      function a(t) {\n        var i = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1],\n          a = l;\n        return !l || t == l[0] || t === e.nullContext && null === l[0] || (a = [t].concat(l)), r(e, t, e.helpers, e.partials, i.data || n, o && [i.blockParams].concat(o), a);\n      }\n      return (a = f(r, a, e, l, n, o)).program = t, a.depth = l ? l.length : 0, a.blockParams = i || 0, a;\n    }\n    function c() {\n      return \"\";\n    }\n    function d(e, t) {\n      return t && \"root\" in t || ((t = t ? a.createFrame(t) : {}).root = e), t;\n    }\n    function f(e, t, r, n, o, l) {\n      if (e.decorator) {\n        var a = {};\n        t = e.decorator(t, a, r, n && n[0], o, l, n), i.extend(t, a);\n      }\n      return t;\n    }\n  }, function (e, t, r) {\n    \"use strict\";\n\n    (function (r) {\n      t.__esModule = !0, t.default = function (e) {\n        var t = void 0 !== r ? r : window,\n          n = t.Handlebars;\n        e.noConflict = function () {\n          return t.Handlebars === e && (t.Handlebars = n), e;\n        };\n      }, e.exports = t.default;\n    }).call(this, r(4));\n  }]);\n});","map":{"version":3,"mappings":"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","names":["root","factory","exports","module","define","amd","erudaCode","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","extend","indexOf","array","len","length","escapeExpression","string","toHTML","possible","test","replace","badChars","escapeChar","isEmpty","isArray","createFrame","frame","_parent","blockParams","params","ids","path","appendContextPath","contextPath","id","escape","chr","obj","arguments","toString","isFunction","Array","errorProps","Exception","message","node","loc","line","undefined","endLineNumber","column","endColumn","start","end","tmp","Error","constructor","this","idx","captureStackTrace","lineNumber","nop","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","superPropBase","_get","target","receiver","Reflect","base","desc","getOwnPropertyDescriptor","g","Function","e","useSourceMap","list","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","push","_typeof","iterator","userAgent","navigator","platform","gecko","ie_upto10","ie_11up","exec","edge","ie","ie_version","document","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","match","Number","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","range","rmClass","current","className","after","slice","index","removeChildren","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","elt","tag","style","createElement","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","joinClasses","a","b","as","split","createRange","endNode","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","f","args","apply","copyObj","overwrite","prop","countColumn","tabSize","startIndex","startValue","search","nextTab","selectionStart","selectionEnd","_e","Delayed","time","handler","onTimeout","self","Date","setTimeout","set","ms","clearTimeout","Pass","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","Math","min","spaceStrs","spaceStr","lst","arr","out","nothing","createObj","props","inst","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","toLowerCase","isWordChar","helper","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","str","dir","charAt","findFirst","pred","from","to","midF","mid","ceil","floor","bidiOther","getBidiPartAt","order","sticky","found","cur","bidiOrdering","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","direction","outerType","code","types","i$1","prev","type","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","j","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","i$7","at","j$2","splice","nstart","unshift","reverse","getOrder","text","noHandlers","on","emitter","addEventListener","attachEvent","_handlers","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","cm","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","result","nl","rt","hasSelection","getSelection","te","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","defineMode","dependencies","resolveMode","spec","getMode","options","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","val","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","doc","first","size","chunk","lines","children","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","height","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","String","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","max","clipPos","last","linelen","clipToLen","clipPosArray","eol","sol","peek","next","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","token","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","startCh","endCh","isInsert","old","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","offset","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","find","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","found$1","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","ext","built","background","wrap","insertBefore","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","gutterLeft","lineNumInnerWidth","k","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","parseInt","paddingRight","isNaN","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","abs","bottom","top","ensureLineHeights","place","nodeAndOffsetInLineMap","coverStart","coverEnd","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","head","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","add","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","readOnly","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","native","null","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","scrollIntoView","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","hasFocus","active","anchorNode","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","updateLine","linesFor","firstLine","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","NaN","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","mark","parts","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","v","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","curLine","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","getValue","lineSeparator","setValue","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","hint","oldPrev","newPrev","computeReplacedSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","CodeMirror","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","loadFile","file","allowDropFileTypes","reader","onload","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","char","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Tab","Enter","Insert","Esc","pcDefault","emacsy","macDefault","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","handled","up","showCrossHair","onKeyUp","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","dragStart","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","move","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","word","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","src","_top","onDragStart","inp","getField","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","findPosH","origDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","sawType","getHelper","hitSide","findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","textContent","previousSibling","dist$1","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","closing","extraLinebreak","close","addText","walk","cmText","markerID","isBlock","nodeName","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","scrollTo","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","rtlMoveVisually","goalColumn","goals","startChar","check","getScrollInfo","scrollToRange","interpret","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","method","contenteditable","defineMIME","mime","defineExtension","func","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","version","hasOwnProp","ObjToStr","MAX_ARR_IDX","_","allKeys","ret","noop","isUndef","optimizeCb","fn","ctx","argCount","collection","accumulator","has","objToStr","isFn","objStr","isNum","isArrLike","pow","each","iteratee","_keys","createAssigner","keysFn","cb","el","fontSize","setSelectionRange","nextTick","ensureCallable","TypeError","process","setImmediate","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","runClearTimeout","Item","browser","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","_interopRequireDefault","HandlebarsEnvironment","_utils","_exception2","_helpers","_decorators","_logger2","VERSION","COMPILER_REVISION","LAST_COMPATIBLE_COMPILER_REVISION","REVISION_CHANGES","1","2","4","5","6","7","partials","decorators","registerDefaultHelpers","registerDefaultDecorators","logger","log","unregisterHelper","registerPartial","partial","unregisterPartial","registerDecorator","unregisterDecorator","instance","_helpersBlockHelperMissing2","_helpersEach2","_helpersHelperMissing2","_helpersIf2","_helpersLog2","_helpersLookup2","_helpersWith2","moveHelperToHooks","helperName","keepHelper","hooks","Constructor","_defineProperties","descriptor","configurable","writable","protoProps","staticProps","assertThisInitialized","subClass","superClass","eruda","util","evalCss","beautify","Code","_style","require","_CodeMirrorStyle","_CodeMirrorCustomStyle","_editor","$el","html","_bindEvent","_$el","evalJs","console","error","editor","Tool","eval","ReferenceError","_setPrototypeOf","config","parserConfig","statementIndent","jsonldMode","jsonld","jsonMode","json","isTS","typescript","wordRE","wordCharacters","keywords","kw","A","B","C","D","operator","atom","if","while","with","else","do","try","finally","return","break","continue","new","delete","void","throw","debugger","var","const","let","function","catch","for","switch","case","in","typeof","instanceof","true","false","class","super","yield","export","import","extends","await","isOperatorChar","isJsonldKeyword","tp","cont","tokenBase","quote","tokenize","escaped","tokenComment","expressionAllowed","inSet","readRegexp","tokenQuasi","lexical","lastType","propertyIsEnumerable","maybeEnd","findFatArrow","fatArrowAt","arrow","depth","sawSomething","bracket","atomicTypes","number","variable","regexp","JSLexical","inScope","varname","localVars","cx","vars","marked","cc","pass","inList","register","block","newContext","registerVarScoped","Var","globalVars","isModifier","defaultVars","pushcontext","pushblockcontext","popcontext","pushlex","lex","poplex","expect","wanted","exp","statement","vardef","parenExpr","maybeexpression","maybeelse","functiondef","forspec","enumdef","typename","typeexpr","expression","maybelabel","maybeCatchBinding","afterExport","afterImport","funarg","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","classExpression","arrayLiteral","contCommasep","objprop","quasi","targetNoComma","maybeTypeArgs","maybeTarget","expr","continueQuasi","getterSetter","afterprop","maybetype","what","sep","proceed","maybetypeOrIn","mayberettype","isKW","afterType","typeprop","typearg","maybeReturnType","functiondecl","typeparam","maybeTypeDefault","maybeAssign","vardefCont","eltpattern","proppattern","_type","forspec1","forspec2","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","enummember","basecolumn","parseJS","textAfter","firstChar","isContinuedStatement","doubleIndentSwitch","blockCommentStart","blockCommentEnd","blockCommentContinue","lineComment","fold","closeBrackets","skipExpression","Timeout","clearFn","_id","_clearFn","scope","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","global","clearImmediate","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","script","onreadystatechange","random","callback","task","___CSS_LOADER_API_IMPORT___","Handlebars","template","compiler","main","depth0","useData","_interopRequireWildcard","newObj","_handlebarsSafeString2","_handlebarsException2","Utils","runtime","_handlebarsNoConflict2","hb","SafeString","VM","inverse","_exception","priorKey","execIteration","it","forEach","conditional","hash","includeZero","dangerousPropertyRegex","_decoratorsInline2","_decoratorsInline","original","methodMap","lookupLevel","levelMap","_len","_key","checkRevision","compilerInfo","compilerRevision","currentRevision","_base","runtimeVersions","compilerVersions","templateSpec","decorator","main_d","templateWasPrecompiledWithCompilerV7","strict","lookup","depths","lambda","invokePartial","resolvePartial","optionsWithHooks","compile","compilerOptions","programs","program","declaredBlockParams","programWrapper","wrapProgram","nullContext","seal","_setup","initData","useBlockParams","useDepths","executeDecorators","isTop","usePartial","useDecorators","keepHelperInHelpers","allowCallsToHelperMissing","_child","currentPartialBlock","partialBlock","prog","currentDepths","$Handlebars","noConflict"],"sourceRoot":"","sources":["webpack://erudaCode/webpack/universalModuleDefinition","webpack://erudaCode/webpack/bootstrap","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/utils.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/exception.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/getPrototypeOf.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/get.js","webpack://erudaCode/(webpack)/buildin/global.js","webpack://erudaCode/node_modules/_css-loader@3.4.1@css-loader/dist/runtime/api.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/typeof.js","webpack://erudaCode/node_modules/_codemirror@5.50.2@codemirror/lib/codemirror.js","webpack://erudaCode/src/util.js","webpack://erudaCode/node_modules/_process@0.11.10@process/browser.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/base.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/classCallCheck.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/createClass.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/possibleConstructorReturn.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/inherits.js","webpack://erudaCode/src/index.js","webpack://erudaCode/src/code.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/assertThisInitialized.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/superPropBase.js","webpack://erudaCode/node_modules/_@babel_runtime@7.7.7@@babel/runtime/helpers/setPrototypeOf.js","webpack://erudaCode/node_modules/_codemirror@5.50.2@codemirror/mode/javascript/javascript.js","webpack://erudaCode/node_modules/_timers-browserify@2.0.11@timers-browserify/main.js","webpack://erudaCode/node_modules/_setimmediate@1.0.5@setimmediate/setImmediate.js","webpack://erudaCode/src/style.scss","webpack://erudaCode/node_modules/_codemirror@5.50.2@codemirror/lib/codemirror.css","webpack://erudaCode/src/CodeMirror.css","webpack://erudaCode/src/template.hbs","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/runtime.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars.runtime.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/each.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/helper-missing.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/if.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/log.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/lookup.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/helpers/with.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/decorators.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/decorators/inline.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/logger.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/safe-string.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/runtime.js","webpack://erudaCode/node_modules/_handlebars@4.5.3@handlebars/dist/cjs/handlebars/no-conflict.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"erudaCode\"] = factory();\n\telse\n\t\troot[\"erudaCode\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","'use strict';\n\nexports.__esModule = true;\nexports.extend = extend;\nexports.indexOf = indexOf;\nexports.escapeExpression = escapeExpression;\nexports.isEmpty = isEmpty;\nexports.createFrame = createFrame;\nexports.blockParams = blockParams;\nexports.appendContextPath = appendContextPath;\n\nvar escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n  '=': '&#x3D;'\n};\n\nvar badChars = /[&<>\"'`=]/g,\n    possible = /[&<>\"'`=]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction extend(obj /* , ...source */) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nvar toString = Object.prototype.toString;\n\nexports.toString = toString;\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\n/* eslint-disable func-style */\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  exports.isFunction = isFunction = function (value) {\n    return typeof value === 'function' && toString.call(value) === '[object Function]';\n  };\n}\nexports.isFunction = isFunction;\n\n/* eslint-enable func-style */\n\n/* istanbul ignore next */\nvar isArray = Array.isArray || function (value) {\n  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;\n};\n\nexports.isArray = isArray;\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\n\nfunction indexOf(array, value) {\n  for (var i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction escapeExpression(string) {\n  if (typeof string !== 'string') {\n    // don't escape SafeStrings, since they're already safe\n    if (string && string.toHTML) {\n      return string.toHTML();\n    } else if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = '' + string;\n  }\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\nfunction isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction createFrame(object) {\n  var frame = extend({}, object);\n  frame._parent = object;\n  return frame;\n}\n\nfunction blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nfunction appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQ0EsSUFBTSxNQUFNLEdBQUc7QUFDYixLQUFHLEVBQUUsT0FBTztBQUNaLEtBQUcsRUFBRSxNQUFNO0FBQ1gsS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsUUFBUTtBQUNiLEtBQUcsRUFBRSxRQUFRO0FBQ2IsS0FBRyxFQUFFLFFBQVE7QUFDYixLQUFHLEVBQUUsUUFBUTtDQUNkLENBQUM7O0FBRUYsSUFBTSxRQUFRLEdBQUcsWUFBWTtJQUN2QixRQUFRLEdBQUcsV0FBVyxDQUFDOztBQUU3QixTQUFTLFVBQVUsQ0FBQyxHQUFHLEVBQUU7QUFDdkIsU0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDcEI7O0FBRU0sU0FBUyxNQUFNLENBQUMsR0FBRyxvQkFBbUI7QUFDM0MsT0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDekMsU0FBSyxJQUFJLEdBQUcsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDNUIsVUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFO0FBQzNELFdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDOUI7S0FDRjtHQUNGOztBQUVELFNBQU8sR0FBRyxDQUFDO0NBQ1o7O0FBRU0sSUFBSSxRQUFRLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7Ozs7OztBQUtoRCxJQUFJLFVBQVUsR0FBRyxvQkFBUyxLQUFLLEVBQUU7QUFDL0IsU0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLENBQUM7Q0FDcEMsQ0FBQzs7O0FBR0YsSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDbkIsVUFJTSxVQUFVLEdBSmhCLFVBQVUsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUMzQixXQUFPLE9BQU8sS0FBSyxLQUFLLFVBQVUsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLG1CQUFtQixDQUFDO0dBQ3BGLENBQUM7Q0FDSDtRQUNPLFVBQVUsR0FBVixVQUFVOzs7OztBQUlYLElBQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLElBQUksVUFBUyxLQUFLLEVBQUU7QUFDdEQsU0FBTyxBQUFDLEtBQUssSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEdBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7Q0FDakcsQ0FBQzs7Ozs7QUFHSyxTQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ3BDLE9BQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDaEQsUUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxFQUFFO0FBQ3RCLGFBQU8sQ0FBQyxDQUFDO0tBQ1Y7R0FDRjtBQUNELFNBQU8sQ0FBQyxDQUFDLENBQUM7Q0FDWDs7QUFHTSxTQUFTLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtBQUN2QyxNQUFJLE9BQU8sTUFBTSxLQUFLLFFBQVEsRUFBRTs7QUFFOUIsUUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtBQUMzQixhQUFPLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUN4QixNQUFNLElBQUksTUFBTSxJQUFJLElBQUksRUFBRTtBQUN6QixhQUFPLEVBQUUsQ0FBQztLQUNYLE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNsQixhQUFPLE1BQU0sR0FBRyxFQUFFLENBQUM7S0FDcEI7Ozs7O0FBS0QsVUFBTSxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUM7R0FDdEI7O0FBRUQsTUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFBRSxXQUFPLE1BQU0sQ0FBQztHQUFFO0FBQzlDLFNBQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7Q0FDN0M7O0FBRU0sU0FBUyxPQUFPLENBQUMsS0FBSyxFQUFFO0FBQzdCLE1BQUksQ0FBQyxLQUFLLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtBQUN6QixXQUFPLElBQUksQ0FBQztHQUNiLE1BQU0sSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDL0MsV0FBTyxJQUFJLENBQUM7R0FDYixNQUFNO0FBQ0wsV0FBTyxLQUFLLENBQUM7R0FDZDtDQUNGOztBQUVNLFNBQVMsV0FBVyxDQUFDLE1BQU0sRUFBRTtBQUNsQyxNQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE9BQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLFNBQU8sS0FBSyxDQUFDO0NBQ2Q7O0FBRU0sU0FBUyxXQUFXLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtBQUN2QyxRQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNsQixTQUFPLE1BQU0sQ0FBQztDQUNmOztBQUVNLFNBQVMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLEVBQUUsRUFBRTtBQUNqRCxTQUFPLENBQUMsV0FBVyxHQUFHLFdBQVcsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEdBQUksRUFBRSxDQUFDO0NBQ3BEIiwiZmlsZSI6InV0aWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBlc2NhcGUgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmI3gyNzsnLFxuICAnYCc6ICcmI3g2MDsnLFxuICAnPSc6ICcmI3gzRDsnXG59O1xuXG5jb25zdCBiYWRDaGFycyA9IC9bJjw+XCInYD1dL2csXG4gICAgICBwb3NzaWJsZSA9IC9bJjw+XCInYD1dLztcblxuZnVuY3Rpb24gZXNjYXBlQ2hhcihjaHIpIHtcbiAgcmV0dXJuIGVzY2FwZVtjaHJdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iai8qICwgLi4uc291cmNlICovKSB7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGFyZ3VtZW50c1tpXSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcmd1bWVudHNbaV0sIGtleSkpIHtcbiAgICAgICAgb2JqW2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgbGV0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLy8gU291cmNlZCBmcm9tIGxvZGFzaFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jlc3RpZWpzL2xvZGFzaC9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuLyogZXNsaW50LWRpc2FibGUgZnVuYy1zdHlsZSAqL1xubGV0IGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIGZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmlmIChpc0Z1bmN0aW9uKC94LykpIHtcbiAgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgfTtcbn1cbmV4cG9ydCB7aXNGdW5jdGlvbn07XG4vKiBlc2xpbnQtZW5hYmxlIGZ1bmMtc3R5bGUgKi9cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpID8gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XScgOiBmYWxzZTtcbn07XG5cbi8vIE9sZGVyIElFIHZlcnNpb25zIGRvIG5vdCBkaXJlY3RseSBzdXBwb3J0IGluZGV4T2Ygc28gd2UgbXVzdCBpbXBsZW1lbnQgb3VyIG93biwgc2FkbHkuXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdmFsdWUpIHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGFycmF5W2ldID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlRXhwcmVzc2lvbihzdHJpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgLy8gZG9uJ3QgZXNjYXBlIFNhZmVTdHJpbmdzLCBzaW5jZSB0aGV5J3JlIGFscmVhZHkgc2FmZVxuICAgIGlmIChzdHJpbmcgJiYgc3RyaW5nLnRvSFRNTCkge1xuICAgICAgcmV0dXJuIHN0cmluZy50b0hUTUwoKTtcbiAgICB9IGVsc2UgaWYgKHN0cmluZyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIGlmICghc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nICsgJyc7XG4gICAgfVxuXG4gICAgLy8gRm9yY2UgYSBzdHJpbmcgY29udmVyc2lvbiBhcyB0aGlzIHdpbGwgYmUgZG9uZSBieSB0aGUgYXBwZW5kIHJlZ2FyZGxlc3MgYW5kXG4gICAgLy8gdGhlIHJlZ2V4IHRlc3Qgd2lsbCBkbyB0aGlzIHRyYW5zcGFyZW50bHkgYmVoaW5kIHRoZSBzY2VuZXMsIGNhdXNpbmcgaXNzdWVzIGlmXG4gICAgLy8gYW4gb2JqZWN0J3MgdG8gc3RyaW5nIGhhcyBlc2NhcGVkIGNoYXJhY3RlcnMgaW4gaXQuXG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmc7XG4gIH1cblxuICBpZiAoIXBvc3NpYmxlLnRlc3Qoc3RyaW5nKSkgeyByZXR1cm4gc3RyaW5nOyB9XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShiYWRDaGFycywgZXNjYXBlQ2hhcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyYW1lKG9iamVjdCkge1xuICBsZXQgZnJhbWUgPSBleHRlbmQoe30sIG9iamVjdCk7XG4gIGZyYW1lLl9wYXJlbnQgPSBvYmplY3Q7XG4gIHJldHVybiBmcmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJsb2NrUGFyYW1zKHBhcmFtcywgaWRzKSB7XG4gIHBhcmFtcy5wYXRoID0gaWRzO1xuICByZXR1cm4gcGFyYW1zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kQ29udGV4dFBhdGgoY29udGV4dFBhdGgsIGlkKSB7XG4gIHJldHVybiAoY29udGV4dFBhdGggPyBjb250ZXh0UGF0aCArICcuJyA6ICcnKSArIGlkO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n\nvar errorProps = ['description', 'fileName', 'lineNumber', 'endLineNumber', 'message', 'name', 'number', 'stack'];\n\nfunction Exception(message, node) {\n  var loc = node && node.loc,\n      line = undefined,\n      endLineNumber = undefined,\n      column = undefined,\n      endColumn = undefined;\n\n  if (loc) {\n    line = loc.start.line;\n    endLineNumber = loc.end.line;\n    column = loc.start.column;\n    endColumn = loc.end.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  var tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (var idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  /* istanbul ignore else */\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, Exception);\n  }\n\n  try {\n    if (loc) {\n      this.lineNumber = line;\n      this.endLineNumber = endLineNumber;\n\n      // Work around issue under safari where we can't directly set the column value\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(this, 'column', {\n          value: column,\n          enumerable: true\n        });\n        Object.defineProperty(this, 'endColumn', {\n          value: endColumn,\n          enumerable: true\n        });\n      } else {\n        this.column = column;\n        this.endColumn = endColumn;\n      }\n    }\n  } catch (nop) {\n    /* Ignore if the browser is very particular */\n  }\n}\n\nException.prototype = new Error();\n\nexports['default'] = Exception;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2V4Y2VwdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsSUFBTSxVQUFVLEdBQUcsQ0FBQyxhQUFhLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7O0FBRXBILFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDaEMsTUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHO01BQ3RCLElBQUksWUFBQTtNQUNKLGFBQWEsWUFBQTtNQUNiLE1BQU0sWUFBQTtNQUNOLFNBQVMsWUFBQSxDQUFDOztBQUVkLE1BQUksR0FBRyxFQUFFO0FBQ1AsUUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3RCLGlCQUFhLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDN0IsVUFBTSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0FBQzFCLGFBQVMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQzs7QUFFM0IsV0FBTyxJQUFJLEtBQUssR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQztHQUN4Qzs7QUFFRCxNQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDOzs7QUFHMUQsT0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUU7QUFDaEQsUUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUM5Qzs7O0FBR0QsTUFBSSxLQUFLLENBQUMsaUJBQWlCLEVBQUU7QUFDM0IsU0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztHQUMxQzs7QUFFRCxNQUFJO0FBQ0YsUUFBSSxHQUFHLEVBQUU7QUFDUCxVQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN2QixVQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQzs7OztBQUluQyxVQUFJLE1BQU0sQ0FBQyxjQUFjLEVBQUU7QUFDekIsY0FBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFO0FBQ3BDLGVBQUssRUFBRSxNQUFNO0FBQ2Isb0JBQVUsRUFBRSxJQUFJO1NBQ2pCLENBQUMsQ0FBQztBQUNILGNBQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRTtBQUN2QyxlQUFLLEVBQUUsU0FBUztBQUNoQixvQkFBVSxFQUFFLElBQUk7U0FDakIsQ0FBQyxDQUFDO09BQ0osTUFBTTtBQUNMLFlBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3JCLFlBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO09BQzVCO0tBQ0Y7R0FDRixDQUFDLE9BQU8sR0FBRyxFQUFFOztHQUViO0NBQ0Y7O0FBRUQsU0FBUyxDQUFDLFNBQVMsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDOztxQkFFbkIsU0FBUyIsImZpbGUiOiJleGNlcHRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xpbmVOdW1iZXInLCAnZW5kTGluZU51bWJlcicsICdtZXNzYWdlJywgJ25hbWUnLCAnbnVtYmVyJywgJ3N0YWNrJ107XG5cbmZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlLCBub2RlKSB7XG4gIGxldCBsb2MgPSBub2RlICYmIG5vZGUubG9jLFxuICAgICAgbGluZSxcbiAgICAgIGVuZExpbmVOdW1iZXIsXG4gICAgICBjb2x1bW4sXG4gICAgICBlbmRDb2x1bW47XG5cbiAgaWYgKGxvYykge1xuICAgIGxpbmUgPSBsb2Muc3RhcnQubGluZTtcbiAgICBlbmRMaW5lTnVtYmVyID0gbG9jLmVuZC5saW5lO1xuICAgIGNvbHVtbiA9IGxvYy5zdGFydC5jb2x1bW47XG4gICAgZW5kQ29sdW1uID0gbG9jLmVuZC5jb2x1bW47XG5cbiAgICBtZXNzYWdlICs9ICcgLSAnICsgbGluZSArICc6JyArIGNvbHVtbjtcbiAgfVxuXG4gIGxldCB0bXAgPSBFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuICAvLyBVbmZvcnR1bmF0ZWx5IGVycm9ycyBhcmUgbm90IGVudW1lcmFibGUgaW4gQ2hyb21lIChhdCBsZWFzdCksIHNvIGBmb3IgcHJvcCBpbiB0bXBgIGRvZXNuJ3Qgd29yay5cbiAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZXJyb3JQcm9wcy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgdGhpc1tlcnJvclByb3BzW2lkeF1dID0gdG1wW2Vycm9yUHJvcHNbaWR4XV07XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFeGNlcHRpb24pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAobG9jKSB7XG4gICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lO1xuICAgICAgdGhpcy5lbmRMaW5lTnVtYmVyID0gZW5kTGluZU51bWJlcjtcblxuICAgICAgLy8gV29yayBhcm91bmQgaXNzdWUgdW5kZXIgc2FmYXJpIHdoZXJlIHdlIGNhbid0IGRpcmVjdGx5IHNldCB0aGUgY29sdW1uIHZhbHVlXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NvbHVtbicsIHtcbiAgICAgICAgICB2YWx1ZTogY29sdW1uLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZW5kQ29sdW1uJywge1xuICAgICAgICAgIHZhbHVlOiBlbmRDb2x1bW4sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29sdW1uID0gY29sdW1uO1xuICAgICAgICB0aGlzLmVuZENvbHVtbiA9IGVuZENvbHVtbjtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKG5vcCkge1xuICAgIC8qIElnbm9yZSBpZiB0aGUgYnJvd3NlciBpcyB2ZXJ5IHBhcnRpY3VsYXIgKi9cbiAgfVxufVxuXG5FeGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEV4Y2VwdGlvbjtcbiJdfQ==\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    for (var i = 0; i < modules.length; i++) {\n      var item = [].concat(modules[i]);\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 30;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n        cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      onBlur(cm);\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {this.history = new History(this.history.maxGeneration);},\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var loadFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n          { return }\n\n        var reader = new FileReader;\n        reader.onload = operation(cm, function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) { content = \"\"; }\n          text[i] = content;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if (webkit || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus(); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    delayBlurEvent(cm);\n    setTimeout(function () { return display.input.focus(); }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(bind(onFocus, this), 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    function findNextLine() {\n      var l = pos.line + dir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    on(div, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = this.cm.state.focused;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor())\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, …*/) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.50.2\";\n\n  return CodeMirror;\n\n})));\n","// Built by eustia.\n'use strict'\n\nvar _ = {}\n\n/* ------------------------------ allKeys ------------------------------ */\n\nexport var allKeys = (_.allKeys = (function() {\n  /* Retrieve all the names of object's own and inherited properties.\n   *\n   * |Name  |Type  |Desc                       |\n   * |------|------|---------------------------|\n   * |obj   |object|Object to query            |\n   * |return|array |Array of all property names|\n   *\n   * > Members of Object's prototype won't be retrieved.\n   *\n   * ```javascript\n   * var obj = Object.create({zero: 0});\n   * obj.one = 1;\n   * allKeys(obj) // -> ['zero', 'one']\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  function exports(obj) {\n    var ret = [],\n      key\n\n    for (key in obj) ret.push(key)\n\n    return ret\n  }\n\n  return exports\n})())\n\n/* ------------------------------ noop ------------------------------ */\n\nexport var noop = (_.noop = (function() {\n  /* A no-operation function.\n   *\n   * ```javascript\n   * noop(); // Does nothing\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  function exports() {}\n\n  return exports\n})())\n\n/* ------------------------------ isUndef ------------------------------ */\n\nexport var isUndef = (_.isUndef = (function() {\n  /* Check if value is undefined.\n   *\n   * |Name  |Type   |Desc                      |\n   * |------|-------|--------------------------|\n   * |val   |*      |Value to check            |\n   * |return|boolean|True if value is undefined|\n   *\n   * ```javascript\n   * isUndef(void 0); // -> true\n   * isUndef(null); // -> false\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  function exports(val) {\n    return val === void 0\n  }\n\n  return exports\n})())\n\n/* ------------------------------ optimizeCb ------------------------------ */\n\nexport var optimizeCb = (_.optimizeCb = (function() {\n  /* Used for function context binding.\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * isUndef\n   */\n\n  function exports(fn, ctx, argCount) {\n    if (isUndef(ctx)) return fn\n\n    switch (argCount == null ? 3 : argCount) {\n      case 1:\n        return function(val) {\n          return fn.call(ctx, val)\n        }\n      case 3:\n        return function(val, idx, collection) {\n          return fn.call(ctx, val, idx, collection)\n        }\n      case 4:\n        return function(accumulator, val, idx, collection) {\n          return fn.call(ctx, accumulator, val, idx, collection)\n        }\n    }\n\n    return function() {\n      return fn.apply(ctx, arguments)\n    }\n  }\n\n  return exports\n})())\n\n/* ------------------------------ has ------------------------------ */\n\nexport var has = (_.has = (function() {\n  /* Checks if key is a direct property.\n   *\n   * |Name  |Type   |Desc                            |\n   * |------|-------|--------------------------------|\n   * |obj   |object |Object to query                 |\n   * |key   |string |Path to check                   |\n   * |return|boolean|True if key is a direct property|\n   *\n   * ```javascript\n   * has({one: 1}, 'one'); // -> true\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  var hasOwnProp = Object.prototype.hasOwnProperty\n\n  function exports(obj, key) {\n    return hasOwnProp.call(obj, key)\n  }\n\n  return exports\n})())\n\n/* ------------------------------ keys ------------------------------ */\n\nexport var keys = (_.keys = (function(exports) {\n  /* Create an array of the own enumerable property names of object.\n   *\n   * |Name  |Type  |Desc                   |\n   * |------|------|-----------------------|\n   * |obj   |object|Object to query        |\n   * |return|array |Array of property names|\n   *\n   * ```javascript\n   * keys({a: 1}); // -> ['a']\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * has\n   */\n\n  exports =\n    Object.keys ||\n    function(obj) {\n      var ret = [],\n        key\n\n      for (key in obj) {\n        if (has(obj, key)) ret.push(key)\n      }\n\n      return ret\n    }\n\n  return exports\n})({}))\n\n/* ------------------------------ objToStr ------------------------------ */\n\nexport var objToStr = (_.objToStr = (function() {\n  /* Alias of Object.prototype.toString.\n   *\n   * |Name  |Type  |Desc                                |\n   * |------|------|------------------------------------|\n   * |value |*     |Source value                        |\n   * |return|string|String representation of given value|\n   *\n   * ```javascript\n   * objToStr(5); // -> '[object Number]'\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  var ObjToStr = Object.prototype.toString\n\n  function exports(val) {\n    return ObjToStr.call(val)\n  }\n\n  return exports\n})())\n\n/* ------------------------------ isFn ------------------------------ */\n\nexport var isFn = (_.isFn = (function() {\n  /* Check if value is a function.\n   *\n   * |Name  |Type   |Desc                       |\n   * |------|-------|---------------------------|\n   * |val   |*      |Value to check             |\n   * |return|boolean|True if value is a function|\n   *\n   * Generator function is also classified as true.\n   *\n   * ```javascript\n   * isFn(function() {}); // -> true\n   * isFn(function*() {}); // -> true\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * objToStr\n   */\n\n  function exports(val) {\n    var objStr = objToStr(val)\n\n    return (\n      objStr === '[object Function]' || objStr === '[object GeneratorFunction]'\n    )\n  }\n\n  return exports\n})())\n\n/* ------------------------------ isNum ------------------------------ */\n\nexport var isNum = (_.isNum = (function() {\n  /* Check if value is classified as a Number primitive or object.\n   *\n   * |Name  |Type   |Desc                                 |\n   * |------|-------|-------------------------------------|\n   * |value |*      |Value to check                       |\n   * |return|boolean|True if value is correctly classified|\n   *\n   * ```javascript\n   * isNum(5); // -> true\n   * isNum(5.1); // -> true\n   * isNum({}); // -> false\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * objToStr\n   */\n\n  function exports(val) {\n    return objToStr(val) === '[object Number]'\n  }\n\n  return exports\n})())\n\n/* ------------------------------ isArrLike ------------------------------ */\n\nexport var isArrLike = (_.isArrLike = (function() {\n  /* Check if value is array-like.\n   *\n   * |Name  |Type   |Desc                       |\n   * |------|-------|---------------------------|\n   * |value |*      |Value to check             |\n   * |return|boolean|True if value is array like|\n   *\n   * > Function returns false.\n   *\n   * ```javascript\n   * isArrLike('test'); // -> true\n   * isArrLike(document.body.children); // -> true;\n   * isArrLike([1, 2, 3]); // -> true\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * isNum isFn\n   */\n\n  var MAX_ARR_IDX = Math.pow(2, 53) - 1\n\n  function exports(val) {\n    if (!val) return false\n\n    var len = val.length\n\n    return isNum(len) && len >= 0 && len <= MAX_ARR_IDX && !isFn(val)\n  }\n\n  return exports\n})())\n\n/* ------------------------------ each ------------------------------ */\n\nexport var each = (_.each = (function() {\n  /* Iterate over elements of collection and invokes iteratee for each element.\n   *\n   * |Name    |Type        |Desc                          |\n   * |--------|------------|------------------------------|\n   * |obj     |object array|Collection to iterate over    |\n   * |iteratee|function    |Function invoked per iteration|\n   * |[ctx]   |*           |Function context              |\n   *\n   * ```javascript\n   * each({'a': 1, 'b': 2}, function (val, key) {});\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * isArrLike keys optimizeCb\n   */\n\n  function exports(obj, iteratee, ctx) {\n    iteratee = optimizeCb(iteratee, ctx)\n\n    var i, len\n\n    if (isArrLike(obj)) {\n      for (i = 0, len = obj.length; i < len; i++) iteratee(obj[i], i, obj)\n    } else {\n      var _keys = keys(obj)\n      for (i = 0, len = _keys.length; i < len; i++) {\n        iteratee(obj[_keys[i]], _keys[i], obj)\n      }\n    }\n\n    return obj\n  }\n\n  return exports\n})())\n\n/* ------------------------------ createAssigner ------------------------------ */\n\nexport var createAssigner = (_.createAssigner = (function() {\n  /* Used to create extend, extendOwn and defaults.\n   *\n   * |Name    |Type    |Desc                          |\n   * |--------|--------|------------------------------|\n   * |keysFn  |function|Function to get object keys   |\n   * |defaults|boolean |No override when set to true  |\n   * |return  |function|Result function, extend...    |\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * isUndef each\n   */\n\n  function exports(keysFn, defaults) {\n    return function(obj) {\n      each(arguments, function(src, idx) {\n        if (idx === 0) return\n\n        var keys = keysFn(src)\n\n        each(keys, function(key) {\n          if (!defaults || isUndef(obj[key])) obj[key] = src[key]\n        })\n      })\n\n      return obj\n    }\n  }\n\n  return exports\n})())\n\n/* ------------------------------ extend ------------------------------ */\n\nexport var extend = (_.extend = (function(exports) {\n  /* Copy all of the properties in the source objects over to the destination object.\n   *\n   * |Name  |Type  |Desc              |\n   * |------|------|------------------|\n   * |obj   |object|Destination object|\n   * |...src|object|Sources objects   |\n   * |return|object|Destination object|\n   *\n   * ```javascript\n   * extend({name: 'RedHood'}, {age: 24}); // -> {name: 'RedHood', age: 24}\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  /* dependencies\n   * createAssigner allKeys\n   */\n\n  exports = createAssigner(allKeys)\n\n  return exports\n})({}))\n\n/* ------------------------------ copy ------------------------------ */\n\nexport var copy = (_.copy = (function() {\n  /* Copy text to clipboard using document.execCommand.\n   *\n   * |Name|Type    |Desc             |\n   * |----|--------|-----------------|\n   * |text|string  |Text to copy     |\n   * |[cb]|function|Optional callback|\n   *\n   * ```javascript\n   * copy('text', function (err)\n   * {\n   *     // Handle errors.\n   * });\n   * ```\n   */\n\n  /* module\n   * env: browser\n   * test: browser\n   */\n\n  /* dependencies\n   * extend noop\n   */\n\n  function exports(text, cb) {\n    cb = cb || noop\n\n    var el = document.createElement('textarea'),\n      body = document.body\n\n    extend(el.style, {\n      fontSize: '12pt',\n      border: '0',\n      padding: '0',\n      margin: '0',\n      position: 'absolute',\n      left: '-9999px'\n    })\n\n    el.value = text\n\n    body.appendChild(el)\n\n    // Prevent showing ios keyboard.\n    el.setAttribute('readonly', '')\n    el.select()\n    el.setSelectionRange(0, text.length)\n\n    try {\n      document.execCommand('copy')\n      cb()\n    } catch (e) {\n      cb(e)\n    } finally {\n      body.removeChild(el)\n    }\n  }\n\n  return exports\n})())\n\n/* ------------------------------ nextTick ------------------------------ */\n\nexport var nextTick = (_.nextTick = (function(exports) {\n  /* Next tick for both node and browser.\n   *\n   * |Name|Type    |Desc            |\n   * |----|--------|----------------|\n   * |cb  |function|Function to call|\n   *\n   * Use process.nextTick if available.\n   *\n   * Otherwise setImmediate or setTimeout is used as fallback.\n   *\n   * ```javascript\n   * nextTick(function ()\n   * {\n   *     // Do something...\n   * });\n   * ```\n   */\n\n  /* module\n   * env: all\n   * test: all\n   */\n\n  if (typeof process === 'object' && process.nextTick) {\n    exports = process.nextTick\n  } else if (typeof setImmediate === 'function') {\n    exports = function(cb) {\n      setImmediate(ensureCallable(cb))\n    }\n  } else {\n    exports = function(cb) {\n      setTimeout(ensureCallable(cb), 0)\n    }\n  }\n\n  function ensureCallable(fn) {\n    if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function')\n\n    return fn\n  }\n\n  return exports\n})({}))\n\nexport default _\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nexports.__esModule = true;\nexports.HandlebarsEnvironment = HandlebarsEnvironment;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('./utils');\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _helpers = require('./helpers');\n\nvar _decorators = require('./decorators');\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar VERSION = '4.5.3';\nexports.VERSION = VERSION;\nvar COMPILER_REVISION = 8;\nexports.COMPILER_REVISION = COMPILER_REVISION;\nvar LAST_COMPATIBLE_COMPILER_REVISION = 7;\n\nexports.LAST_COMPATIBLE_COMPILER_REVISION = LAST_COMPATIBLE_COMPILER_REVISION;\nvar REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1',\n  7: '>= 4.0.0 <4.3.0',\n  8: '>= 4.3.0'\n};\n\nexports.REVISION_CHANGES = REVISION_CHANGES;\nvar objectType = '[object Object]';\n\nfunction HandlebarsEnvironment(helpers, partials, decorators) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n  this.decorators = decorators || {};\n\n  _helpers.registerDefaultHelpers(this);\n  _decorators.registerDefaultDecorators(this);\n}\n\nHandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: _logger2['default'],\n  log: _logger2['default'].log,\n\n  registerHelper: function registerHelper(name, fn) {\n    if (_utils.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception2['default']('Arg not supported with multiple helpers');\n      }\n      _utils.extend(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function unregisterHelper(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function registerPartial(name, partial) {\n    if (_utils.toString.call(name) === objectType) {\n      _utils.extend(this.partials, name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new _exception2['default']('Attempting to register a partial called \"' + name + '\" as undefined');\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function unregisterPartial(name) {\n    delete this.partials[name];\n  },\n\n  registerDecorator: function registerDecorator(name, fn) {\n    if (_utils.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception2['default']('Arg not supported with multiple decorators');\n      }\n      _utils.extend(this.decorators, name);\n    } else {\n      this.decorators[name] = fn;\n    }\n  },\n  unregisterDecorator: function unregisterDecorator(name) {\n    delete this.decorators[name];\n  }\n};\n\nvar log = _logger2['default'].log;\n\nexports.log = log;\nexports.createFrame = _utils.createFrame;\nexports.logger = _logger2['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2Jhc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBQTRDLFNBQVM7O3lCQUMvQixhQUFhOzs7O3VCQUNFLFdBQVc7OzBCQUNSLGNBQWM7O3NCQUNuQyxVQUFVOzs7O0FBRXRCLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQzs7QUFDeEIsSUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7O0FBQzVCLElBQU0saUNBQWlDLEdBQUcsQ0FBQyxDQUFDOzs7QUFFNUMsSUFBTSxnQkFBZ0IsR0FBRztBQUM5QixHQUFDLEVBQUUsYUFBYTtBQUNoQixHQUFDLEVBQUUsZUFBZTtBQUNsQixHQUFDLEVBQUUsZUFBZTtBQUNsQixHQUFDLEVBQUUsVUFBVTtBQUNiLEdBQUMsRUFBRSxrQkFBa0I7QUFDckIsR0FBQyxFQUFFLGlCQUFpQjtBQUNwQixHQUFDLEVBQUUsaUJBQWlCO0FBQ3BCLEdBQUMsRUFBRSxVQUFVO0NBQ2QsQ0FBQzs7O0FBRUYsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUM7O0FBRTlCLFNBQVMscUJBQXFCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7QUFDbkUsTUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0FBQzdCLE1BQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQztBQUMvQixNQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsSUFBSSxFQUFFLENBQUM7O0FBRW5DLGtDQUF1QixJQUFJLENBQUMsQ0FBQztBQUM3Qix3Q0FBMEIsSUFBSSxDQUFDLENBQUM7Q0FDakM7O0FBRUQscUJBQXFCLENBQUMsU0FBUyxHQUFHO0FBQ2hDLGFBQVcsRUFBRSxxQkFBcUI7O0FBRWxDLFFBQU0scUJBQVE7QUFDZCxLQUFHLEVBQUUsb0JBQU8sR0FBRzs7QUFFZixnQkFBYyxFQUFFLHdCQUFTLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDakMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLFVBQUksRUFBRSxFQUFFO0FBQUUsY0FBTSwyQkFBYyx5Q0FBeUMsQ0FBQyxDQUFDO09BQUU7QUFDM0Usb0JBQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM1QixNQUFNO0FBQ0wsVUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDekI7R0FDRjtBQUNELGtCQUFnQixFQUFFLDBCQUFTLElBQUksRUFBRTtBQUMvQixXQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDM0I7O0FBRUQsaUJBQWUsRUFBRSx5QkFBUyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ3ZDLFFBQUksZ0JBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUN0QyxvQkFBTyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzdCLE1BQU07QUFDTCxVQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsRUFBRTtBQUNsQyxjQUFNLHlFQUEwRCxJQUFJLG9CQUFpQixDQUFDO09BQ3ZGO0FBQ0QsVUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUM7S0FDL0I7R0FDRjtBQUNELG1CQUFpQixFQUFFLDJCQUFTLElBQUksRUFBRTtBQUNoQyxXQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDNUI7O0FBRUQsbUJBQWlCLEVBQUUsMkJBQVMsSUFBSSxFQUFFLEVBQUUsRUFBRTtBQUNwQyxRQUFJLGdCQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdEMsVUFBSSxFQUFFLEVBQUU7QUFBRSxjQUFNLDJCQUFjLDRDQUE0QyxDQUFDLENBQUM7T0FBRTtBQUM5RSxvQkFBTyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQy9CLE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUM1QjtHQUNGO0FBQ0QscUJBQW1CLEVBQUUsNkJBQVMsSUFBSSxFQUFFO0FBQ2xDLFdBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUM5QjtDQUNGLENBQUM7O0FBRUssSUFBSSxHQUFHLEdBQUcsb0JBQU8sR0FBRyxDQUFDOzs7UUFFcEIsV0FBVztRQUFFLE1BQU0iLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Y3JlYXRlRnJhbWUsIGV4dGVuZCwgdG9TdHJpbmd9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdEhlbHBlcnN9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnN9IGZyb20gJy4vZGVjb3JhdG9ycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4vbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnNC41LjMnO1xuZXhwb3J0IGNvbnN0IENPTVBJTEVSX1JFVklTSU9OID0gODtcbmV4cG9ydCBjb25zdCBMQVNUX0NPTVBBVElCTEVfQ09NUElMRVJfUkVWSVNJT04gPSA3O1xuXG5leHBvcnQgY29uc3QgUkVWSVNJT05fQ0hBTkdFUyA9IHtcbiAgMTogJzw9IDEuMC5yYy4yJywgLy8gMS4wLnJjLjIgaXMgYWN0dWFsbHkgcmV2MiBidXQgZG9lc24ndCByZXBvcnQgaXRcbiAgMjogJz09IDEuMC4wLXJjLjMnLFxuICAzOiAnPT0gMS4wLjAtcmMuNCcsXG4gIDQ6ICc9PSAxLngueCcsXG4gIDU6ICc9PSAyLjAuMC1hbHBoYS54JyxcbiAgNjogJz49IDIuMC4wLWJldGEuMScsXG4gIDc6ICc+PSA0LjAuMCA8NC4zLjAnLFxuICA4OiAnPj0gNC4zLjAnXG59O1xuXG5jb25zdCBvYmplY3RUeXBlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGViYXJzRW52aXJvbm1lbnQoaGVscGVycywgcGFydGlhbHMsIGRlY29yYXRvcnMpIHtcbiAgdGhpcy5oZWxwZXJzID0gaGVscGVycyB8fCB7fTtcbiAgdGhpcy5wYXJ0aWFscyA9IHBhcnRpYWxzIHx8IHt9O1xuICB0aGlzLmRlY29yYXRvcnMgPSBkZWNvcmF0b3JzIHx8IHt9O1xuXG4gIHJlZ2lzdGVyRGVmYXVsdEhlbHBlcnModGhpcyk7XG4gIHJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnModGhpcyk7XG59XG5cbkhhbmRsZWJhcnNFbnZpcm9ubWVudC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBIYW5kbGViYXJzRW52aXJvbm1lbnQsXG5cbiAgbG9nZ2VyOiBsb2dnZXIsXG4gIGxvZzogbG9nZ2VyLmxvZyxcblxuICByZWdpc3RlckhlbHBlcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgaGVscGVycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5oZWxwZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWxwZXJzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuaGVscGVyc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUsIHBhcnRpYWwpIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgZXh0ZW5kKHRoaXMucGFydGlhbHMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHBhcnRpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oYEF0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCBcIiR7bmFtZX1cIiBhcyB1bmRlZmluZWRgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFydGlhbHNbbmFtZV0gPSBwYXJ0aWFsO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJ0aWFsc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgZGVjb3JhdG9ycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5kZWNvcmF0b3JzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZWNvcmF0b3JzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuZGVjb3JhdG9yc1tuYW1lXTtcbiAgfVxufTtcblxuZXhwb3J0IGxldCBsb2cgPSBsb2dnZXIubG9nO1xuXG5leHBvcnQge2NyZWF0ZUZyYW1lLCBsb2dnZXJ9O1xuIl19\n","'use strict';\n\nexports.__esModule = true;\nexports.registerDefaultHelpers = registerDefaultHelpers;\nexports.moveHelperToHooks = moveHelperToHooks;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _helpersBlockHelperMissing = require('./helpers/block-helper-missing');\n\nvar _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);\n\nvar _helpersEach = require('./helpers/each');\n\nvar _helpersEach2 = _interopRequireDefault(_helpersEach);\n\nvar _helpersHelperMissing = require('./helpers/helper-missing');\n\nvar _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);\n\nvar _helpersIf = require('./helpers/if');\n\nvar _helpersIf2 = _interopRequireDefault(_helpersIf);\n\nvar _helpersLog = require('./helpers/log');\n\nvar _helpersLog2 = _interopRequireDefault(_helpersLog);\n\nvar _helpersLookup = require('./helpers/lookup');\n\nvar _helpersLookup2 = _interopRequireDefault(_helpersLookup);\n\nvar _helpersWith = require('./helpers/with');\n\nvar _helpersWith2 = _interopRequireDefault(_helpersWith);\n\nfunction registerDefaultHelpers(instance) {\n  _helpersBlockHelperMissing2['default'](instance);\n  _helpersEach2['default'](instance);\n  _helpersHelperMissing2['default'](instance);\n  _helpersIf2['default'](instance);\n  _helpersLog2['default'](instance);\n  _helpersLookup2['default'](instance);\n  _helpersWith2['default'](instance);\n}\n\nfunction moveHelperToHooks(instance, helperName, keepHelper) {\n  if (instance.helpers[helperName]) {\n    instance.hooks[helperName] = instance.helpers[helperName];\n    if (!keepHelper) {\n      delete instance.helpers[helperName];\n    }\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O3lDQUF1QyxnQ0FBZ0M7Ozs7MkJBQzlDLGdCQUFnQjs7OztvQ0FDUCwwQkFBMEI7Ozs7eUJBQ3JDLGNBQWM7Ozs7MEJBQ2IsZUFBZTs7Ozs2QkFDWixrQkFBa0I7Ozs7MkJBQ3BCLGdCQUFnQjs7OztBQUVsQyxTQUFTLHNCQUFzQixDQUFDLFFBQVEsRUFBRTtBQUMvQyx5Q0FBMkIsUUFBUSxDQUFDLENBQUM7QUFDckMsMkJBQWEsUUFBUSxDQUFDLENBQUM7QUFDdkIsb0NBQXNCLFFBQVEsQ0FBQyxDQUFDO0FBQ2hDLHlCQUFXLFFBQVEsQ0FBQyxDQUFDO0FBQ3JCLDBCQUFZLFFBQVEsQ0FBQyxDQUFDO0FBQ3RCLDZCQUFlLFFBQVEsQ0FBQyxDQUFDO0FBQ3pCLDJCQUFhLFFBQVEsQ0FBQyxDQUFDO0NBQ3hCOztBQUVNLFNBQVMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDbEUsTUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQ2hDLFlBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMxRCxRQUFJLENBQUMsVUFBVSxFQUFFO0FBQ2YsYUFBTyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3JDO0dBQ0Y7Q0FDRiIsImZpbGUiOiJoZWxwZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZ2lzdGVyQmxvY2tIZWxwZXJNaXNzaW5nIGZyb20gJy4vaGVscGVycy9ibG9jay1oZWxwZXItbWlzc2luZyc7XG5pbXBvcnQgcmVnaXN0ZXJFYWNoIGZyb20gJy4vaGVscGVycy9lYWNoJztcbmltcG9ydCByZWdpc3RlckhlbHBlck1pc3NpbmcgZnJvbSAnLi9oZWxwZXJzL2hlbHBlci1taXNzaW5nJztcbmltcG9ydCByZWdpc3RlcklmIGZyb20gJy4vaGVscGVycy9pZic7XG5pbXBvcnQgcmVnaXN0ZXJMb2cgZnJvbSAnLi9oZWxwZXJzL2xvZyc7XG5pbXBvcnQgcmVnaXN0ZXJMb29rdXAgZnJvbSAnLi9oZWxwZXJzL2xvb2t1cCc7XG5pbXBvcnQgcmVnaXN0ZXJXaXRoIGZyb20gJy4vaGVscGVycy93aXRoJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRGVmYXVsdEhlbHBlcnMoaW5zdGFuY2UpIHtcbiAgcmVnaXN0ZXJCbG9ja0hlbHBlck1pc3NpbmcoaW5zdGFuY2UpO1xuICByZWdpc3RlckVhY2goaW5zdGFuY2UpO1xuICByZWdpc3RlckhlbHBlck1pc3NpbmcoaW5zdGFuY2UpO1xuICByZWdpc3RlcklmKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJMb2coaW5zdGFuY2UpO1xuICByZWdpc3Rlckxvb2t1cChpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyV2l0aChpbnN0YW5jZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlSGVscGVyVG9Ib29rcyhpbnN0YW5jZSwgaGVscGVyTmFtZSwga2VlcEhlbHBlcikge1xuICBpZiAoaW5zdGFuY2UuaGVscGVyc1toZWxwZXJOYW1lXSkge1xuICAgIGluc3RhbmNlLmhvb2tzW2hlbHBlck5hbWVdID0gaW5zdGFuY2UuaGVscGVyc1toZWxwZXJOYW1lXTtcbiAgICBpZiAoIWtlZXBIZWxwZXIpIHtcbiAgICAgIGRlbGV0ZSBpbnN0YW5jZS5oZWxwZXJzW2hlbHBlck5hbWVdO1xuICAgIH1cbiAgfVxufVxuIl19\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","module.exports = require('./code').default\n","import CodeMirror from 'codemirror'\nimport 'codemirror/mode/javascript/javascript'\nimport { nextTick, copy } from './util'\n\nexport default function(eruda) {\n  let { evalCss, beautify } = eruda.util\n\n  class Code extends eruda.Tool {\n    constructor() {\n      super()\n      this.name = 'code'\n      this._style = evalCss(require('./style.scss'))\n      this._CodeMirrorStyle = evalCss(require('codemirror/lib/codemirror.css'))\n      this._CodeMirrorCustomStyle = evalCss(require('./CodeMirror.css'))\n      this._editor = null\n    }\n    init($el, container) {\n      super.init($el, container)\n\n      $el.html(require('./template.hbs')())\n      this._bindEvent()\n    }\n    show() {\n      super.show()\n      if (!this._editor) {\n        let container = this._$el.find('.eruda-editor').get(0)\n        this._editor = CodeMirror.fromTextArea(container, {\n          lineNumbers: 'true',\n          mode: 'javascript'\n        })\n        nextTick(() => this._editor.refresh())\n      }\n    }\n    hide() {\n      super.hide()\n    }\n    run() {\n      try {\n        evalJs(this._editor.getValue())\n      } catch (e) {\n        /* eslint-disable no-console */\n        console.error(e)\n      }\n    }\n    beautify() {\n      let editor = this._editor\n\n      let value = editor.getValue()\n      editor.setValue(beautify(value))\n    }\n    copy() {\n      copy(this._editor.getValue())\n    }\n    clear() {\n      this._editor.setValue('')\n    }\n    destroy() {\n      super.destroy()\n      evalCss.remove(this._style)\n      evalCss.remove(this._CodeMirrorStyle)\n      evalCss.remove(this._CodeMirrorCustomStyle)\n    }\n    _bindEvent() {\n      this._$el\n        .on('click', '.eruda-run', () => this.run())\n        .on('click', '.eruda-beautify', () => this.beautify())\n        .on('click', '.eruda-clear', () => this.clear())\n        .on('click', '.eruda-copy', () => this.copy())\n    }\n  }\n\n  let evalJs = code => {\n    let ret\n\n    try {\n      ret = eval.call(window, `(${code})`)\n    } catch (e) {\n      ret = eval.call(window, code)\n    }\n\n    return ret\n  }\n\n  return new Code()\n}\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\") {\n      stream.skipToEnd();\n      return ret(\"error\", \"error\");\n    } else if (ch == \"<\" && stream.match(\"!--\") || ch == \"-\" && stream.match(\"->\")) {\n      stream.skipToEnd()\n      return ret(\"comment\", \"comment\")\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/`]/.test(ch)) {\n        for (;; --pos) {\n          if (pos == 0) return\n          var next = stream.string.charAt(pos - 1)\n          if (next == ch && stream.string.charAt(pos - 2) != \"\\\\\") { pos--; break }\n        }\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\" || type == \"}\" || type == \")\" || type == \"]\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) {\n      cx.marked = \"keyword\"\n      return cont(pushlex(\"form\", type == \"class\" ? type : value), className, poplex)\n    }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typename, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, statement, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), expression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    if (type == \"import\") return cont(expression);\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(expression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^>]|<.*?>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(expression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      if (sep && sep.indexOf(\";\") > -1) return pass(what)\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function maybetypeOrIn(type, value) {\n    if (isTS && (type == \":\" || value == \"in\")) return cont(typeexpr)\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\" || value == \"infer\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"typeof\" ? expressionNoComma : typeexpr)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (value == \"|\" || value == \"&\") return cont(typeexpr)\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType, afterType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\" || type == \"number\" || type == \"string\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expect(\"variable\"), maybetypeOrIn, expect(\"]\"), typeprop)\n    } else if (type == \"(\") {\n      return pass(functiondecl, typeprop)\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    if (type == \"spread\") return cont(typearg)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(typeexpr, expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n    if (value == \"?\") return cont(typeexpr, expect(\":\"), typeexpr)\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(eltpattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    if (type == \"[\") return cont(expression, expect(']'), expect(':'), proppattern);\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function eltpattern() {\n    return pass(pattern, maybeAssign)\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, forspec2);\n    if (type == \"variable\") return cont(forspec2);\n    return pass(forspec2)\n  }\n  function forspec2(type, value) {\n    if (type == \")\") return cont()\n    if (type == \";\") return cont(forspec2)\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression, forspec2) }\n    return pass(expression, forspec2)\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function functiondecl(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondecl);}\n    if (type == \"variable\") {register(value); return cont(functiondecl);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondecl)\n  }\n  function typename(type, value) {\n    if (type == \"keyword\" || type == \"variable\") {\n      cx.marked = \"type\"\n      return cont(typename)\n    } else if (value == \"<\") {\n      return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex)\n    }\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    if (isTS && type == \"this\") return cont(maybetype, maybeAssign)\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(isTS ? classfield : functiondef, classBody);\n    }\n    if (type == \"number\" || type == \"string\") return cont(isTS ? classfield : functiondef, classBody);\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), isTS ? classfield : functiondef, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (isTS && type == \"(\") return pass(functiondecl, classBody)\n    if (type == \";\" || type == \",\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    var context = cx.state.lexical.prev, isInterface = context && context.info == \"interface\"\n    return pass(isInterface ? functiondecl : functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      var top = state.cc[state.cc.length - 1]\n      if (top == expression || top == expressionNoComma) state.cc.pop()\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/x-json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/ld+json\", {name: \"javascript\", jsonld: true});\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/_css-loader@3.4.1@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".eruda-dev-tools .eruda-tools .eruda-code{padding-bottom:40px}.eruda-dev-tools .eruda-tools .eruda-code .eruda-editor{height:100%}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar{height:40px;background:var(--darker-background);position:absolute;left:0;bottom:0;width:100%;font-size:0;border-top:1px solid var(--border)}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar .eruda-btn{cursor:pointer;text-align:center;color:var(--foreground);font-size:14px;line-height:40px;width:25%;border-right:1px solid var(--border);display:inline-block;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar .eruda-btn:active{background:var(--highlight);color:var(--select-foreground)}.eruda-dev-tools .eruda-tools .eruda-code .eruda-bottom-bar .eruda-btn.eruda-active{color:var(--select-foreground)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../_css-loader@3.4.1@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* BASICS */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror {\\n  /* Set height, width, borders, and global font properties here */\\n  font-family: monospace;\\n  height: 300px;\\n  color: black;\\n  direction: ltr;\\n}\\n\\n/* PADDING */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-lines {\\n  padding: 4px 0; /* Vertical padding around content */\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line,\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line-like {\\n  padding: 0 4px; /* Horizontal padding of content */\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-scrollbar-filler, .eruda-dev-tools .eruda-tools .CodeMirror-gutter-filler {\\n  background-color: white; /* The little square between H and V scrollbars */\\n}\\n\\n/* GUTTER */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutters {\\n  border-right: 1px solid #ddd;\\n  background-color: #f7f7f7;\\n  white-space: nowrap;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-linenumbers {}\\n.eruda-dev-tools .eruda-tools .CodeMirror-linenumber {\\n  padding: 0 3px 0 5px;\\n  min-width: 20px;\\n  text-align: right;\\n  color: #999;\\n  white-space: nowrap;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-guttermarker { color: black; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-guttermarker-subtle { color: #999; }\\n\\n/* CURSOR */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-cursor {\\n  border-left: 1px solid black;\\n  border-right: none;\\n  width: 0;\\n}\\n/* Shown when moving in bi-directional text */\\n.eruda-dev-tools .eruda-tools .CodeMirror div.CodeMirror-secondarycursor {\\n  border-left: 1px solid silver;\\n}\\n.eruda-dev-tools .eruda-tools .cm-fat-cursor .CodeMirror-cursor {\\n  width: auto;\\n  border: 0 !important;\\n  background: #7e7;\\n}\\n.eruda-dev-tools .eruda-tools .cm-fat-cursor div.CodeMirror-cursors {\\n  z-index: 1;\\n}\\n.eruda-dev-tools .eruda-tools .cm-fat-cursor-mark {\\n  background-color: rgba(20, 255, 20, 0.5);\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n}\\n.eruda-dev-tools .eruda-tools .cm-animate-fat-cursor {\\n  width: auto;\\n  border: 0;\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n  background-color: #7e7;\\n}\\n@-webkit-keyframes blink {\\n  .eruda-dev-tools .eruda-tools 0% {}\\n  .eruda-dev-tools .eruda-tools 50% { background-color: transparent; }\\n  .eruda-dev-tools .eruda-tools 100% {}\\n}\\n@keyframes blink {\\n  .eruda-dev-tools .eruda-tools 0% {}\\n  .eruda-dev-tools .eruda-tools 50% { background-color: transparent; }\\n  .eruda-dev-tools .eruda-tools 100% {}\\n}\\n\\n/* Can style cursor different in overwrite (non-insert) mode */\\n.eruda-dev-tools .eruda-tools .CodeMirror-overwrite .CodeMirror-cursor {}\\n\\n.eruda-dev-tools .eruda-tools .cm-tab { display: inline-block; text-decoration: inherit; }\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-rulers {\\n  position: absolute;\\n  left: 0; right: 0; top: -50px; bottom: 0;\\n  overflow: hidden;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-ruler {\\n  border-left: 1px solid #ccc;\\n  top: 0; bottom: 0;\\n  position: absolute;\\n}\\n\\n/* DEFAULT THEME */\\n\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-header {color: blue;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-quote {color: #090;}\\n.eruda-dev-tools .eruda-tools .cm-negative {color: #d44;}\\n.eruda-dev-tools .eruda-tools .cm-positive {color: #292;}\\n.eruda-dev-tools .eruda-tools .cm-header, .eruda-dev-tools .eruda-tools .cm-strong {font-weight: bold;}\\n.eruda-dev-tools .eruda-tools .cm-em {font-style: italic;}\\n.eruda-dev-tools .eruda-tools .cm-link {text-decoration: underline;}\\n.eruda-dev-tools .eruda-tools .cm-strikethrough {text-decoration: line-through;}\\n\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-keyword {color: #708;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-atom {color: #219;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-number {color: #164;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-def {color: #00f;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-variable,\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-punctuation,\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-property,\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-operator {}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-variable-2 {color: #05a;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-variable-3, .eruda-dev-tools .eruda-tools .cm-s-default .cm-type {color: #085;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-comment {color: #a50;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-string {color: #a11;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-string-2 {color: #f50;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-meta {color: #555;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-qualifier {color: #555;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-builtin {color: #30a;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-bracket {color: #997;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-tag {color: #170;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-attribute {color: #00c;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-hr {color: #999;}\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-link {color: #00c;}\\n\\n.eruda-dev-tools .eruda-tools .cm-s-default .cm-error {color: #f00;}\\n.eruda-dev-tools .eruda-tools .cm-invalidchar {color: #f00;}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-composing { border-bottom: 2px solid; }\\n\\n/* Default styles for common addons */\\n\\n.eruda-dev-tools .eruda-tools div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\\n.eruda-dev-tools .eruda-tools div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\\n.eruda-dev-tools .eruda-tools .CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\\n.eruda-dev-tools .eruda-tools .CodeMirror-activeline-background {background: #e8f2ff;}\\n\\n/* STOP */\\n\\n/* The rest of this file contains styles related to the mechanics of\\n   the editor. You probably shouldn't touch them. */\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror {\\n  position: relative;\\n  overflow: hidden;\\n  background: white;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-scroll {\\n  overflow: scroll !important; /* Things will break if this is overridden */\\n  /* 30px is the magic margin used to hide the element's real scrollbars */\\n  /* See overflow: hidden in .CodeMirror */\\n  margin-bottom: -30px; margin-right: -30px;\\n  padding-bottom: 30px;\\n  height: 100%;\\n  outline: none; /* Prevent dragging from highlighting the element */\\n  position: relative;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-sizer {\\n  position: relative;\\n  border-right: 30px solid transparent;\\n}\\n\\n/* The fake, visible scrollbars. Used to force redraw during scrolling\\n   before actual scrolling happens, thus preventing shaking and\\n   flickering artifacts. */\\n.eruda-dev-tools .eruda-tools .CodeMirror-vscrollbar, .eruda-dev-tools .eruda-tools .CodeMirror-hscrollbar, .eruda-dev-tools .eruda-tools .CodeMirror-scrollbar-filler, .eruda-dev-tools .eruda-tools .CodeMirror-gutter-filler {\\n  position: absolute;\\n  z-index: 6;\\n  display: none;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-vscrollbar {\\n  right: 0; top: 0;\\n  overflow-x: hidden;\\n  overflow-y: scroll;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-hscrollbar {\\n  bottom: 0; left: 0;\\n  overflow-y: hidden;\\n  overflow-x: scroll;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-scrollbar-filler {\\n  right: 0; bottom: 0;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-filler {\\n  left: 0; bottom: 0;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutters {\\n  position: absolute; left: 0; top: 0;\\n  min-height: 100%;\\n  z-index: 3;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter {\\n  white-space: normal;\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  margin-bottom: -30px;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper {\\n  position: absolute;\\n  z-index: 4;\\n  background: none !important;\\n  border: none !important;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-background {\\n  position: absolute;\\n  top: 0; bottom: 0;\\n  z-index: 4;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-elt {\\n  position: absolute;\\n  cursor: default;\\n  z-index: 4;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper ::selection { background-color: transparent }\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-lines {\\n  cursor: text;\\n  min-height: 1px; /* prevents collapsing before first draw */\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line,\\n.eruda-dev-tools .eruda-tools .CodeMirror pre.CodeMirror-line-like {\\n  /* Reset some styles that the rest of the page might have set */ border-radius: 0;\\n  border-width: 0;\\n  background: transparent;\\n  font-family: inherit;\\n  font-size: inherit;\\n  margin: 0;\\n  white-space: pre;\\n  word-wrap: normal;\\n  line-height: inherit;\\n  color: inherit;\\n  z-index: 2;\\n  position: relative;\\n  overflow: visible;\\n  -webkit-tap-highlight-color: transparent;\\n  font-variant-ligatures: contextual;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-wrap pre.CodeMirror-line,\\n.eruda-dev-tools .eruda-tools .CodeMirror-wrap pre.CodeMirror-line-like {\\n  word-wrap: break-word;\\n  white-space: pre-wrap;\\n  word-break: normal;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-linebackground {\\n  position: absolute;\\n  left: 0; right: 0; top: 0; bottom: 0;\\n  z-index: 0;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-linewidget {\\n  position: relative;\\n  z-index: 2;\\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-widget {}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-rtl pre { direction: rtl; }\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-code {\\n  outline: none;\\n}\\n\\n/* Force content-box sizing for the elements where we expect it */\\n.eruda-dev-tools .eruda-tools .CodeMirror-scroll,\\n.eruda-dev-tools .eruda-tools .CodeMirror-sizer,\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutter,\\n.eruda-dev-tools .eruda-tools .CodeMirror-gutters,\\n.eruda-dev-tools .eruda-tools .CodeMirror-linenumber {\\n  box-sizing: content-box;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-measure {\\n  position: absolute;\\n  width: 100%;\\n  height: 0;\\n  overflow: hidden;\\n  visibility: hidden;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-cursor {\\n  position: absolute;\\n  pointer-events: none;\\n}\\n.eruda-dev-tools .eruda-tools .CodeMirror-measure pre { position: static; }\\n\\n.eruda-dev-tools .eruda-tools div.CodeMirror-cursors {\\n  visibility: hidden;\\n  position: relative;\\n  z-index: 3;\\n}\\n.eruda-dev-tools .eruda-tools div.CodeMirror-dragcursors {\\n  visibility: visible;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-focused div.CodeMirror-cursors {\\n  visibility: visible;\\n}\\n\\n.eruda-dev-tools .eruda-tools .CodeMirror-selected { background: #d9d9d9; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-crosshair { cursor: crosshair; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-line::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-line::selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span::selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span > span::selection { background: #d7d4f0; }\\n.eruda-dev-tools .eruda-tools .CodeMirror-line::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span::-moz-selection, .eruda-dev-tools .eruda-tools .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n\\n.eruda-dev-tools .eruda-tools .cm-searching {\\n  background-color: #ffa;\\n  background-color: rgba(255, 255, 0, .4);\\n}\\n\\n/* Used to force a border model for a node */\\n.eruda-dev-tools .eruda-tools .cm-force-border { padding-right: .1px; }\\n\\n@media print {\\n  /* Hide the cursor when printing */\\n  .eruda-dev-tools .eruda-tools .CodeMirror div.CodeMirror-cursors {\\n    visibility: hidden;\\n  }\\n}\\n\\n/* See issue #2901 */\\n.eruda-dev-tools .eruda-tools .cm-tab-wrap-hack:after { content: ''; }\\n\\n/* Help users use markselection to safely style text background */\\n.eruda-dev-tools .eruda-tools span.CodeMirror-selectedtext { background: none; }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/_css-loader@3.4.1@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".eruda-dev-tools .eruda-tools .CodeMirror {\\n  height: 100%;\\n}\\n\\n/* Sync style with chrome dev-tool */\\n.eruda-dev-tools .eruda-tools .cm-keyword {\\n  color: hsl(310, 86%, 36%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-number {\\n  color: hsl(248, 100%, 41%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-comment {\\n  color: hsl(120, 100%, 23%) !important;\\n  font-style: italic;\\n}\\n.eruda-dev-tools .eruda-tools .cm-string {\\n  color: hsl(1, 80%, 43%) !important;\\n}\\n.eruda-dev-tools .eruda-tools .cm-string-2 {\\n  color: hsl(1, 99%, 39%) !important;\\n}\\n.eruda-dev-tools .eruda-tools .cm-atom {\\n  color: hsl(310, 86%, 36%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-def {\\n  color: hsl(240, 73%, 38%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-operator {\\n  color: hsl(27, 100%, 30%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-meta {\\n  color: hsl(27, 100%, 30%);\\n}\\n.eruda-dev-tools .eruda-tools .cm-variable-2 {\\n  color: hsl(240, 73%, 38%);\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var Handlebars = require(\"../node_modules/_handlebars@4.5.3@handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<textarea class=\\\"eruda-editor\\\">function fib(num) {\\n    if (num <= 2) return 1;\\n    return fib(num - 1) + fib(num - 2);\\n}\\nconsole.log(fib(5));</textarea>\\n<div class=\\\"eruda-bottom-bar\\\">\\n    <div class=\\\"eruda-btn eruda-beautify\\\">\\n        Beautify\\n    </div>\\n    <div class=\\\"eruda-btn eruda-copy\\\">\\n        Copy\\n    </div>\\n    <div class=\\\"eruda-btn eruda-clear\\\">\\n        Clear\\n    </div>\\n    <div class=\\\"eruda-btn eruda-run\\\">\\n        Run\\n    </div>\\n</div>\";\n},\"useData\":true});","// Create a simple path alias to allow browserify to resolve\n// the runtime on a supported path.\nmodule.exports = require('./dist/cjs/handlebars.runtime')['default'];\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _handlebarsBase = require('./handlebars/base');\n\nvar base = _interopRequireWildcard(_handlebarsBase);\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\n\nvar _handlebarsSafeString = require('./handlebars/safe-string');\n\nvar _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);\n\nvar _handlebarsException = require('./handlebars/exception');\n\nvar _handlebarsException2 = _interopRequireDefault(_handlebarsException);\n\nvar _handlebarsUtils = require('./handlebars/utils');\n\nvar Utils = _interopRequireWildcard(_handlebarsUtils);\n\nvar _handlebarsRuntime = require('./handlebars/runtime');\n\nvar runtime = _interopRequireWildcard(_handlebarsRuntime);\n\nvar _handlebarsNoConflict = require('./handlebars/no-conflict');\n\nvar _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nfunction create() {\n  var hb = new base.HandlebarsEnvironment();\n\n  Utils.extend(hb, base);\n  hb.SafeString = _handlebarsSafeString2['default'];\n  hb.Exception = _handlebarsException2['default'];\n  hb.Utils = Utils;\n  hb.escapeExpression = Utils.escapeExpression;\n\n  hb.VM = runtime;\n  hb.template = function (spec) {\n    return runtime.template(spec, hb);\n  };\n\n  return hb;\n}\n\nvar inst = create();\ninst.create = create;\n\n_handlebarsNoConflict2['default'](inst);\n\ninst['default'] = inst;\n\nexports['default'] = inst;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9oYW5kbGViYXJzLnJ1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OEJBQXNCLG1CQUFtQjs7SUFBN0IsSUFBSTs7Ozs7b0NBSU8sMEJBQTBCOzs7O21DQUMzQix3QkFBd0I7Ozs7K0JBQ3ZCLG9CQUFvQjs7SUFBL0IsS0FBSzs7aUNBQ1Esc0JBQXNCOztJQUFuQyxPQUFPOztvQ0FFSSwwQkFBMEI7Ozs7O0FBR2pELFNBQVMsTUFBTSxHQUFHO0FBQ2hCLE1BQUksRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7O0FBRTFDLE9BQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUUsQ0FBQyxVQUFVLG9DQUFhLENBQUM7QUFDM0IsSUFBRSxDQUFDLFNBQVMsbUNBQVksQ0FBQztBQUN6QixJQUFFLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNqQixJQUFFLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDOztBQUU3QyxJQUFFLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQztBQUNoQixJQUFFLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzNCLFdBQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDbkMsQ0FBQzs7QUFFRixTQUFPLEVBQUUsQ0FBQztDQUNYOztBQUVELElBQUksSUFBSSxHQUFHLE1BQU0sRUFBRSxDQUFDO0FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVyQixrQ0FBVyxJQUFJLENBQUMsQ0FBQzs7QUFFakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzs7cUJBRVIsSUFBSSIsImZpbGUiOiJoYW5kbGViYXJzLnJ1bnRpbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBiYXNlIGZyb20gJy4vaGFuZGxlYmFycy9iYXNlJztcblxuLy8gRWFjaCBvZiB0aGVzZSBhdWdtZW50IHRoZSBIYW5kbGViYXJzIG9iamVjdC4gTm8gbmVlZCB0byBzZXR1cCBoZXJlLlxuLy8gKFRoaXMgaXMgZG9uZSB0byBlYXNpbHkgc2hhcmUgY29kZSBiZXR3ZWVuIGNvbW1vbmpzIGFuZCBicm93c2UgZW52cylcbmltcG9ydCBTYWZlU3RyaW5nIGZyb20gJy4vaGFuZGxlYmFycy9zYWZlLXN0cmluZyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vaGFuZGxlYmFycy9leGNlcHRpb24nO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi9oYW5kbGViYXJzL3V0aWxzJztcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSAnLi9oYW5kbGViYXJzL3J1bnRpbWUnO1xuXG5pbXBvcnQgbm9Db25mbGljdCBmcm9tICcuL2hhbmRsZWJhcnMvbm8tY29uZmxpY3QnO1xuXG4vLyBGb3IgY29tcGF0aWJpbGl0eSBhbmQgdXNhZ2Ugb3V0c2lkZSBvZiBtb2R1bGUgc3lzdGVtcywgbWFrZSB0aGUgSGFuZGxlYmFycyBvYmplY3QgYSBuYW1lc3BhY2VcbmZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgbGV0IGhiID0gbmV3IGJhc2UuSGFuZGxlYmFyc0Vudmlyb25tZW50KCk7XG5cbiAgVXRpbHMuZXh0ZW5kKGhiLCBiYXNlKTtcbiAgaGIuU2FmZVN0cmluZyA9IFNhZmVTdHJpbmc7XG4gIGhiLkV4Y2VwdGlvbiA9IEV4Y2VwdGlvbjtcbiAgaGIuVXRpbHMgPSBVdGlscztcbiAgaGIuZXNjYXBlRXhwcmVzc2lvbiA9IFV0aWxzLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgaGIuVk0gPSBydW50aW1lO1xuICBoYi50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7XG4gIH07XG5cbiAgcmV0dXJuIGhiO1xufVxuXG5sZXQgaW5zdCA9IGNyZWF0ZSgpO1xuaW5zdC5jcmVhdGUgPSBjcmVhdGU7XG5cbm5vQ29uZmxpY3QoaW5zdCk7XG5cbmluc3RbJ2RlZmF1bHQnXSA9IGluc3Q7XG5cbmV4cG9ydCBkZWZhdWx0IGluc3Q7XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerHelper('blockHelperMissing', function (context, options) {\n    var inverse = options.inverse,\n        fn = options.fn;\n\n    if (context === true) {\n      return fn(this);\n    } else if (context === false || context == null) {\n      return inverse(this);\n    } else if (_utils.isArray(context)) {\n      if (context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        var data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);\n        options = { data: data };\n      }\n\n      return fn(context, options);\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztxQkFBc0QsVUFBVTs7cUJBRWpELFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZFLFFBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPO1FBQ3pCLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFDcEIsYUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakIsTUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLElBQUksT0FBTyxJQUFJLElBQUksRUFBRTtBQUMvQyxhQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN0QixNQUFNLElBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUMzQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3RCLFlBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGlCQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlCOztBQUVELGVBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ2hELE1BQU07QUFDTCxlQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN0QjtLQUNGLE1BQU07QUFDTCxVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLElBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdFLGVBQU8sR0FBRyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQztPQUN4Qjs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDN0I7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJibG9jay1oZWxwZXItbWlzc2luZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGNyZWF0ZUZyYW1lLCBpc0FycmF5fSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdibG9ja0hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgbGV0IGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGZuID0gb3B0aW9ucy5mbjtcblxuICAgIGlmIChjb250ZXh0ID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gZm4odGhpcyk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0ID09PSBmYWxzZSB8fCBjb250ZXh0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICAgICAgICBvcHRpb25zLmlkcyA9IFtvcHRpb25zLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnMuZWFjaChjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIGxldCBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5uYW1lKTtcbiAgICAgICAgb3B0aW9ucyA9IHtkYXRhOiBkYXRhfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfSk7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('each', function (context, options) {\n    if (!options) {\n      throw new _exception2['default']('Must pass iterator to #each');\n    }\n\n    var fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data = undefined,\n        contextPath = undefined;\n\n    if (options.data && options.ids) {\n      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = _utils.createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (_utils.isArray(context)) {\n        for (var j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else if (global.Symbol && context[global.Symbol.iterator]) {\n        var newContext = [];\n        var iterator = context[global.Symbol.iterator]();\n        for (var it = iterator.next(); !it.done; it = iterator.next()) {\n          newContext.push(it.value);\n        }\n        context = newContext;\n        for (var j = context.length; i < j; i++) {\n          execIteration(i, i, i === context.length - 1);\n        }\n      } else {\n        (function () {\n          var priorKey = undefined;\n\n          Object.keys(context).forEach(function (key) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey !== undefined) {\n              execIteration(priorKey, i - 1);\n            }\n            priorKey = key;\n            i++;\n          });\n          if (priorKey !== undefined) {\n            execIteration(priorKey, i - 1, true);\n          }\n        })();\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvZWFjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQUErRSxVQUFVOzt5QkFDbkUsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3pELFFBQUksQ0FBQyxPQUFPLEVBQUU7QUFDWixZQUFNLDJCQUFjLDZCQUE2QixDQUFDLENBQUM7S0FDcEQ7O0FBRUQsUUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLEVBQUU7UUFDZixPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU87UUFDekIsQ0FBQyxHQUFHLENBQUM7UUFDTCxHQUFHLEdBQUcsRUFBRTtRQUNSLElBQUksWUFBQTtRQUNKLFdBQVcsWUFBQSxDQUFDOztBQUVoQixRQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixpQkFBVyxHQUFHLHlCQUFrQixPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0tBQ2pGOztBQUVELFFBQUksa0JBQVcsT0FBTyxDQUFDLEVBQUU7QUFBRSxhQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOztBQUUxRCxRQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUU7QUFDaEIsVUFBSSxHQUFHLG1CQUFZLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNsQzs7QUFFRCxhQUFTLGFBQWEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtBQUN6QyxVQUFJLElBQUksRUFBRTtBQUNSLFlBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO0FBQ2pCLFlBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ25CLFlBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxLQUFLLENBQUMsQ0FBQztBQUN6QixZQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7O0FBRW5CLFlBQUksV0FBVyxFQUFFO0FBQ2YsY0FBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLEdBQUcsS0FBSyxDQUFDO1NBQ3hDO09BQ0Y7O0FBRUQsU0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQzdCLFlBQUksRUFBRSxJQUFJO0FBQ1YsbUJBQVcsRUFBRSxtQkFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLFdBQVcsR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7T0FDL0UsQ0FBQyxDQUFDO0tBQ0o7O0FBRUQsUUFBSSxPQUFPLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO0FBQzFDLFVBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUNwQixhQUFLLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QyxjQUFJLENBQUMsSUFBSSxPQUFPLEVBQUU7QUFDaEIseUJBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1dBQy9DO1NBQ0Y7T0FDRixNQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUMzRCxZQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7QUFDdEIsWUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztBQUNuRCxhQUFLLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUM3RCxvQkFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDM0I7QUFDRCxlQUFPLEdBQUcsVUFBVSxDQUFDO0FBQ3JCLGFBQUssSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3ZDLHVCQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztTQUMvQztPQUNGLE1BQU07O0FBQ0wsY0FBSSxRQUFRLFlBQUEsQ0FBQzs7QUFFYixnQkFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQSxHQUFHLEVBQUk7Ozs7QUFJbEMsZ0JBQUksUUFBUSxLQUFLLFNBQVMsRUFBRTtBQUMxQiwyQkFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDaEM7QUFDRCxvQkFBUSxHQUFHLEdBQUcsQ0FBQztBQUNmLGFBQUMsRUFBRSxDQUFDO1dBQ0wsQ0FBQyxDQUFDO0FBQ0gsY0FBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQzFCLHlCQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7V0FDdEM7O09BQ0Y7S0FDRjs7QUFFRCxRQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDWCxTQUFHLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3JCOztBQUVELFdBQU8sR0FBRyxDQUFDO0dBQ1osQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiZWFjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNBcnJheSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuLi9leGNlcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm4sXG4gICAgICAgIGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICByZXQgPSAnJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgY29udGV4dFBhdGg7XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICBjb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pICsgJy4nO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGlmIChvcHRpb25zLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWNJdGVyYXRpb24oZmllbGQsIGluZGV4LCBsYXN0KSB7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmtleSA9IGZpZWxkO1xuICAgICAgICBkYXRhLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGRhdGEuZmlyc3QgPSBpbmRleCA9PT0gMDtcbiAgICAgICAgZGF0YS5sYXN0ID0gISFsYXN0O1xuXG4gICAgICAgIGlmIChjb250ZXh0UGF0aCkge1xuICAgICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBjb250ZXh0UGF0aCArIGZpZWxkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbZmllbGRdLCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhbY29udGV4dFtmaWVsZF0sIGZpZWxkXSwgW2NvbnRleHRQYXRoICsgZmllbGQsIG51bGxdKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgICBmb3IgKGxldCBqID0gY29udGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBpZiAoaSBpbiBjb250ZXh0KSB7XG4gICAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGdsb2JhbC5TeW1ib2wgJiYgY29udGV4dFtnbG9iYWwuU3ltYm9sLml0ZXJhdG9yXSkge1xuICAgICAgICBjb25zdCBuZXdDb250ZXh0ID0gW107XG4gICAgICAgIGNvbnN0IGl0ZXJhdG9yID0gY29udGV4dFtnbG9iYWwuU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBmb3IgKGxldCBpdCA9IGl0ZXJhdG9yLm5leHQoKTsgIWl0LmRvbmU7IGl0ID0gaXRlcmF0b3IubmV4dCgpKSB7XG4gICAgICAgICAgbmV3Q29udGV4dC5wdXNoKGl0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0ID0gbmV3Q29udGV4dDtcbiAgICAgICAgZm9yIChsZXQgaiA9IGNvbnRleHQubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgZXhlY0l0ZXJhdGlvbihpLCBpLCBpID09PSBjb250ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcHJpb3JLZXk7XG5cbiAgICAgICAgT2JqZWN0LmtleXMoY29udGV4dCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIC8vIFdlJ3JlIHJ1bm5pbmcgdGhlIGl0ZXJhdGlvbnMgb25lIHN0ZXAgb3V0IG9mIHN5bmMgc28gd2UgY2FuIGRldGVjdFxuICAgICAgICAgIC8vIHRoZSBsYXN0IGl0ZXJhdGlvbiB3aXRob3V0IGhhdmUgdG8gc2NhbiB0aGUgb2JqZWN0IHR3aWNlIGFuZCBjcmVhdGVcbiAgICAgICAgICAvLyBhbiBpdGVybWVkaWF0ZSBrZXlzIGFycmF5LlxuICAgICAgICAgIGlmIChwcmlvcktleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByaW9yS2V5ID0ga2V5O1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChwcmlvcktleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZXhlY0l0ZXJhdGlvbihwcmlvcktleSwgaSAtIDEsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIHJldCA9IGludmVyc2UodGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('helperMissing', function () /* [args, ]options */{\n    if (arguments.length === 1) {\n      // A missing field in a {{foo}} construct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new _exception2['default']('Missing helper: \"' + arguments[arguments.length - 1].name + '\"');\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvaGVscGVyLW1pc3NpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozt5QkFBc0IsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEVBQUUsaUNBQWdDO0FBQ3ZFLFFBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7O0FBRTFCLGFBQU8sU0FBUyxDQUFDO0tBQ2xCLE1BQU07O0FBRUwsWUFBTSwyQkFBYyxtQkFBbUIsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7S0FDdkY7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJoZWxwZXItbWlzc2luZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbigvKiBbYXJncywgXW9wdGlvbnMgKi8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gQSBtaXNzaW5nIGZpZWxkIGluIGEge3tmb299fSBjb25zdHJ1Y3QuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTb21lb25lIGlzIGFjdHVhbGx5IHRyeWluZyB0byBjYWxsIHNvbWV0aGluZywgYmxvdyB1cC5cbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ01pc3NpbmcgaGVscGVyOiBcIicgKyBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLm5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('if', function (conditional, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#if requires exactly one argument');\n    }\n    if (_utils.isFunction(conditional)) {\n      conditional = conditional.call(this);\n    }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function (conditional, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#unless requires exactly one argument');\n    }\n    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvaWYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztxQkFBb0MsVUFBVTs7eUJBQ3hCLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMzRCxRQUFJLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQUUsWUFBTSwyQkFBYyxtQ0FBbUMsQ0FBQyxDQUFDO0tBQUM7QUFDdkYsUUFBSSxrQkFBVyxXQUFXLENBQUMsRUFBRTtBQUFFLGlCQUFXLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOzs7OztBQUt0RSxRQUFJLEFBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLFdBQVcsSUFBSyxlQUFRLFdBQVcsQ0FBQyxFQUFFO0FBQ3ZFLGFBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM5QixNQUFNO0FBQ0wsYUFBTyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3pCO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFVBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMvRCxRQUFJLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQUUsWUFBTSwyQkFBYyx1Q0FBdUMsQ0FBQyxDQUFDO0tBQUM7QUFDM0YsV0FBTyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLEVBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0dBQ3ZILENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6ImlmLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNFbXB0eSwgaXNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2lmJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPSAyKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJyNpZiByZXF1aXJlcyBleGFjdGx5IG9uZSBhcmd1bWVudCcpO31cbiAgICBpZiAoaXNGdW5jdGlvbihjb25kaXRpb25hbCkpIHsgY29uZGl0aW9uYWwgPSBjb25kaXRpb25hbC5jYWxsKHRoaXMpOyB9XG5cbiAgICAvLyBEZWZhdWx0IGJlaGF2aW9yIGlzIHRvIHJlbmRlciB0aGUgcG9zaXRpdmUgcGF0aCBpZiB0aGUgdmFsdWUgaXMgdHJ1dGh5IGFuZCBub3QgZW1wdHkuXG4gICAgLy8gVGhlIGBpbmNsdWRlWmVyb2Agb3B0aW9uIG1heSBiZSBzZXQgdG8gdHJlYXQgdGhlIGNvbmR0aW9uYWwgYXMgcHVyZWx5IG5vdCBlbXB0eSBiYXNlZCBvbiB0aGVcbiAgICAvLyBiZWhhdmlvciBvZiBpc0VtcHR5LiBFZmZlY3RpdmVseSB0aGlzIGRldGVybWluZXMgaWYgMCBpcyBoYW5kbGVkIGJ5IHRoZSBwb3NpdGl2ZSBwYXRoIG9yIG5lZ2F0aXZlLlxuICAgIGlmICgoIW9wdGlvbnMuaGFzaC5pbmNsdWRlWmVybyAmJiAhY29uZGl0aW9uYWwpIHx8IGlzRW1wdHkoY29uZGl0aW9uYWwpKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcbiAgICB9XG4gIH0pO1xuXG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCd1bmxlc3MnLCBmdW5jdGlvbihjb25kaXRpb25hbCwgb3B0aW9ucykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9IDIpIHsgdGhyb3cgbmV3IEV4Y2VwdGlvbignI3VubGVzcyByZXF1aXJlcyBleGFjdGx5IG9uZSBhcmd1bWVudCcpO31cbiAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVyc1snaWYnXS5jYWxsKHRoaXMsIGNvbmRpdGlvbmFsLCB7Zm46IG9wdGlvbnMuaW52ZXJzZSwgaW52ZXJzZTogb3B0aW9ucy5mbiwgaGFzaDogb3B0aW9ucy5oYXNofSk7XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (instance) {\n  instance.registerHelper('log', function () /* message, options */{\n    var args = [undefined],\n        options = arguments[arguments.length - 1];\n    for (var i = 0; i < arguments.length - 1; i++) {\n      args.push(arguments[i]);\n    }\n\n    var level = 1;\n    if (options.hash.level != null) {\n      level = options.hash.level;\n    } else if (options.data && options.data.level != null) {\n      level = options.data.level;\n    }\n    args[0] = level;\n\n    instance.log.apply(instance, args);\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvbG9nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQWUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsa0NBQWlDO0FBQzlELFFBQUksSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5QyxTQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDN0MsVUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN6Qjs7QUFFRCxRQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDZCxRQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtBQUM5QixXQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDNUIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFO0FBQ3JELFdBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztLQUM1QjtBQUNELFFBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhCLFlBQVEsQ0FBQyxHQUFHLE1BQUEsQ0FBWixRQUFRLEVBQVMsSUFBSSxDQUFDLENBQUM7R0FDeEIsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoibG9nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKC8qIG1lc3NhZ2UsIG9wdGlvbnMgKi8pIHtcbiAgICBsZXQgYXJncyA9IFt1bmRlZmluZWRdLFxuICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIGxldCBsZXZlbCA9IDE7XG4gICAgaWYgKG9wdGlvbnMuaGFzaC5sZXZlbCAhPSBudWxsKSB7XG4gICAgICBsZXZlbCA9IG9wdGlvbnMuaGFzaC5sZXZlbDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGEubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmRhdGEubGV2ZWw7XG4gICAgfVxuICAgIGFyZ3NbMF0gPSBsZXZlbDtcblxuICAgIGluc3RhbmNlLmxvZyguLi4gYXJncyk7XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\nvar dangerousPropertyRegex = /^(constructor|__defineGetter__|__defineSetter__|__lookupGetter__|__proto__)$/;\n\nexports.dangerousPropertyRegex = dangerousPropertyRegex;\n\nexports['default'] = function (instance) {\n  instance.registerHelper('lookup', function (obj, field) {\n    if (!obj) {\n      return obj;\n    }\n    if (dangerousPropertyRegex.test(String(field)) && !Object.prototype.propertyIsEnumerable.call(obj, field)) {\n      return undefined;\n    }\n    return obj[field];\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvbG9va3VwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFPLElBQU0sc0JBQXNCLEdBQUcsOEVBQThFLENBQUM7Ozs7cUJBRXRHLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLFVBQVMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUNyRCxRQUFJLENBQUMsR0FBRyxFQUFFO0FBQ1IsYUFBTyxHQUFHLENBQUM7S0FDWjtBQUNELFFBQUksc0JBQXNCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFO0FBQ3pHLGFBQU8sU0FBUyxDQUFDO0tBQ2xCO0FBQ0QsV0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDbkIsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoibG9va3VwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGRhbmdlcm91c1Byb3BlcnR5UmVnZXggPSAvXihjb25zdHJ1Y3RvcnxfX2RlZmluZUdldHRlcl9ffF9fZGVmaW5lU2V0dGVyX198X19sb29rdXBHZXR0ZXJfX3xfX3Byb3RvX18pJC87XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdsb29rdXAnLCBmdW5jdGlvbihvYmosIGZpZWxkKSB7XG4gICAgaWYgKCFvYmopIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIGlmIChkYW5nZXJvdXNQcm9wZXJ0eVJlZ2V4LnRlc3QoU3RyaW5nKGZpZWxkKSkgJiYgIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmosIGZpZWxkKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG9ialtmaWVsZF07XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('with', function (context, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#with requires exactly one argument');\n    }\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    var fn = options.fn;\n\n    if (!_utils.isEmpty(context)) {\n      var data = options.data;\n      if (options.data && options.ids) {\n        data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: _utils.blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvd2l0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQUFpRixVQUFVOzt5QkFDckUsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3pELFFBQUksU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFBRSxZQUFNLDJCQUFjLHFDQUFxQyxDQUFDLENBQUM7S0FBQztBQUN6RixRQUFJLGtCQUFXLE9BQU8sQ0FBQyxFQUFFO0FBQUUsYUFBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7S0FBRTs7QUFFMUQsUUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQzs7QUFFcEIsUUFBSSxDQUFDLGVBQVEsT0FBTyxDQUFDLEVBQUU7QUFDckIsVUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLEdBQUcsbUJBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLFlBQUksQ0FBQyxXQUFXLEdBQUcseUJBQWtCLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztPQUNoRjs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUU7QUFDakIsWUFBSSxFQUFFLElBQUk7QUFDVixtQkFBVyxFQUFFLG1CQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO09BQ2hFLENBQUMsQ0FBQztLQUNKLE1BQU07QUFDTCxhQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDOUI7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJ3aXRoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNFbXB0eSwgaXNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ3dpdGgnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT0gMikgeyB0aHJvdyBuZXcgRXhjZXB0aW9uKCcjd2l0aCByZXF1aXJlcyBleGFjdGx5IG9uZSBhcmd1bWVudCcpO31cbiAgICBpZiAoaXNGdW5jdGlvbihjb250ZXh0KSkgeyBjb250ZXh0ID0gY29udGV4dC5jYWxsKHRoaXMpOyB9XG5cbiAgICBsZXQgZm4gPSBvcHRpb25zLmZuO1xuXG4gICAgaWYgKCFpc0VtcHR5KGNvbnRleHQpKSB7XG4gICAgICBsZXQgZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHtcbiAgICAgICAgZGF0YSA9IGNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7XG4gICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBhcHBlbmRDb250ZXh0UGF0aChvcHRpb25zLmRhdGEuY29udGV4dFBhdGgsIG9wdGlvbnMuaWRzWzBdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIHtcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgYmxvY2tQYXJhbXM6IGJsb2NrUGFyYW1zKFtjb250ZXh0XSwgW2RhdGEgJiYgZGF0YS5jb250ZXh0UGF0aF0pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICB9XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\nexports.registerDefaultDecorators = registerDefaultDecorators;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _decoratorsInline = require('./decorators/inline');\n\nvar _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);\n\nfunction registerDefaultDecorators(instance) {\n  _decoratorsInline2['default'](instance);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2RlY29yYXRvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Z0NBQTJCLHFCQUFxQjs7OztBQUV6QyxTQUFTLHlCQUF5QixDQUFDLFFBQVEsRUFBRTtBQUNsRCxnQ0FBZSxRQUFRLENBQUMsQ0FBQztDQUMxQiIsImZpbGUiOiJkZWNvcmF0b3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZ2lzdGVySW5saW5lIGZyb20gJy4vZGVjb3JhdG9ycy9pbmxpbmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyhpbnN0YW5jZSkge1xuICByZWdpc3RlcklubGluZShpbnN0YW5jZSk7XG59XG5cbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerDecorator('inline', function (fn, props, container, options) {\n    var ret = fn;\n    if (!props.partials) {\n      props.partials = {};\n      ret = function (context, options) {\n        // Create a new partials stack frame prior to exec.\n        var original = container.partials;\n        container.partials = _utils.extend({}, original, props.partials);\n        var ret = fn(context, options);\n        container.partials = original;\n        return ret;\n      };\n    }\n\n    props.partials[options.args[0]] = options.fn;\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2RlY29yYXRvcnMvaW5saW5lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQXFCLFVBQVU7O3FCQUVoQixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFVBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQzNFLFFBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ25CLFdBQUssQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLFNBQUcsR0FBRyxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7O0FBRS9CLFlBQUksUUFBUSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDbEMsaUJBQVMsQ0FBQyxRQUFRLEdBQUcsY0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxRCxZQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQy9CLGlCQUFTLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUM5QixlQUFPLEdBQUcsQ0FBQztPQUNaLENBQUM7S0FDSDs7QUFFRCxTQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUU3QyxXQUFPLEdBQUcsQ0FBQztHQUNaLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6ImlubGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVyRGVjb3JhdG9yKCdpbmxpbmUnLCBmdW5jdGlvbihmbiwgcHJvcHMsIGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIGxldCByZXQgPSBmbjtcbiAgICBpZiAoIXByb3BzLnBhcnRpYWxzKSB7XG4gICAgICBwcm9wcy5wYXJ0aWFscyA9IHt9O1xuICAgICAgcmV0ID0gZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFydGlhbHMgc3RhY2sgZnJhbWUgcHJpb3IgdG8gZXhlYy5cbiAgICAgICAgbGV0IG9yaWdpbmFsID0gY29udGFpbmVyLnBhcnRpYWxzO1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBleHRlbmQoe30sIG9yaWdpbmFsLCBwcm9wcy5wYXJ0aWFscyk7XG4gICAgICAgIGxldCByZXQgPSBmbihjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3JpZ2luYWw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHByb3BzLnBhcnRpYWxzW29wdGlvbnMuYXJnc1swXV0gPSBvcHRpb25zLmZuO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('./utils');\n\nvar logger = {\n  methodMap: ['debug', 'info', 'warn', 'error'],\n  level: 'info',\n\n  // Maps a given level value to the `methodMap` indexes above.\n  lookupLevel: function lookupLevel(level) {\n    if (typeof level === 'string') {\n      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());\n      if (levelMap >= 0) {\n        level = levelMap;\n      } else {\n        level = parseInt(level, 10);\n      }\n    }\n\n    return level;\n  },\n\n  // Can be overridden in the host environment\n  log: function log(level) {\n    level = logger.lookupLevel(level);\n\n    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {\n      var method = logger.methodMap[level];\n      if (!console[method]) {\n        // eslint-disable-line no-console\n        method = 'log';\n      }\n\n      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        message[_key - 1] = arguments[_key];\n      }\n\n      console[method].apply(console, message); // eslint-disable-line no-console\n    }\n  }\n};\n\nexports['default'] = logger;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2xvZ2dlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3FCQUFzQixTQUFTOztBQUUvQixJQUFJLE1BQU0sR0FBRztBQUNYLFdBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQztBQUM3QyxPQUFLLEVBQUUsTUFBTTs7O0FBR2IsYUFBVyxFQUFFLHFCQUFTLEtBQUssRUFBRTtBQUMzQixRQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUM3QixVQUFJLFFBQVEsR0FBRyxlQUFRLE1BQU0sQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDOUQsVUFBSSxRQUFRLElBQUksQ0FBQyxFQUFFO0FBQ2pCLGFBQUssR0FBRyxRQUFRLENBQUM7T0FDbEIsTUFBTTtBQUNMLGFBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO09BQzdCO0tBQ0Y7O0FBRUQsV0FBTyxLQUFLLENBQUM7R0FDZDs7O0FBR0QsS0FBRyxFQUFFLGFBQVMsS0FBSyxFQUFjO0FBQy9CLFNBQUssR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVsQyxRQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLEVBQUU7QUFDL0UsVUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQyxVQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFOztBQUNwQixjQUFNLEdBQUcsS0FBSyxDQUFDO09BQ2hCOzt3Q0FQbUIsT0FBTztBQUFQLGVBQU87OztBQVEzQixhQUFPLENBQUMsTUFBTSxPQUFDLENBQWYsT0FBTyxFQUFZLE9BQU8sQ0FBQyxDQUFDO0tBQzdCO0dBQ0Y7Q0FDRixDQUFDOztxQkFFYSxNQUFNIiwiZmlsZSI6ImxvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aW5kZXhPZn0gZnJvbSAnLi91dGlscyc7XG5cbmxldCBsb2dnZXIgPSB7XG4gIG1ldGhvZE1hcDogWydkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InXSxcbiAgbGV2ZWw6ICdpbmZvJyxcblxuICAvLyBNYXBzIGEgZ2l2ZW4gbGV2ZWwgdmFsdWUgdG8gdGhlIGBtZXRob2RNYXBgIGluZGV4ZXMgYWJvdmUuXG4gIGxvb2t1cExldmVsOiBmdW5jdGlvbihsZXZlbCkge1xuICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZXQgbGV2ZWxNYXAgPSBpbmRleE9mKGxvZ2dlci5tZXRob2RNYXAsIGxldmVsLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKGxldmVsTWFwID49IDApIHtcbiAgICAgICAgbGV2ZWwgPSBsZXZlbE1hcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldmVsID0gcGFyc2VJbnQobGV2ZWwsIDEwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGV2ZWw7XG4gIH0sXG5cbiAgLy8gQ2FuIGJlIG92ZXJyaWRkZW4gaW4gdGhlIGhvc3QgZW52aXJvbm1lbnRcbiAgbG9nOiBmdW5jdGlvbihsZXZlbCwgLi4ubWVzc2FnZSkge1xuICAgIGxldmVsID0gbG9nZ2VyLmxvb2t1cExldmVsKGxldmVsKTtcblxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbG9nZ2VyLmxvb2t1cExldmVsKGxvZ2dlci5sZXZlbCkgPD0gbGV2ZWwpIHtcbiAgICAgIGxldCBtZXRob2QgPSBsb2dnZXIubWV0aG9kTWFwW2xldmVsXTtcbiAgICAgIGlmICghY29uc29sZVttZXRob2RdKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICBtZXRob2QgPSAnbG9nJztcbiAgICAgIH1cbiAgICAgIGNvbnNvbGVbbWV0aG9kXSguLi5tZXNzYWdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4iXX0=\n","// Build out our basic SafeString type\n'use strict';\n\nexports.__esModule = true;\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function () {\n  return '' + this.string;\n};\n\nexports['default'] = SafeString;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3NhZmUtc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxTQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUU7QUFDMUIsTUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7Q0FDdEI7O0FBRUQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUN2RSxTQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0NBQ3pCLENBQUM7O3FCQUVhLFVBQVUiLCJmaWxlIjoic2FmZS1zdHJpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCdWlsZCBvdXQgb3VyIGJhc2ljIFNhZmVTdHJpbmcgdHlwZVxuZnVuY3Rpb24gU2FmZVN0cmluZyhzdHJpbmcpIHtcbiAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG59XG5cblNhZmVTdHJpbmcucHJvdG90eXBlLnRvU3RyaW5nID0gU2FmZVN0cmluZy5wcm90b3R5cGUudG9IVE1MID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAnJyArIHRoaXMuc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2FmZVN0cmluZztcbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\nexports.checkRevision = checkRevision;\nexports.template = template;\nexports.wrapProgram = wrapProgram;\nexports.resolvePartial = resolvePartial;\nexports.invokePartial = invokePartial;\nexports.noop = noop;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _utils = require('./utils');\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _base = require('./base');\n\nvar _helpers = require('./helpers');\n\nfunction checkRevision(compilerInfo) {\n  var compilerRevision = compilerInfo && compilerInfo[0] || 1,\n      currentRevision = _base.COMPILER_REVISION;\n\n  if (compilerRevision >= _base.LAST_COMPATIBLE_COMPILER_REVISION && compilerRevision <= _base.COMPILER_REVISION) {\n    return;\n  }\n\n  if (compilerRevision < _base.LAST_COMPATIBLE_COMPILER_REVISION) {\n    var runtimeVersions = _base.REVISION_CHANGES[currentRevision],\n        compilerVersions = _base.REVISION_CHANGES[compilerRevision];\n    throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');\n  } else {\n    // Use the embedded version info since the runtime doesn't know about this revision yet\n    throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');\n  }\n}\n\nfunction template(templateSpec, env) {\n\n  /* istanbul ignore next */\n  if (!env) {\n    throw new _exception2['default']('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d;\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as pseudo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  // backwards compatibility for precompiled templates with compiler-version 7 (<4.3.0)\n  var templateWasPrecompiledWithCompilerV7 = templateSpec.compiler && templateSpec.compiler[0] === 7;\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n\n    var optionsWithHooks = Utils.extend({}, options, { hooks: this.hooks });\n\n    var result = env.VM.invokePartial.call(this, partial, context, optionsWithHooks);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, optionsWithHooks);\n    }\n    if (result != null) {\n      if (options.indent) {\n        var lines = result.split('\\n');\n        for (var i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');\n    }\n  }\n\n  // Just add water\n  var container = {\n    strict: function strict(obj, name, loc) {\n      if (!obj || !(name in obj)) {\n        throw new _exception2['default']('\"' + name + '\" not defined in ' + obj, { loc: loc });\n      }\n      return obj[name];\n    },\n    lookup: function lookup(depths, name) {\n      var len = depths.length;\n      for (var i = 0; i < len; i++) {\n        if (depths[i] && depths[i][name] != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function lambda(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function fn(i) {\n      var ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n\n    programs: [],\n    program: function program(i, data, declaredBlockParams, blockParams, depths) {\n      var programWrapper = this.programs[i],\n          fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function data(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    // An empty object to use as replacement for null-contexts\n    nullContext: Object.seal({}),\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    var depths = undefined,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths = context != options.depths[0] ? [context].concat(options.depths) : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context /*, options*/) {\n      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);\n    }\n    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);\n    return main(context, options);\n  }\n  ret.isTop = true;\n\n  ret._setup = function (options) {\n    if (!options.partial) {\n      container.helpers = Utils.extend({}, env.helpers, options.helpers);\n\n      if (templateSpec.usePartial) {\n        container.partials = Utils.extend({}, env.partials, options.partials);\n      }\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = Utils.extend({}, env.decorators, options.decorators);\n      }\n\n      container.hooks = {};\n\n      var keepHelperInHelpers = options.allowCallsToHelperMissing || templateWasPrecompiledWithCompilerV7;\n      _helpers.moveHelperToHooks(container, 'helperMissing', keepHelperInHelpers);\n      _helpers.moveHelperToHooks(container, 'blockHelperMissing', keepHelperInHelpers);\n    } else {\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n      container.hooks = options.hooks;\n    }\n  };\n\n  ret._child = function (i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new _exception2['default']('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new _exception2['default']('must pass parent depths');\n    }\n\n    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n  return ret;\n}\n\nfunction wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  function prog(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var currentDepths = depths;\n    if (depths && context != depths[0] && !(context === container.nullContext && depths[0] === null)) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\n/**\n * This is currently part of the official API, therefore implementation details should not be changed.\n */\n\nfunction resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nfunction invokePartial(partial, context, options) {\n  // Use the current closure context to save the partial-block if this partial\n  var currentPartialBlock = options.data && options.data['partial-block'];\n  options.partial = true;\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  var partialBlock = undefined;\n  if (options.fn && options.fn !== noop) {\n    (function () {\n      options.data = _base.createFrame(options.data);\n      // Wrapper function to get access to currentPartialBlock from the closure\n      var fn = options.fn;\n      partialBlock = options.data['partial-block'] = function partialBlockWrapper(context) {\n        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n        // Restore the partial-block from the closure for the execution of the block\n        // i.e. the part inside the block of the partial call.\n        options.data = _base.createFrame(options.data);\n        options.data['partial-block'] = currentPartialBlock;\n        return fn(context, options);\n      };\n      if (fn.partials) {\n        options.partials = Utils.extend({}, options.partials, fn.partials);\n      }\n    })();\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new _exception2['default']('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nfunction noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? _base.createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    var props = {};\n    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);\n    Utils.extend(prog, props);\n  }\n  return prog;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3J1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJBQXVCLFNBQVM7O0lBQXBCLEtBQUs7O3lCQUNLLGFBQWE7Ozs7b0JBQytELFFBQVE7O3VCQUMxRSxXQUFXOztBQUVwQyxTQUFTLGFBQWEsQ0FBQyxZQUFZLEVBQUU7QUFDMUMsTUFBTSxnQkFBZ0IsR0FBRyxZQUFZLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7TUFDdkQsZUFBZSwwQkFBb0IsQ0FBQzs7QUFFMUMsTUFBSSxnQkFBZ0IsMkNBQXFDLElBQUksZ0JBQWdCLDJCQUFxQixFQUFFO0FBQ2xHLFdBQU87R0FDUjs7QUFFRCxNQUFJLGdCQUFnQiwwQ0FBb0MsRUFBRTtBQUN4RCxRQUFNLGVBQWUsR0FBRyx1QkFBaUIsZUFBZSxDQUFDO1FBQ25ELGdCQUFnQixHQUFHLHVCQUFpQixnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVELFVBQU0sMkJBQWMseUZBQXlGLEdBQ3ZHLHFEQUFxRCxHQUFHLGVBQWUsR0FBRyxtREFBbUQsR0FBRyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsQ0FBQztHQUNoSyxNQUFNOztBQUVMLFVBQU0sMkJBQWMsd0ZBQXdGLEdBQ3RHLGlEQUFpRCxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztHQUNuRjtDQUNGOztBQUVNLFNBQVMsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7OztBQUcxQyxNQUFJLENBQUMsR0FBRyxFQUFFO0FBQ1IsVUFBTSwyQkFBYyxtQ0FBbUMsQ0FBQyxDQUFDO0dBQzFEO0FBQ0QsTUFBSSxDQUFDLFlBQVksSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUU7QUFDdkMsVUFBTSwyQkFBYywyQkFBMkIsR0FBRyxPQUFPLFlBQVksQ0FBQyxDQUFDO0dBQ3hFOztBQUVELGNBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxH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LElBQUksQ0FBQSxBQUFDLEVBQUU7QUFDOUIsUUFBSSxHQUFHLElBQUksR0FBRyxrQkFBWSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDckMsUUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7R0FDckI7QUFDRCxTQUFPLElBQUksQ0FBQztDQUNiOztBQUVELFNBQVMsaUJBQWlCLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7QUFDekUsTUFBSSxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2hCLFFBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM1RixTQUFLLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztHQUMzQjtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2IiLCJmaWxlIjoicnVudGltZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQge0NPTVBJTEVSX1JFVklTSU9OLCBjcmVhdGVGcmFtZSwgTEFTVF9DT01QQVRJQkxFX0NPTVBJTEVSX1JFVklTSU9OLCBSRVZJU0lPTl9DSEFOR0VTfSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0IHttb3ZlSGVscGVyVG9Ib29rc30gZnJvbSAnLi9oZWxwZXJzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmV2aXNpb24oY29tcGlsZXJJbmZvKSB7XG4gIGNvbnN0IGNvbXBpbGVyUmV2aXNpb24gPSBjb21waWxlckluZm8gJiYgY29tcGlsZXJJbmZvWzBdIHx8IDEsXG4gICAgICAgIGN1cnJlbnRSZXZpc2lvbiA9IENPTVBJTEVSX1JFVklTSU9OO1xuXG4gIGlmIChjb21waWxlclJldmlzaW9uID49IExBU1RfQ09NUEFUSUJMRV9DT01QSUxFUl9SRVZJU0lPTiAmJiBjb21waWxlclJldmlzaW9uIDw9IENPTVBJTEVSX1JFVklTSU9OKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbXBpbGVyUmV2aXNpb24gPCBMQVNUX0NPTVBBVElCTEVfQ09NUElMRVJfUkVWSVNJT04pIHtcbiAgICBjb25zdCBydW50aW1lVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2N1cnJlbnRSZXZpc2lvbl0sXG4gICAgICAgICAgY29tcGlsZXJWZXJzaW9ucyA9IFJFVklTSU9OX0NIQU5HRVNbY29tcGlsZXJSZXZpc2lvbl07XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYW4gb2xkZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gJyArXG4gICAgICAgICAgJ1BsZWFzZSB1cGRhdGUgeW91ciBwcmVjb21waWxlciB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBydW50aW1lVmVyc2lvbnMgKyAnKSBvciBkb3duZ3JhZGUgeW91ciBydW50aW1lIHRvIGFuIG9sZGVyIHZlcnNpb24gKCcgKyBjb21waWxlclZlcnNpb25zICsgJykuJyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVXNlIHRoZSBlbWJlZGRlZCB2ZXJzaW9uIGluZm8gc2luY2UgdGhlIHJ1bnRpbWUgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgcmV2aXNpb24geWV0XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYSBuZXdlciB2ZXJzaW9uIG9mIEhhbmRsZWJhcnMgdGhhbiB0aGUgY3VycmVudCBydW50aW1lLiAnICtcbiAgICAgICAgICAnUGxlYXNlIHVwZGF0ZSB5b3VyIHJ1bnRpbWUgdG8gYSBuZXdlciB2ZXJzaW9uICgnICsgY29tcGlsZXJJbmZvWzFdICsgJykuJyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlKHRlbXBsYXRlU3BlYywgZW52KSB7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKCFlbnYpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdObyBlbnZpcm9ubWVudCBwYXNzZWQgdG8gdGVtcGxhdGUnKTtcbiAgfVxuICBpZiAoIXRlbXBsYXRlU3BlYyB8fCAhdGVtcGxhdGVTcGVjLm1haW4pIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdVbmtub3duIHRlbXBsYXRlIG9iamVjdDogJyArIHR5cGVvZiB0ZW1wbGF0ZVNwZWMpO1xuICB9XG5cbiAgdGVtcGxhdGVTcGVjLm1haW4uZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjLm1haW5fZDtcblxuICAvLyBOb3RlOiBVc2luZyBlbnYuVk0gcmVmZXJlbmNlcyByYXRoZXIgdGhhbiBsb2NhbCB2YXIgcmVmZXJlbmNlcyB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBhbGxvd1xuICAvLyBmb3IgZXh0ZXJuYWwgdXNlcnMgdG8gb3ZlcnJpZGUgdGhlc2UgYXMgcHNldWRvLXN1cHBvcnRlZCBBUElzLlxuICBlbnYuVk0uY2hlY2tSZXZpc2lvbih0ZW1wbGF0ZVNwZWMuY29tcGlsZXIpO1xuXG4gIC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBwcmVjb21waWxlZCB0ZW1wbGF0ZXMgd2l0aCBjb21waWxlci12ZXJzaW9uIDcgKDw0LjMuMClcbiAgY29uc3QgdGVtcGxhdGVXYXNQcmVjb21waWxlZFdpdGhDb21waWxlclY3ID0gdGVtcGxhdGVTcGVjLmNvbXBpbGVyICYmIHRlbXBsYXRlU3BlYy5jb21waWxlclswXSA9PT0gNztcblxuICBmdW5jdGlvbiBpbnZva2VQYXJ0aWFsV3JhcHBlcihwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuaGFzaCkge1xuICAgICAgY29udGV4dCA9IFV0aWxzLmV4dGVuZCh7fSwgY29udGV4dCwgb3B0aW9ucy5oYXNoKTtcbiAgICAgIGlmIChvcHRpb25zLmlkcykge1xuICAgICAgICBvcHRpb25zLmlkc1swXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHBhcnRpYWwgPSBlbnYuVk0ucmVzb2x2ZVBhcnRpYWwuY2FsbCh0aGlzLCBwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKTtcblxuICAgIGxldCBvcHRpb25zV2l0aEhvb2tzID0gVXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zLCB7aG9va3M6IHRoaXMuaG9va3N9KTtcblxuICAgIGxldCByZXN1bHQgPSBlbnYuVk0uaW52b2tlUGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnNXaXRoSG9va3MpO1xuXG4gICAgaWYgKHJlc3VsdCA9PSBudWxsICYmIGVudi5jb21waWxlKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0gPSBlbnYuY29tcGlsZShwYXJ0aWFsLCB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJPcHRpb25zLCBlbnYpO1xuICAgICAgcmVzdWx0ID0gb3B0aW9ucy5wYXJ0aWFsc1tvcHRpb25zLm5hbWVdKGNvbnRleHQsIG9wdGlvbnNXaXRoSG9va3MpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIGlmIChvcHRpb25zLmluZGVudCkge1xuICAgICAgICBsZXQgbGluZXMgPSByZXN1bHQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGlmICghbGluZXNbaV0gJiYgaSArIDEgPT09IGwpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpbmVzW2ldID0gb3B0aW9ucy5pbmRlbnQgKyBsaW5lc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBsaW5lcy5qb2luKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RoZSBwYXJ0aWFsICcgKyBvcHRpb25zLm5hbWUgKyAnIGNvdWxkIG5vdCBiZSBjb21waWxlZCB3aGVuIHJ1bm5pbmcgaW4gcnVudGltZS1vbmx5IG1vZGUnKTtcbiAgICB9XG4gIH1cblxuICAvLyBKdXN0IGFkZCB3YXRlclxuICBsZXQgY29udGFpbmVyID0ge1xuICAgIHN0cmljdDogZnVuY3Rpb24ob2JqLCBuYW1lLCBsb2MpIHtcbiAgICAgIGlmICghb2JqIHx8ICEobmFtZSBpbiBvYmopKSB7XG4gICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1wiJyArIG5hbWUgKyAnXCIgbm90IGRlZmluZWQgaW4gJyArIG9iaiwgeyBsb2M6IGxvYyB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmpbbmFtZV07XG4gICAgfSxcbiAgICBsb29rdXA6IGZ1bmN0aW9uKGRlcHRocywgbmFtZSkge1xuICAgICAgY29uc3QgbGVuID0gZGVwdGhzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGRlcHRoc1tpXSAmJiBkZXB0aHNbaV1bbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBkZXB0aHNbaV1bbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGxhbWJkYTogZnVuY3Rpb24oY3VycmVudCwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50ID09PSAnZnVuY3Rpb24nID8gY3VycmVudC5jYWxsKGNvbnRleHQpIDogY3VycmVudDtcbiAgICB9LFxuXG4gICAgZXNjYXBlRXhwcmVzc2lvbjogVXRpbHMuZXNjYXBlRXhwcmVzc2lvbixcbiAgICBpbnZva2VQYXJ0aWFsOiBpbnZva2VQYXJ0aWFsV3JhcHBlcixcblxuICAgIGZuOiBmdW5jdGlvbihpKSB7XG4gICAgICBsZXQgcmV0ID0gdGVtcGxhdGVTcGVjW2ldO1xuICAgICAgcmV0LmRlY29yYXRvciA9IHRlbXBsYXRlU3BlY1tpICsgJ19kJ107XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICBwcm9ncmFtczogW10sXG4gICAgcHJvZ3JhbTogZnVuY3Rpb24oaSwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgICAgbGV0IHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSxcbiAgICAgICAgICBmbiA9IHRoaXMuZm4oaSk7XG4gICAgICBpZiAoZGF0YSB8fCBkZXB0aHMgfHwgYmxvY2tQYXJhbXMgfHwgZGVjbGFyZWRCbG9ja1BhcmFtcykge1xuICAgICAgICBwcm9ncmFtV3JhcHBlciA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgICAgIH0gZWxzZSBpZiAoIXByb2dyYW1XcmFwcGVyKSB7XG4gICAgICAgIHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9ncmFtV3JhcHBlcjtcbiAgICB9LFxuXG4gICAgZGF0YTogZnVuY3Rpb24odmFsdWUsIGRlcHRoKSB7XG4gICAgICB3aGlsZSAodmFsdWUgJiYgZGVwdGgtLSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLl9wYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICAvLyBBbiBlbXB0eSBvYmplY3QgdG8gdXNlIGFzIHJlcGxhY2VtZW50IGZvciBudWxsLWNvbnRleHRzXG4gICAgbnVsbENvbnRleHQ6IE9iamVjdC5zZWFsKHt9KSxcblxuICAgIG5vb3A6IGVudi5WTS5ub29wLFxuICAgIGNvbXBpbGVySW5mbzogdGVtcGxhdGVTcGVjLmNvbXBpbGVyXG4gIH07XG5cbiAgZnVuY3Rpb24gcmV0KGNvbnRleHQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuXG4gICAgcmV0Ll9zZXR1cChvcHRpb25zKTtcbiAgICBpZiAoIW9wdGlvbnMucGFydGlhbCAmJiB0ZW1wbGF0ZVNwZWMudXNlRGF0YSkge1xuICAgICAgZGF0YSA9IGluaXREYXRhKGNvbnRleHQsIGRhdGEpO1xuICAgIH1cbiAgICBsZXQgZGVwdGhzLFxuICAgICAgICBibG9ja1BhcmFtcyA9IHRlbXBsYXRlU3BlYy51c2VCbG9ja1BhcmFtcyA/IFtdIDogdW5kZWZpbmVkO1xuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlRGVwdGhzKSB7XG4gICAgICBpZiAob3B0aW9ucy5kZXB0aHMpIHtcbiAgICAgICAgZGVwdGhzID0gY29udGV4dCAhPSBvcHRpb25zLmRlcHRoc1swXSA/IFtjb250ZXh0XS5jb25jYXQob3B0aW9ucy5kZXB0aHMpIDogb3B0aW9ucy5kZXB0aHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXB0aHMgPSBbY29udGV4dF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFpbihjb250ZXh0LyosIG9wdGlvbnMqLykge1xuICAgICAgcmV0dXJuICcnICsgdGVtcGxhdGVTcGVjLm1haW4oY29udGFpbmVyLCBjb250ZXh0LCBjb250YWluZXIuaGVscGVycywgY29udGFpbmVyLnBhcnRpYWxzLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgICB9XG4gICAgbWFpbiA9IGV4ZWN1dGVEZWNvcmF0b3JzKHRlbXBsYXRlU3BlYy5tYWluLCBtYWluLCBjb250YWluZXIsIG9wdGlvbnMuZGVwdGhzIHx8IFtdLCBkYXRhLCBibG9ja1BhcmFtcyk7XG4gICAgcmV0dXJuIG1haW4oY29udGV4dCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0LmlzVG9wID0gdHJ1ZTtcblxuICByZXQuX3NldHVwID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucy5wYXJ0aWFsKSB7XG4gICAgICBjb250YWluZXIuaGVscGVycyA9IFV0aWxzLmV4dGVuZCh7fSwgZW52LmhlbHBlcnMsIG9wdGlvbnMuaGVscGVycyk7XG5cbiAgICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlUGFydGlhbCkge1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBVdGlscy5leHRlbmQoe30sIGVudi5wYXJ0aWFscywgb3B0aW9ucy5wYXJ0aWFscyk7XG4gICAgICB9XG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwgfHwgdGVtcGxhdGVTcGVjLnVzZURlY29yYXRvcnMpIHtcbiAgICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBVdGlscy5leHRlbmQoe30sIGVudi5kZWNvcmF0b3JzLCBvcHRpb25zLmRlY29yYXRvcnMpO1xuICAgICAgfVxuXG4gICAgICBjb250YWluZXIuaG9va3MgPSB7fTtcblxuICAgICAgbGV0IGtlZXBIZWxwZXJJbkhlbHBlcnMgPSBvcHRpb25zLmFsbG93Q2FsbHNUb0hlbHBlck1pc3NpbmcgfHwgdGVtcGxhdGVXYXNQcmVjb21waWxlZFdpdGhDb21waWxlclY3O1xuICAgICAgbW92ZUhlbHBlclRvSG9va3MoY29udGFpbmVyLCAnaGVscGVyTWlzc2luZycsIGtlZXBIZWxwZXJJbkhlbHBlcnMpO1xuICAgICAgbW92ZUhlbHBlclRvSG9va3MoY29udGFpbmVyLCAnYmxvY2tIZWxwZXJNaXNzaW5nJywga2VlcEhlbHBlckluSGVscGVycyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLmhlbHBlcnMgPSBvcHRpb25zLmhlbHBlcnM7XG4gICAgICBjb250YWluZXIucGFydGlhbHMgPSBvcHRpb25zLnBhcnRpYWxzO1xuICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBvcHRpb25zLmRlY29yYXRvcnM7XG4gICAgICBjb250YWluZXIuaG9va3MgPSBvcHRpb25zLmhvb2tzO1xuICAgIH1cblxuICB9O1xuXG4gIHJldC5fY2hpbGQgPSBmdW5jdGlvbihpLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gICAgaWYgKHRlbXBsYXRlU3BlYy51c2VCbG9ja1BhcmFtcyAmJiAhYmxvY2tQYXJhbXMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ211c3QgcGFzcyBibG9jayBwYXJhbXMnKTtcbiAgICB9XG4gICAgaWYgKHRlbXBsYXRlU3BlYy51c2VEZXB0aHMgJiYgIWRlcHRocykge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignbXVzdCBwYXNzIHBhcmVudCBkZXB0aHMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JhcFByb2dyYW0oY29udGFpbmVyLCBpLCB0ZW1wbGF0ZVNwZWNbaV0sIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICB9O1xuICByZXR1cm4gcmV0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd3JhcFByb2dyYW0oY29udGFpbmVyLCBpLCBmbiwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICBmdW5jdGlvbiBwcm9nKGNvbnRleHQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBjdXJyZW50RGVwdGhzID0gZGVwdGhzO1xuICAgIGlmIChkZXB0aHMgJiYgY29udGV4dCAhPSBkZXB0aHNbMF0gJiYgIShjb250ZXh0ID09PSBjb250YWluZXIubnVsbENvbnRleHQgJiYgZGVwdGhzWzBdID09PSBudWxsKSkge1xuICAgICAgY3VycmVudERlcHRocyA9IFtjb250ZXh0XS5jb25jYXQoZGVwdGhzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm4oY29udGFpbmVyLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBjb250YWluZXIuaGVscGVycywgY29udGFpbmVyLnBhcnRpYWxzLFxuICAgICAgICBvcHRpb25zLmRhdGEgfHwgZGF0YSxcbiAgICAgICAgYmxvY2tQYXJhbXMgJiYgW29wdGlvbnMuYmxvY2tQYXJhbXNdLmNvbmNhdChibG9ja1BhcmFtcyksXG4gICAgICAgIGN1cnJlbnREZXB0aHMpO1xuICB9XG5cbiAgcHJvZyA9IGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpO1xuXG4gIHByb2cucHJvZ3JhbSA9IGk7XG4gIHByb2cuZGVwdGggPSBkZXB0aHMgPyBkZXB0aHMubGVuZ3RoIDogMDtcbiAgcHJvZy5ibG9ja1BhcmFtcyA9IGRlY2xhcmVkQmxvY2tQYXJhbXMgfHwgMDtcbiAgcmV0dXJuIHByb2c7XG59XG5cbi8qKlxuICogVGhpcyBpcyBjdXJyZW50bHkgcGFydCBvZiB0aGUgb2ZmaWNpYWwgQVBJLCB0aGVyZWZvcmUgaW1wbGVtZW50YXRpb24gZGV0YWlscyBzaG91bGQgbm90IGJlIGNoYW5nZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGFydGlhbChwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gIGlmICghcGFydGlhbCkge1xuICAgIGlmIChvcHRpb25zLm5hbWUgPT09ICdAcGFydGlhbC1ibG9jaycpIHtcbiAgICAgIHBhcnRpYWwgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydGlhbCA9IG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIXBhcnRpYWwuY2FsbCAmJiAhb3B0aW9ucy5uYW1lKSB7XG4gICAgLy8gVGhpcyBpcyBhIGR5bmFtaWMgcGFydGlhbCB0aGF0IHJldHVybmVkIGEgc3RyaW5nXG4gICAgb3B0aW9ucy5uYW1lID0gcGFydGlhbDtcbiAgICBwYXJ0aWFsID0gb3B0aW9ucy5wYXJ0aWFsc1twYXJ0aWFsXTtcbiAgfVxuICByZXR1cm4gcGFydGlhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZVBhcnRpYWwocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykge1xuICAvLyBVc2UgdGhlIGN1cnJlbnQgY2xvc3VyZSBjb250ZXh0IHRvIHNhdmUgdGhlIHBhcnRpYWwtYmxvY2sgaWYgdGhpcyBwYXJ0aWFsXG4gIGNvbnN0IGN1cnJlbnRQYXJ0aWFsQmxvY2sgPSBvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ107XG4gIG9wdGlvbnMucGFydGlhbCA9IHRydWU7XG4gIGlmIChvcHRpb25zLmlkcykge1xuICAgIG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCA9IG9wdGlvbnMuaWRzWzBdIHx8IG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aDtcbiAgfVxuXG4gIGxldCBwYXJ0aWFsQmxvY2s7XG4gIGlmIChvcHRpb25zLmZuICYmIG9wdGlvbnMuZm4gIT09IG5vb3ApIHtcbiAgICBvcHRpb25zLmRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgIC8vIFdyYXBwZXIgZnVuY3Rpb24gdG8gZ2V0IGFjY2VzcyB0byBjdXJyZW50UGFydGlhbEJsb2NrIGZyb20gdGhlIGNsb3N1cmVcbiAgICBsZXQgZm4gPSBvcHRpb25zLmZuO1xuICAgIHBhcnRpYWxCbG9jayA9IG9wdGlvbnMuZGF0YVsncGFydGlhbC1ibG9jayddID0gZnVuY3Rpb24gcGFydGlhbEJsb2NrV3JhcHBlcihjb250ZXh0LCBvcHRpb25zID0ge30pIHtcblxuICAgICAgLy8gUmVzdG9yZSB0aGUgcGFydGlhbC1ibG9jayBmcm9tIHRoZSBjbG9zdXJlIGZvciB0aGUgZXhlY3V0aW9uIG9mIHRoZSBibG9ja1xuICAgICAgLy8gaS5lLiB0aGUgcGFydCBpbnNpZGUgdGhlIGJsb2NrIG9mIHRoZSBwYXJ0aWFsIGNhbGwuXG4gICAgICBvcHRpb25zLmRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgICAgb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ10gPSBjdXJyZW50UGFydGlhbEJsb2NrO1xuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgaWYgKGZuLnBhcnRpYWxzKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzID0gVXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zLnBhcnRpYWxzLCBmbi5wYXJ0aWFscyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhcnRpYWwgPT09IHVuZGVmaW5lZCAmJiBwYXJ0aWFsQmxvY2spIHtcbiAgICBwYXJ0aWFsID0gcGFydGlhbEJsb2NrO1xuICB9XG5cbiAgaWYgKHBhcnRpYWwgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RoZSBwYXJ0aWFsICcgKyBvcHRpb25zLm5hbWUgKyAnIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICB9IGVsc2UgaWYgKHBhcnRpYWwgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgIHJldHVybiBwYXJ0aWFsKGNvbnRleHQsIG9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkgeyByZXR1cm4gJyc7IH1cblxuZnVuY3Rpb24gaW5pdERhdGEoY29udGV4dCwgZGF0YSkge1xuICBpZiAoIWRhdGEgfHwgISgncm9vdCcgaW4gZGF0YSkpIHtcbiAgICBkYXRhID0gZGF0YSA/IGNyZWF0ZUZyYW1lKGRhdGEpIDoge307XG4gICAgZGF0YS5yb290ID0gY29udGV4dDtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gZXhlY3V0ZURlY29yYXRvcnMoZm4sIHByb2csIGNvbnRhaW5lciwgZGVwdGhzLCBkYXRhLCBibG9ja1BhcmFtcykge1xuICBpZiAoZm4uZGVjb3JhdG9yKSB7XG4gICAgbGV0IHByb3BzID0ge307XG4gICAgcHJvZyA9IGZuLmRlY29yYXRvcihwcm9nLCBwcm9wcywgY29udGFpbmVyLCBkZXB0aHMgJiYgZGVwdGhzWzBdLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgICBVdGlscy5leHRlbmQocHJvZywgcHJvcHMpO1xuICB9XG4gIHJldHVybiBwcm9nO1xufVxuIl19\n","/* global window */\n'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (Handlebars) {\n  /* istanbul ignore next */\n  var root = typeof global !== 'undefined' ? global : window,\n      $Handlebars = root.Handlebars;\n  /* istanbul ignore next */\n  Handlebars.noConflict = function () {\n    if (root.Handlebars === Handlebars) {\n      root.Handlebars = $Handlebars;\n    }\n    return Handlebars;\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL25vLWNvbmZsaWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUNlLFVBQVMsVUFBVSxFQUFFOztBQUVsQyxNQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sS0FBSyxXQUFXLEdBQUcsTUFBTSxHQUFHLE1BQU07TUFDdEQsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7O0FBRWxDLFlBQVUsQ0FBQyxVQUFVLEdBQUcsWUFBVztBQUNqQyxRQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO0FBQ2xDLFVBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO0tBQy9CO0FBQ0QsV0FBTyxVQUFVLENBQUM7R0FDbkIsQ0FBQztDQUNIIiwiZmlsZSI6Im5vLWNvbmZsaWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHdpbmRvdyAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oSGFuZGxlYmFycykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBsZXQgcm9vdCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93LFxuICAgICAgJEhhbmRsZWJhcnMgPSByb290LkhhbmRsZWJhcnM7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIEhhbmRsZWJhcnMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHtcbiAgICAgIHJvb3QuSGFuZGxlYmFycyA9ICRIYW5kbGViYXJzO1xuICAgIH1cbiAgICByZXR1cm4gSGFuZGxlYmFycztcbiAgfTtcbn1cbiJdfQ==\n"]},"metadata":{},"sourceType":"script"}