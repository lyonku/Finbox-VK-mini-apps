{"ast":null,"code":"import _slicedToArray from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import VerificationStar from\"img/verificationStar.svg\";import InactiveStarSmall from\"components/InactiveStarSmall\";import ActiveStarSmall from\"components/ActiveStarSmall\";import{Rating}from\"react-simple-star-rating\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CommentsItem(_ref){var _comment$createdAt;var index=_ref.index,comment=_ref.comment,group=_ref.group,setTextReply=_ref.setTextReply,handleBlockComment=_ref.handleBlockComment,messagesIdMass=_ref.messagesIdMass,chosenGroup=_ref.chosenGroup,setEditText=_ref.setEditText;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),fullText=_useState2[0],setFullText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),fullTextReply=_useState4[0],setFullTextReply=_useState4[1];var months=[\"Января\",\"Февраля\",\"Марта\",\"Апреля\",\"Мая\",\"Июня\",\"Июля\",\"Августа\",\"Сентября\",\"Октября\",\"Ноября\",\"Декабря\"];var getDate=function getDate(date){var newDate=new Date(date*1000);return newDate.getDate()+\" \"+months[newDate.getMonth()];};return/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:comment.displayPhoto,className:\"comments__item-avatar-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item-other\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-name\",children:comment.displayName}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item-dateAndRate\",children:[/*#__PURE__*/_jsx(Rating,{size:16,readonly:true,initialValue:comment.rating,emptyIcon:/*#__PURE__*/_jsx(InactiveStarSmall,{}),fillIcon:/*#__PURE__*/_jsx(ActiveStarSmall,{color:comment===null||comment===void 0?void 0:comment.rating})}),/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-date\",children:getDate((_comment$createdAt=comment.createdAt)===null||_comment$createdAt===void 0?void 0:_comment$createdAt.seconds)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-text\",children:fullText||comment.text.length<350?comment.text:comment.text.slice(0,350)+\"...\"}),comment.text.length>350&&/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-text-more\",onClick:function onClick(){setFullText(!fullText);},children:!fullText?\"Читать дальше\":\"Скрыть\"})]})]}),comment.reply?/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item-reply-wrap\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"comments__item-reply-avatar\",src:group===null||group===void 0?void 0:group.photo_50}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item-reply\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comments__item-reply-title\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-title-text\",children:\"Ответ \"+(group===null||group===void 0?void 0:group.screen_name)}),/*#__PURE__*/_jsx(\"img\",{src:VerificationStar,className:\"comments__item-reply-title-img\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-reply-text\",children:fullTextReply||comment.reply.length<200?comment.reply:comment.reply.slice(0,200)+\"...\"}),comment.reply.length>200&&/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-text-more\",onClick:function onClick(){setFullTextReply(!fullTextReply);},children:!fullTextReply?\"Читать дальше\":\"Скрыть\"})]})]}):\"\",(chosenGroup===null||chosenGroup===void 0?void 0:chosenGroup.id)==(group===null||group===void 0?void 0:group.id)&&!comment.reply?/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-reply-btn\",onClick:function onClick(e){setTextReply(e.target.id);handleBlockComment();},id:messagesIdMass.length>1?messagesIdMass[index]:undefined,children:\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044C\"}):(chosenGroup===null||chosenGroup===void 0?void 0:chosenGroup.id)==(group===null||group===void 0?void 0:group.id)&&comment.reply&&/*#__PURE__*/_jsx(\"div\",{className:\"comments__item-reply-btn change\",onClick:function onClick(e){setTextReply(e.target.id);handleBlockComment();setEditText(comment.reply);},id:messagesIdMass.length>1?messagesIdMass[index]:undefined,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043E\\u0442\\u0432\\u0435\\u0442\"})]},index);}export default CommentsItem;","map":{"version":3,"names":["VerificationStar","InactiveStarSmall","ActiveStarSmall","Rating","useState","CommentsItem","index","comment","group","setTextReply","handleBlockComment","messagesIdMass","chosenGroup","setEditText","fullText","setFullText","fullTextReply","setFullTextReply","months","getDate","date","newDate","Date","getMonth","displayPhoto","displayName","rating","createdAt","seconds","text","length","slice","reply","photo_50","screen_name","id","e","target","undefined"],"sources":["C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/src/panels/Comments/components/CommentsItem.js"],"sourcesContent":["import VerificationStar from \"img/verificationStar.svg\";\r\nimport InactiveStarSmall from \"components/InactiveStarSmall\";\r\nimport ActiveStarSmall from \"components/ActiveStarSmall\";\r\nimport { Rating } from \"react-simple-star-rating\";\r\nimport { useState } from \"react\";\r\n\r\nfunction CommentsItem({\r\n  index,\r\n  comment,\r\n  group,\r\n  setTextReply,\r\n  handleBlockComment,\r\n  messagesIdMass,\r\n  chosenGroup,\r\n  setEditText,\r\n}) {\r\n  const [fullText, setFullText] = useState(false);\r\n  const [fullTextReply, setFullTextReply] = useState(false);\r\n\r\n  let months = [\r\n    \"Января\",\r\n    \"Февраля\",\r\n    \"Марта\",\r\n    \"Апреля\",\r\n    \"Мая\",\r\n    \"Июня\",\r\n    \"Июля\",\r\n    \"Августа\",\r\n    \"Сентября\",\r\n    \"Октября\",\r\n    \"Ноября\",\r\n    \"Декабря\",\r\n  ];\r\n\r\n  const getDate = (date) => {\r\n    let newDate = new Date(date * 1000);\r\n    return newDate.getDate() + \" \" + months[newDate.getMonth()];\r\n  };\r\n\r\n  return (\r\n    <div className=\"comments__item-wrap\" key={index}>\r\n      <div className=\"comments__item\">\r\n        <div className=\"comments__item-avatar\">\r\n          <img\r\n            src={comment.displayPhoto}\r\n            className=\"comments__item-avatar-img\"\r\n          />\r\n        </div>\r\n        <div className=\"comments__item-other\">\r\n          <div className=\"comments__item-name\">{comment.displayName}</div>\r\n          <div className=\"comments__item-dateAndRate\">\r\n            <Rating\r\n              size={16}\r\n              readonly\r\n              initialValue={comment.rating}\r\n              emptyIcon={<InactiveStarSmall />}\r\n              fillIcon={<ActiveStarSmall color={comment?.rating} />}\r\n            />\r\n            <div className=\"comments__item-date\">\r\n              {getDate(comment.createdAt?.seconds)}\r\n            </div>\r\n          </div>\r\n          <div className=\"comments__item-text\">\r\n            {fullText || comment.text.length < 350\r\n              ? comment.text\r\n              : comment.text.slice(0, 350) + \"...\"}\r\n          </div>\r\n          {comment.text.length > 350 && (\r\n            <div\r\n              className=\"comments__item-text-more\"\r\n              onClick={() => {\r\n                setFullText(!fullText);\r\n              }}\r\n            >\r\n              {!fullText ? \"Читать дальше\" : \"Скрыть\"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {comment.reply ? (\r\n        <div className=\"comments__item-reply-wrap\">\r\n          <img className=\"comments__item-reply-avatar\" src={group?.photo_50} />\r\n          <div className=\"comments__item-reply\">\r\n            <div className=\"comments__item-reply-title\">\r\n              <div className=\"comments__item-title-text\">\r\n                {\"Ответ \" + group?.screen_name}\r\n              </div>\r\n              <img\r\n                src={VerificationStar}\r\n                className=\"comments__item-reply-title-img\"\r\n              />\r\n            </div>\r\n            <div className=\"comments__item-reply-text\">\r\n              {fullTextReply || comment.reply.length < 200\r\n                ? comment.reply\r\n                : comment.reply.slice(0, 200) + \"...\"}\r\n            </div>\r\n            {comment.reply.length > 200 && (\r\n              <div\r\n                className=\"comments__item-text-more\"\r\n                onClick={() => {\r\n                  setFullTextReply(!fullTextReply);\r\n                }}\r\n              >\r\n                {!fullTextReply ? \"Читать дальше\" : \"Скрыть\"}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {chosenGroup?.id == group?.id && !comment.reply ? (\r\n        <div\r\n          className=\"comments__item-reply-btn\"\r\n          onClick={(e) => {\r\n            setTextReply(e.target.id);\r\n            handleBlockComment();\r\n          }}\r\n          id={messagesIdMass.length > 1 ? messagesIdMass[index] : undefined}\r\n        >\r\n          Ответить\r\n        </div>\r\n      ) : (\r\n        chosenGroup?.id == group?.id &&\r\n        comment.reply && (\r\n          <div\r\n            className=\"comments__item-reply-btn change\"\r\n            onClick={(e) => {\r\n              setTextReply(e.target.id);\r\n              handleBlockComment();\r\n              setEditText(comment.reply);\r\n            }}\r\n            id={messagesIdMass.length > 1 ? messagesIdMass[index] : undefined}\r\n          >\r\n            Изменить ответ\r\n          </div>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default CommentsItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}