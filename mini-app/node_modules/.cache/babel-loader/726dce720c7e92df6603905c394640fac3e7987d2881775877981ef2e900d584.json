{"ast":null,"code":"import _objectSpread from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import bridge from\"@vkontakte/vk-bridge\";import{View,AdaptivityProvider,AppRoot,ConfigProvider,SplitLayout,SplitCol,Panel,Group,CellButton,PanelHeader,Placeholder,Div,Platform}from\"@vkontakte/vkui\";import\"@vkontakte/vkui/dist/vkui.css\";import Home from\"./panels/Home\";import Offers from\"./panels/Offers\";import Comments from\"./panels/Comments\";import Membership from\"./panels/Membership\";import cardLogoZaimer from\"img/zaimer.png\";import cardLogoMoneyMan from\"img/moneyman.jpg\";import cardLogoWebBankir from\"img/webbankir-logo.jpg\";import{useCollectionData}from\"react-firebase-hooks/firestore\";import{Context}from\".\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){// const [activePanel, setActivePanel] = useState(\"home\");\nvar _useState=useState([50000]),_useState2=_slicedToArray(_useState,2),rngValue=_useState2[0],setRngValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),currentGroup=_useState6[0],setCurrentGroup=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),activeOrganization=_useState8[0],setActiveOrganization=_useState8[1];var _useState9=useState(\"home\"),_useState10=_slicedToArray(_useState9,2),activePanel=_useState10[0],setActivePanel=_useState10[1];// Ставим начальную панель\nvar _useState11=useState([\"home\"]),_useState12=_slicedToArray(_useState11,2),history=_useState12[0],setHistory=_useState12[1];// Заносим начальную панель в массив историй.\nvar isFirst=history.length===1;var _useState13=useState({userRights:false}),_useState14=_slicedToArray(_useState13,2),adminInfo=_useState14[0],setAdminInfo=_useState14[1];var _useContext=useContext(Context),firestore=_useContext.firestore;var groupsReviews=[];var groups=[{id:129542706,imgSrc:cardLogoZaimer,actionSrc:\"https://www.zaymer.ru/\"},{id:55652521,imgSrc:cardLogoMoneyMan,actionSrc:\"https://moneyman.ru/\"},{id:42172377,imgSrc:cardLogoWebBankir,actionSrc:\"https://webbankir.com/\"},{id:139111941,imgSrc:\"\",actionSrc:\"\"}];// Price change function\nvar handleSumChange=function handleSumChange(rngValue){setRngValue(+rngValue);};// Initialization of all reviews, for further processing\nvar initReviews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(i=0;i<groups.length;i++){groupsReviews.push(useCollectionData(firestore.collection(groups[i].id+\"\")));}case 1:case\"end\":return _context.stop();}}},_callee);}));return function initReviews(){return _ref.apply(this,arguments);};}();initReviews();// Adding fields to groups, average rating and total number of reviews\nvar createRate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var i,_groupsReviews$i$,summ,j,_groupsReviews$i$2,_groupsReviews$i$0$j,_groupsReviews$i,_groupsReviews$i2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:for(i=0;i<(groupsReviews===null||groupsReviews===void 0?void 0:groupsReviews.length);i++){summ=0;groups[i].reviewsCount=(_groupsReviews$i$=groupsReviews[i][0])===null||_groupsReviews$i$===void 0?void 0:_groupsReviews$i$.length;for(j=0;j<((_groupsReviews$i$2=groupsReviews[i][0])===null||_groupsReviews$i$2===void 0?void 0:_groupsReviews$i$2.length);j++){summ+=(_groupsReviews$i$0$j=groupsReviews[i][0][j])===null||_groupsReviews$i$0$j===void 0?void 0:_groupsReviews$i$0$j.rating;if(j==((_groupsReviews$i=groupsReviews[i])===null||_groupsReviews$i===void 0?void 0:_groupsReviews$i.length)-1){groups[i].averageRating=(summ/((_groupsReviews$i2=groupsReviews[i])===null||_groupsReviews$i2===void 0?void 0:_groupsReviews$i2.length)).toFixed(1);}}}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createRate(){return _ref2.apply(this,arguments);};}();createRate();// useEffect(() => {\n//   bridge\n//     .send(\"VKWebAppSetSwipeSettings\", {\n//       history: isFirst,\n//     })\n//     .then((data) => {\n//       if (data.result) {\n//         // Настройка применилась\n//       }\n//     })\n//     .catch((error) => {\n//       // Ошибка\n//       console.log(error);\n//     });\n// }, [isFirst]);\n// User initialization\nuseEffect(function(){function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var user;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return bridge.send(\"VKWebAppGetUserInfo\").then(function(data){if(data.id){setUser(data);}});case 2:user=_context3.sent;case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchUser.apply(this,arguments);}fetchUser();},[]);// Finding group admin rights for a user\nuseEffect(function(){if(adminInfo.userRights){var fetchGroup=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var token,userGroup,adminsGroups,i,j;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return bridge.send(\"VKWebAppGetAuthToken\",{app_id:51435408,scope:\"groups\"});case 2:token=_context4.sent;_context4.next=5;return bridge.send(\"VKWebAppCallAPIMethod\",{method:\"groups.get\",request_id:\"getGroups\",params:{filter:\"admin\",extended:\"1\",fields:\"is_admin\",v:\"5.131\",access_token:token.access_token}});case 5:userGroup=_context4.sent;adminsGroups=[];for(i=0;i<userGroup.response.items.length;i++){for(j=0;j<groups.length;j++){if(userGroup.response.items[i].id==groups[j].id){adminsGroups.push(userGroup.response.items[i]);}}}if(adminsGroups.length>=1){setAdminInfo(_objectSpread(_objectSpread({},adminInfo),{},{trueUser:true,adminsGroups:adminsGroups}));}else{setAdminInfo(_objectSpread(_objectSpread({},adminInfo),{},{trueUser:false}));}case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchGroup(){return _ref3.apply(this,arguments);};}();fetchGroup();}},[adminInfo.userRights]);// Group initialization\nuseEffect(function(){function fetchGroupInfo(){return _fetchGroupInfo.apply(this,arguments);}function _fetchGroupInfo(){_fetchGroupInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var groups;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return bridge.send(\"VKWebAppGetGroupInfo\",{group_id:+activeOrganization}).then(function(data){if(data.id){setCurrentGroup(data);}}).catch(function(error){console.log(error);});case 2:groups=_context5.sent;case 3:case\"end\":return _context5.stop();}}},_callee5);}));return _fetchGroupInfo.apply(this,arguments);}if(activeOrganization){fetchGroupInfo();}},[activeOrganization]);// Page navigation function\n// const go = (e) => {\n//   if (e.target.id) {\n//     setActiveOrganization(e.target.id);\n//   }\n//   if (e.currentTarget.dataset.page === \"comments\") {\n//     setActiveOrganization(null);\n//     setCurrentGroup(null);\n//   }\n//   if (e.currentTarget.dataset.page === \"membership\") {\n//     setActiveOrganization(adminInfo?.chosenGroup.id);\n//   }\n//   setActivePanel(e.currentTarget.dataset.to);\n// };\nvar goBack=function goBack(){if(history[history.length-1]===\"comments\"){setActiveOrganization(null);setCurrentGroup(null);}if(history.length===1){// Если в массиве одно значение:\n// bridge.send(\"VKWebAppClose\", { status: \"success\" }); // Отправляем bridge на закрытие сервиса.\n}else if(history.length>1){// Если в массиве больше одного значения:\nhistory.pop();// удаляем последний элемент в массиве.\nsetActivePanel(history[history.length-1]);// Изменяем массив с иторией и меняем активную панель.\n}};function goToPage(name,group){if(history[history.length-1]==\"membership\"){setActiveOrganization(adminInfo===null||adminInfo===void 0?void 0:adminInfo.chosenGroup.id);}if(group){setActiveOrganization(group===null||group===void 0?void 0:group.id);}// В качестве аргумента принимаем id панели для перехода\nwindow.history.pushState({panel:name},name);// Создаём новую запись в истории браузера\nsetActivePanel(name);// Меняем активную панель\nhistory.push(name);// Добавляем панель в историю\n}useEffect(function(){window.addEventListener(\"popstate\",function(){return goBack();});},[]);return/*#__PURE__*/_jsx(ConfigProvider,{isWebView:true,children:/*#__PURE__*/_jsx(AdaptivityProvider,{children:/*#__PURE__*/_jsx(AppRoot,{children:/*#__PURE__*/_jsx(SplitLayout,{children:/*#__PURE__*/_jsx(SplitCol,{children:/*#__PURE__*/_jsxs(View,{activePanel:activePanel,history:history,onSwipeBack:goBack,children:[/*#__PURE__*/_jsx(Home,{id:\"home\",goToPage:goToPage,onChange:handleSumChange,rngValue:rngValue}),/*#__PURE__*/_jsx(Offers,{id:\"offers\",goToPage:goToPage,rngValue:rngValue,groups:groups}),/*#__PURE__*/_jsx(Comments,{id:\"comments\",goToPage:goToPage,user:user,currentGroup:currentGroup,groups:groups,setActiveOrganization:setActiveOrganization,chosenGroup:adminInfo===null||adminInfo===void 0?void 0:adminInfo.chosenGroup}),/*#__PURE__*/_jsx(Membership,{id:\"membership\",goToPage:goToPage,setAdminInfo:setAdminInfo,adminInfo:adminInfo})]})})})})})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useContext","bridge","View","AdaptivityProvider","AppRoot","ConfigProvider","SplitLayout","SplitCol","Panel","Group","CellButton","PanelHeader","Placeholder","Div","Platform","Home","Offers","Comments","Membership","cardLogoZaimer","cardLogoMoneyMan","cardLogoWebBankir","useCollectionData","Context","App","rngValue","setRngValue","user","setUser","currentGroup","setCurrentGroup","activeOrganization","setActiveOrganization","activePanel","setActivePanel","history","setHistory","isFirst","length","userRights","adminInfo","setAdminInfo","firestore","groupsReviews","groups","id","imgSrc","actionSrc","handleSumChange","initReviews","i","push","collection","createRate","summ","reviewsCount","j","rating","averageRating","toFixed","fetchUser","send","then","data","fetchGroup","app_id","scope","token","method","request_id","params","filter","extended","fields","v","access_token","userGroup","adminsGroups","response","items","trueUser","fetchGroupInfo","group_id","catch","error","console","log","goBack","pop","goToPage","name","group","chosenGroup","window","pushState","panel","addEventListener"],"sources":["C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport {\n  View,\n  AdaptivityProvider,\n  AppRoot,\n  ConfigProvider,\n  SplitLayout,\n  SplitCol,\n  Panel,\n  Group,\n  CellButton,\n  PanelHeader,\n  Placeholder,\n  Div,\n  Platform,\n} from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport Home from \"./panels/Home\";\nimport Offers from \"./panels/Offers\";\nimport Comments from \"./panels/Comments\";\nimport Membership from \"./panels/Membership\";\n\nimport cardLogoZaimer from \"img/zaimer.png\";\nimport cardLogoMoneyMan from \"img/moneyman.jpg\";\nimport cardLogoWebBankir from \"img/webbankir-logo.jpg\";\n\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport { Context } from \".\";\n\nconst App = () => {\n  // const [activePanel, setActivePanel] = useState(\"home\");\n\n  const [rngValue, setRngValue] = useState([50000]);\n  const [user, setUser] = useState([]);\n  const [currentGroup, setCurrentGroup] = useState(null);\n  const [activeOrganization, setActiveOrganization] = useState();\n\n  const [activePanel, setActivePanel] = useState(\"home\"); // Ставим начальную панель\n  const [history, setHistory] = useState([\"home\"]); // Заносим начальную панель в массив историй.\n  const isFirst = history.length === 1;\n\n  const [adminInfo, setAdminInfo] = useState({ userRights: false });\n\n  const { firestore } = useContext(Context);\n\n  const groupsReviews = [];\n  const groups = [\n    {\n      id: 129542706,\n      imgSrc: cardLogoZaimer,\n      actionSrc: \"https://www.zaymer.ru/\",\n    },\n    {\n      id: 55652521,\n      imgSrc: cardLogoMoneyMan,\n      actionSrc: \"https://moneyman.ru/\",\n    },\n    {\n      id: 42172377,\n      imgSrc: cardLogoWebBankir,\n      actionSrc: \"https://webbankir.com/\",\n    },\n    {\n      id: 139111941,\n      imgSrc: \"\",\n      actionSrc: \"\",\n    },\n  ];\n\n  // Price change function\n  const handleSumChange = (rngValue) => {\n    setRngValue(+rngValue);\n  };\n\n  // Initialization of all reviews, for further processing\n  const initReviews = async () => {\n    for (let i = 0; i < groups.length; i++) {\n      groupsReviews.push(\n        useCollectionData(firestore.collection(groups[i].id + \"\"))\n      );\n    }\n  };\n  initReviews();\n\n  // Adding fields to groups, average rating and total number of reviews\n  const createRate = async () => {\n    for (let i = 0; i < groupsReviews?.length; i++) {\n      let summ = 0;\n      groups[i].reviewsCount = groupsReviews[i][0]?.length;\n      for (let j = 0; j < groupsReviews[i][0]?.length; j++) {\n        summ += groupsReviews[i][0][j]?.rating;\n        if (j == groupsReviews[i]?.length - 1) {\n          groups[i].averageRating = (summ / groupsReviews[i]?.length).toFixed(\n            1\n          );\n        }\n      }\n    }\n  };\n  createRate();\n\n  // useEffect(() => {\n  //   bridge\n  //     .send(\"VKWebAppSetSwipeSettings\", {\n  //       history: isFirst,\n  //     })\n  //     .then((data) => {\n  //       if (data.result) {\n  //         // Настройка применилась\n  //       }\n  //     })\n  //     .catch((error) => {\n  //       // Ошибка\n  //       console.log(error);\n  //     });\n  // }, [isFirst]);\n\n  // User initialization\n  useEffect(() => {\n    async function fetchUser() {\n      const user = await bridge.send(\"VKWebAppGetUserInfo\").then((data) => {\n        if (data.id) {\n          setUser(data);\n        }\n      });\n    }\n    fetchUser();\n  }, []);\n\n  // Finding group admin rights for a user\n  useEffect(() => {\n    if (adminInfo.userRights) {\n      async function fetchGroup() {\n        const token = await bridge.send(\"VKWebAppGetAuthToken\", {\n          app_id: 51435408,\n          scope: \"groups\",\n        });\n        const userGroup = await bridge.send(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.get\",\n          request_id: \"getGroups\",\n          params: {\n            filter: \"admin\",\n            extended: \"1\",\n            fields: \"is_admin\",\n            v: \"5.131\",\n            access_token: token.access_token,\n          },\n        });\n        let adminsGroups = [];\n\n        for (let i = 0; i < userGroup.response.items.length; i++) {\n          for (let j = 0; j < groups.length; j++) {\n            if (userGroup.response.items[i].id == groups[j].id) {\n              adminsGroups.push(userGroup.response.items[i]);\n            }\n          }\n        }\n        if (adminsGroups.length >= 1) {\n          setAdminInfo({\n            ...adminInfo,\n            trueUser: true,\n            adminsGroups: adminsGroups,\n          });\n        } else {\n          setAdminInfo({ ...adminInfo, trueUser: false });\n        }\n      }\n      fetchGroup();\n    }\n  }, [adminInfo.userRights]);\n\n  // Group initialization\n  useEffect(() => {\n    async function fetchGroupInfo() {\n      const groups = await bridge\n        .send(\"VKWebAppGetGroupInfo\", {\n          group_id: +activeOrganization,\n        })\n        .then((data) => {\n          if (data.id) {\n            setCurrentGroup(data);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    if (activeOrganization) {\n      fetchGroupInfo();\n    }\n  }, [activeOrganization]);\n\n  // Page navigation function\n  // const go = (e) => {\n  //   if (e.target.id) {\n  //     setActiveOrganization(e.target.id);\n  //   }\n\n  //   if (e.currentTarget.dataset.page === \"comments\") {\n  //     setActiveOrganization(null);\n  //     setCurrentGroup(null);\n  //   }\n  //   if (e.currentTarget.dataset.page === \"membership\") {\n  //     setActiveOrganization(adminInfo?.chosenGroup.id);\n  //   }\n  //   setActivePanel(e.currentTarget.dataset.to);\n  // };\n\n  const goBack = () => {\n    if (history[history.length - 1] === \"comments\") {\n      setActiveOrganization(null);\n      setCurrentGroup(null);\n    }\n    if (history.length === 1) {\n      // Если в массиве одно значение:\n      // bridge.send(\"VKWebAppClose\", { status: \"success\" }); // Отправляем bridge на закрытие сервиса.\n    } else if (history.length > 1) {\n      // Если в массиве больше одного значения:\n      history.pop(); // удаляем последний элемент в массиве.\n      setActivePanel(history[history.length - 1]); // Изменяем массив с иторией и меняем активную панель.\n    }\n  };\n\n  function goToPage(name, group) {\n    if (history[history.length - 1] == \"membership\") {\n      setActiveOrganization(adminInfo?.chosenGroup.id);\n    }\n    if (group) {\n      setActiveOrganization(group?.id);\n    }\n    // В качестве аргумента принимаем id панели для перехода\n    window.history.pushState({ panel: name }, name); // Создаём новую запись в истории браузера\n    setActivePanel(name); // Меняем активную панель\n    history.push(name); // Добавляем панель в историю\n  }\n\n  useEffect(() => {\n    window.addEventListener(\"popstate\", () => goBack());\n  }, []);\n\n  return (\n    <ConfigProvider isWebView={true}>\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout>\n            <SplitCol>\n              <View\n                activePanel={activePanel}\n                history={history}\n                onSwipeBack={goBack}\n              >\n                <Home\n                  id=\"home\"\n                  goToPage={goToPage}\n                  onChange={handleSumChange}\n                  rngValue={rngValue}\n                />\n                <Offers\n                  id=\"offers\"\n                  goToPage={goToPage}\n                  rngValue={rngValue}\n                  groups={groups}\n                />\n                <Comments\n                  id=\"comments\"\n                  goToPage={goToPage}\n                  user={user}\n                  currentGroup={currentGroup}\n                  groups={groups}\n                  setActiveOrganization={setActiveOrganization}\n                  chosenGroup={adminInfo?.chosenGroup}\n                />\n                <Membership\n                  id=\"membership\"\n                  goToPage={goToPage}\n                  setAdminInfo={setAdminInfo}\n                  adminInfo={adminInfo}\n                />\n              </View>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}