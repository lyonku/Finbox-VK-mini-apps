{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zpili\\\\Desktop\\\\Finbox-VK-mini-apps\\\\mini-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot, ConfigProvider, SplitLayout, SplitCol } from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport Home from \"./panels/Home\";\nimport Offers from \"./panels/Offers\";\nimport Comments from \"./panels/Comments\";\nimport Membership from \"./panels/Membership\";\n\n// import firebase from \"firebase/compat/app\";\n\nimport \"firebase/compat/firestore\";\nimport { initializeApp } from \"firebase/app\";\n\n// Initialize Firebase\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyB-XLGtb7YKiz_rhd02eveZ5NZgaTzHneg\",\n  authDomain: \"smartmoneyreviews-97c4b.firebaseapp.com\",\n  databaseURL: \"https://smartmoneyreviews-97c4b-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"smartmoneyreviews-97c4b\",\n  storageBucket: \"smartmoneyreviews-97c4b.appspot.com\",\n  messagingSenderId: \"549540052009\",\n  appId: \"1:549540052009:web:a979e9efcf8e4514e2f038\",\n  measurementId: \"G-9WYPLHHEJE\"\n});\nconst firestore = firebase.firestore();\nconst App = () => {\n  _s();\n  const [scheme, setScheme] = useState(\"bright_light\");\n  const [activePanel, setActivePanel] = useState(\"home\");\n  const [rngValue, setRngValue] = useState([50000]);\n  const [user, setUser] = useState([]);\n  const [group, setGroup] = useState();\n  const [checkUser, setCheckUser] = useState(false);\n  const [trueUser, setTrueUser] = useState();\n  const [activeOrganization, setActiveOrganization] = useState();\n  const [adminsGroup, setAdminsGroup] = useState([]);\n  let comments = [];\n  const members = [139111941, 217184645, 129542706, 55652521, 42172377];\n  const handleSumChange = rngValue => {\n    setRngValue(+rngValue);\n  };\n  useEffect(() => {\n    bridge.subscribe(_ref => {\n      let {\n        detail: {\n          type,\n          data\n        }\n      } = _ref;\n      if (type === \"VKWebAppUpdateConfig\") {\n        setScheme(data.scheme);\n      }\n    });\n    async function fetchUser() {\n      const user = await bridge.send(\"VKWebAppGetUserInfo\").then(data => {\n        if (data.id) {\n          setUser(data);\n        }\n      });\n    }\n    fetchUser();\n    async function fetchGroupInfo() {\n      const group = await bridge.send(\"VKWebAppGetGroupInfo\", {\n        group_id: +activeOrganization\n      }).then(data => {\n        if (data.id) {\n          setGroup(data);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    fetchGroupInfo();\n    if (checkUser) {\n      async function fetchUser() {\n        const token = await bridge.send(\"VKWebAppGetAuthToken\", {\n          app_id: 51435408,\n          scope: \"groups\"\n        });\n        const userGroup = await bridge.send(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.get\",\n          request_id: \"getGroups\",\n          params: {\n            filter: \"admin\",\n            extended: \"1\",\n            fields: \"is_admin\",\n            v: \"5.131\",\n            access_token: token.access_token\n          }\n        });\n        let adminsGroups = [];\n        for (let i = 0; i < userGroup.response.items.length; i++) {\n          for (let j = 0; j < members.length; j++) {\n            if (userGroup.response.items[i].id == members[j]) {\n              adminsGroups.push(userGroup.response.items[i]);\n            }\n          }\n        }\n        if (adminsGroups.length >= 1) {\n          setTrueUser(true);\n          setAdminsGroup(adminsGroups);\n        } else {\n          setTrueUser(false);\n        }\n      }\n      fetchUser();\n    }\n  }, [activeOrganization, checkUser]);\n  const go = e => {\n    if (e.target.id) {\n      setActiveOrganization(e.target.id);\n    }\n    setActivePanel(e.currentTarget.dataset.to);\n  };\n  return /*#__PURE__*/_jsxDEV(ConfigProvider, {\n    scheme: scheme,\n    children: /*#__PURE__*/_jsxDEV(AdaptivityProvider, {\n      children: /*#__PURE__*/_jsxDEV(AppRoot, {\n        children: /*#__PURE__*/_jsxDEV(SplitLayout, {\n          children: /*#__PURE__*/_jsxDEV(SplitCol, {\n            children: /*#__PURE__*/_jsxDEV(View, {\n              activePanel: activePanel,\n              children: [/*#__PURE__*/_jsxDEV(Home, {\n                id: \"home\",\n                go: go,\n                onChange: handleSumChange,\n                rngValue: rngValue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Offers, {\n                id: \"offers\",\n                go: go,\n                rngValue: rngValue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Comments, {\n                id: \"comments\",\n                go: go,\n                comments: comments,\n                user: user,\n                group: group\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Membership, {\n                id: \"membership\",\n                go: go,\n                setCheckUser: setCheckUser,\n                trueUser: trueUser,\n                adminsGroup: adminsGroup\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"ydklQY00UN+KjS5Xe7QfYJnSsc0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","bridge","View","ScreenSpinner","AdaptivityProvider","AppRoot","ConfigProvider","SplitLayout","SplitCol","Home","Offers","Comments","Membership","initializeApp","firebaseApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","firebase","App","scheme","setScheme","activePanel","setActivePanel","rngValue","setRngValue","user","setUser","group","setGroup","checkUser","setCheckUser","trueUser","setTrueUser","activeOrganization","setActiveOrganization","adminsGroup","setAdminsGroup","comments","members","handleSumChange","subscribe","detail","type","data","fetchUser","send","then","id","fetchGroupInfo","group_id","catch","error","console","log","token","app_id","scope","userGroup","method","request_id","params","filter","extended","fields","v","access_token","adminsGroups","i","response","items","length","j","push","go","e","target","currentTarget","dataset","to"],"sources":["C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport {\n  View,\n  ScreenSpinner,\n  AdaptivityProvider,\n  AppRoot,\n  ConfigProvider,\n  SplitLayout,\n  SplitCol,\n} from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport Home from \"./panels/Home\";\nimport Offers from \"./panels/Offers\";\nimport Comments from \"./panels/Comments\";\nimport Membership from \"./panels/Membership\";\n\n// import firebase from \"firebase/compat/app\";\n\nimport \"firebase/compat/firestore\";\nimport { initializeApp } from \"firebase/app\";\n\n// Initialize Firebase\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyB-XLGtb7YKiz_rhd02eveZ5NZgaTzHneg\",\n  authDomain: \"smartmoneyreviews-97c4b.firebaseapp.com\",\n  databaseURL:\n    \"https://smartmoneyreviews-97c4b-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"smartmoneyreviews-97c4b\",\n  storageBucket: \"smartmoneyreviews-97c4b.appspot.com\",\n  messagingSenderId: \"549540052009\",\n  appId: \"1:549540052009:web:a979e9efcf8e4514e2f038\",\n  measurementId: \"G-9WYPLHHEJE\",\n});\nconst firestore = firebase.firestore();\n\nconst App = () => {\n  const [scheme, setScheme] = useState(\"bright_light\");\n  const [activePanel, setActivePanel] = useState(\"home\");\n  const [rngValue, setRngValue] = useState([50000]);\n  const [user, setUser] = useState([]);\n  const [group, setGroup] = useState();\n  const [checkUser, setCheckUser] = useState(false);\n  const [trueUser, setTrueUser] = useState();\n  const [activeOrganization, setActiveOrganization] = useState();\n  const [adminsGroup, setAdminsGroup] = useState([]);\n  let comments = [];\n  const members = [139111941, 217184645, 129542706, 55652521, 42172377];\n\n  const handleSumChange = (rngValue) => {\n    setRngValue(+rngValue);\n  };\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === \"VKWebAppUpdateConfig\") {\n        setScheme(data.scheme);\n      }\n    });\n\n    async function fetchUser() {\n      const user = await bridge.send(\"VKWebAppGetUserInfo\").then((data) => {\n        if (data.id) {\n          setUser(data);\n        }\n      });\n    }\n    fetchUser();\n\n    async function fetchGroupInfo() {\n      const group = await bridge\n        .send(\"VKWebAppGetGroupInfo\", {\n          group_id: +activeOrganization,\n        })\n        .then((data) => {\n          if (data.id) {\n            setGroup(data);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    fetchGroupInfo();\n\n    if (checkUser) {\n      async function fetchUser() {\n        const token = await bridge.send(\"VKWebAppGetAuthToken\", {\n          app_id: 51435408,\n          scope: \"groups\",\n        });\n        const userGroup = await bridge.send(\"VKWebAppCallAPIMethod\", {\n          method: \"groups.get\",\n          request_id: \"getGroups\",\n          params: {\n            filter: \"admin\",\n            extended: \"1\",\n            fields: \"is_admin\",\n            v: \"5.131\",\n            access_token: token.access_token,\n          },\n        });\n        let adminsGroups = [];\n\n        for (let i = 0; i < userGroup.response.items.length; i++) {\n          for (let j = 0; j < members.length; j++) {\n            if (userGroup.response.items[i].id == members[j]) {\n              adminsGroups.push(userGroup.response.items[i]);\n            }\n          }\n        }\n        if (adminsGroups.length >= 1) {\n          setTrueUser(true);\n          setAdminsGroup(adminsGroups);\n        } else {\n          setTrueUser(false);\n        }\n      }\n      fetchUser();\n    }\n  }, [activeOrganization, checkUser]);\n\n  const go = (e) => {\n    if (e.target.id) {\n      setActiveOrganization(e.target.id);\n    }\n    setActivePanel(e.currentTarget.dataset.to);\n  };\n\n  return (\n    <ConfigProvider scheme={scheme}>\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout>\n            <SplitCol>\n              <View activePanel={activePanel}>\n                <Home\n                  id=\"home\"\n                  go={go}\n                  onChange={handleSumChange}\n                  rngValue={rngValue}\n                />\n                <Offers id=\"offers\" go={go} rngValue={rngValue} />\n                <Comments\n                  id=\"comments\"\n                  go={go}\n                  comments={comments}\n                  user={user}\n                  group={group}\n                />\n                <Membership\n                  id=\"membership\"\n                  go={go}\n                  setCheckUser={setCheckUser}\n                  trueUser={trueUser}\n                  adminsGroup={adminsGroup}\n                />\n              </View>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}