{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"actions\", \"actionsLayout\", \"children\", \"className\", \"style\", \"platform\", \"viewWidth\", \"text\", \"header\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport Tappable from \"../Tappable/Tappable\";\nimport { PopoutWrapper } from \"../PopoutWrapper/PopoutWrapper\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { transitionEvent } from \"../../lib/supportEvents\";\nimport { ANDROID, VKCOM, IOS } from \"../../lib/platform\";\nimport { withPlatform } from \"../../hoc/withPlatform\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport Button from \"../Button/Button\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport Headline from \"../Typography/Headline/Headline\";\nimport Title from \"../Typography/Title/Title\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport ModalDismissButton from \"../ModalDismissButton/ModalDismissButton\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap\";\nvar AlertComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(AlertComponent, _React$Component);\n  var _super = _createSuper(AlertComponent);\n  function AlertComponent(props) {\n    var _this;\n    _classCallCheck(this, AlertComponent);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"element\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"transitionFinishTimeout\", undefined);\n    _defineProperty(_assertThisInitialized(_this), \"onItemClick\", function (item) {\n      return function () {\n        var action = item.action,\n          autoclose = item.autoclose;\n        if (autoclose) {\n          _this.setState({\n            closing: true\n          });\n          _this.waitTransitionFinish(function (e) {\n            if (!e || e.propertyName === \"opacity\") {\n              var _this$props$onClose, _this$props;\n              autoclose && ((_this$props$onClose = (_this$props = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props));\n              action && action();\n            }\n          });\n        } else {\n          action && action();\n        }\n      };\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onClose\", function () {\n      _this.setState({\n        closing: true\n      });\n      _this.waitTransitionFinish(function (e) {\n        if (!e || e.propertyName === \"opacity\") {\n          var _this$props$onClose2, _this$props2;\n          (_this$props$onClose2 = (_this$props2 = _this.props).onClose) === null || _this$props$onClose2 === void 0 ? void 0 : _this$props$onClose2.call(_this$props2);\n        }\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"stopPropagation\", function (e) {\n      e.stopPropagation();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"renderAction\", function (action, i) {\n      var platform = _this.props.platform;\n      if (platform === IOS) {\n        var _action$Component = action.Component,\n          Component = _action$Component === void 0 ? \"button\" : _action$Component;\n        return createScopedElement(Tappable, {\n          Component: action.href ? \"a\" : Component,\n          vkuiClass: classNames(\"Alert__action\", \"Alert__action--\".concat(action.mode)),\n          onClick: _this.onItemClick(action),\n          href: action.href,\n          key: \"alert-action-\".concat(i),\n          target: action.target\n        }, action.title);\n      }\n      var mode = action.mode === \"cancel\" ? \"secondary\" : \"primary\";\n      if (platform === ANDROID) {\n        mode = \"tertiary\";\n        if (_this.props.viewWidth === ViewWidth.DESKTOP && action.mode === \"destructive\") {\n          mode = \"destructive\";\n        }\n      }\n      return createScopedElement(Button, {\n        vkuiClass: classNames(\"Alert__button\", \"Alert__button--\".concat(action.mode)),\n        mode: mode,\n        size: \"m\",\n        onClick: _this.onItemClick(action),\n        Component: action.Component,\n        href: action.href,\n        key: \"alert-action-\".concat(i),\n        target: action.target\n      }, action.title);\n    });\n    _this.element = /*#__PURE__*/React.createRef();\n    _this.state = {\n      closing: false\n    };\n    return _this;\n  }\n  _createClass(AlertComponent, [{\n    key: \"timeout\",\n    get: function get() {\n      return this.props.platform === ANDROID || this.props.platform === VKCOM ? 200 : 300;\n    }\n  }, {\n    key: \"waitTransitionFinish\",\n    value: function waitTransitionFinish(eventHandler) {\n      if (transitionEvent.supported && this.element.current) {\n        this.element.current.removeEventListener(transitionEvent.name, eventHandler);\n        this.element.current.addEventListener(transitionEvent.name, eventHandler);\n      } else {\n        if (this.transitionFinishTimeout) {\n          clearTimeout(this.transitionFinishTimeout);\n        }\n        this.transitionFinishTimeout = setTimeout(eventHandler.bind(this), this.timeout);\n      }\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader(header) {\n      switch (this.props.platform) {\n        case VKCOM:\n          return createScopedElement(Headline, {\n            vkuiClass: \"Alert__header\",\n            weight: \"medium\"\n          }, header);\n        case IOS:\n          return createScopedElement(Title, {\n            vkuiClass: \"Alert__header\",\n            weight: \"1\",\n            level: \"3\"\n          }, header);\n        case ANDROID:\n          return createScopedElement(Title, {\n            vkuiClass: \"Alert__header\",\n            weight: \"2\",\n            level: \"2\"\n          }, header);\n        default:\n          return undefined;\n      }\n    }\n  }, {\n    key: \"renderText\",\n    value: function renderText(text) {\n      switch (this.props.platform) {\n        case VKCOM:\n          return createScopedElement(Caption, {\n            vkuiClass: \"Alert__text\"\n          }, text);\n        case IOS:\n          return createScopedElement(Caption, {\n            vkuiClass: \"Alert__text\",\n            level: \"2\"\n          }, text);\n        case ANDROID:\n          return createScopedElement(Headline, {\n            vkuiClass: \"Alert__text\",\n            weight: \"regular\"\n          }, text);\n        default:\n          return undefined;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n        actions = _this$props3.actions,\n        actionsLayout = _this$props3.actionsLayout,\n        children = _this$props3.children,\n        className = _this$props3.className,\n        style = _this$props3.style,\n        platform = _this$props3.platform,\n        viewWidth = _this$props3.viewWidth,\n        text = _this$props3.text,\n        header = _this$props3.header,\n        restProps = _objectWithoutProperties(_this$props3, _excluded);\n      var closing = this.state.closing;\n      var resolvedActionsLayout = platform === VKCOM ? \"horizontal\" : actionsLayout;\n      var canShowCloseButton = platform === VKCOM || platform === ANDROID && viewWidth >= ViewWidth.SMALL_TABLET;\n      var isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n      return createScopedElement(PopoutWrapper, {\n        className: className,\n        closing: closing,\n        style: style,\n        onClick: this.onClose\n      }, createScopedElement(FocusTrap, _extends({}, restProps, {\n        getRootRef: this.element,\n        onClick: this.stopPropagation,\n        onClose: this.onClose,\n        timeout: this.timeout,\n        vkuiClass: classNames(getClassName(\"Alert\", platform), {\n          \"Alert--v\": resolvedActionsLayout === \"vertical\",\n          \"Alert--h\": resolvedActionsLayout === \"horizontal\",\n          \"Alert--closing\": closing,\n          \"Alert--desktop\": isDesktop\n        })\n      }), canShowCloseButton && createScopedElement(ModalDismissButton, {\n        onClick: this.onClose\n      }), createScopedElement(\"div\", {\n        vkuiClass: \"Alert__content\"\n      }, hasReactNode(header) && this.renderHeader(header), hasReactNode(text) && this.renderText(text), children), createScopedElement(\"footer\", {\n        vkuiClass: \"Alert__actions\"\n      }, actions === null || actions === void 0 ? void 0 : actions.map(this.renderAction))));\n    }\n  }]);\n  return AlertComponent;\n}(React.Component);\n_defineProperty(AlertComponent, \"defaultProps\", {\n  actionsLayout: \"horizontal\",\n  actions: []\n});\nexport var Alert = withPlatform(withAdaptivity(AlertComponent, {\n  viewWidth: true\n}));","map":{"version":3,"mappings":"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","names":["React","Tappable","PopoutWrapper","getClassName","classNames","transitionEvent","ANDROID","VKCOM","IOS","withPlatform","withAdaptivity","ViewWidth","Button","hasReactNode","Headline","Title","Caption","ModalDismissButton","FocusTrap","AlertComponent","props","_classCallCheck","_this","_defineProperty","undefined","item","action","autoclose","setState","closing","waitTransitionFinish","e","propertyName","onClose","_this$props$onClose","stopPropagation","i","platform","Component","createScopedElement","href","vkuiClass","mode","onClick","onItemClick","key","target","title","viewWidth","DESKTOP","size","element","createRef","state","eventHandler","supported","current","removeEventListener","name","addEventListener","transitionFinishTimeout","clearTimeout","setTimeout","bind","timeout","header","weight","level","text","actions","actionsLayout","children","className","style","restProps","resolvedActionsLayout","canShowCloseButton","SMALL_TABLET","isDesktop","getRootRef","renderHeader","renderText","map","renderAction","Alert"],"sources":["C:\\Users\\zpili\\Desktop\\Finbox-VK-mini-apps\\mini-app\\node_modules\\@vkontakte\\vkui\\src\\components\\Alert\\Alert.tsx"],"sourcesContent":["import * as React from \"react\";\nimport Tappable from \"../Tappable/Tappable\";\nimport { PopoutWrapper } from \"../PopoutWrapper/PopoutWrapper\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { transitionEvent } from \"../../lib/supportEvents\";\nimport { ANDROID, VKCOM, IOS } from \"../../lib/platform\";\nimport { HasPlatform } from \"../../types\";\nimport { withPlatform } from \"../../hoc/withPlatform\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport Button, { ButtonProps } from \"../Button/Button\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport Headline from \"../Typography/Headline/Headline\";\nimport Title from \"../Typography/Title/Title\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport ModalDismissButton from \"../ModalDismissButton/ModalDismissButton\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"./Alert.css\";\n\nexport type AlertActionInterface = AlertAction &\n  React.AnchorHTMLAttributes<HTMLElement>;\n\nexport interface AlertAction extends Pick<ButtonProps, \"Component\" | \"href\"> {\n  title: string;\n  action?: VoidFunction;\n  autoclose?: boolean;\n  mode: \"cancel\" | \"destructive\" | \"default\";\n}\n\nexport interface AlertProps\n  extends React.HTMLAttributes<HTMLElement>,\n    HasPlatform,\n    AdaptivityProps {\n  actionsLayout?: \"vertical\" | \"horizontal\";\n  actions?: AlertAction[];\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  onClose?: VoidFunction;\n}\n\nexport type TAlertProps = AlertProps & AdaptivityContextInterface;\n\nexport interface AlertState {\n  closing: boolean;\n}\n\ntype TransitionEndHandler = (e?: TransitionEvent) => void;\n\ntype ItemClickHander = (item: AlertActionInterface) => () => void;\n\nclass AlertComponent extends React.Component<TAlertProps, AlertState> {\n  constructor(props: TAlertProps) {\n    super(props);\n    this.element = React.createRef();\n    this.state = {\n      closing: false,\n    };\n  }\n\n  element: React.RefObject<HTMLDivElement>;\n\n  private transitionFinishTimeout: number | undefined = undefined;\n\n  static defaultProps: Partial<TAlertProps> = {\n    actionsLayout: \"horizontal\",\n    actions: [],\n  };\n\n  private get timeout(): number {\n    return this.props.platform === ANDROID || this.props.platform === VKCOM\n      ? 200\n      : 300;\n  }\n\n  onItemClick: ItemClickHander = (item: AlertActionInterface) => () => {\n    const { action, autoclose } = item;\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish((e?: TransitionEvent) => {\n        if (!e || e.propertyName === \"opacity\") {\n          autoclose && this.props.onClose?.();\n          action && action();\n        }\n      });\n    } else {\n      action && action();\n    }\n  };\n\n  onClose: VoidFunction = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish((e?: TransitionEvent) => {\n      if (!e || e.propertyName === \"opacity\") {\n        this.props.onClose?.();\n      }\n    });\n  };\n\n  stopPropagation: React.MouseEventHandler = (e: React.SyntheticEvent) => {\n    e.stopPropagation();\n  };\n\n  waitTransitionFinish(eventHandler: TransitionEndHandler) {\n    if (transitionEvent.supported && this.element.current) {\n      this.element.current.removeEventListener(\n        transitionEvent.name as string,\n        eventHandler as () => void\n      );\n      this.element.current.addEventListener(\n        transitionEvent.name as string,\n        eventHandler as () => void\n      );\n    } else {\n      if (this.transitionFinishTimeout) {\n        clearTimeout(this.transitionFinishTimeout);\n      }\n      this.transitionFinishTimeout = setTimeout(\n        eventHandler.bind(this),\n        this.timeout\n      );\n    }\n  }\n\n  renderHeader(header: React.ReactNode) {\n    switch (this.props.platform) {\n      case VKCOM:\n        return (\n          <Headline vkuiClass=\"Alert__header\" weight=\"medium\">\n            {header}\n          </Headline>\n        );\n      case IOS:\n        return (\n          <Title vkuiClass=\"Alert__header\" weight=\"1\" level=\"3\">\n            {header}\n          </Title>\n        );\n      case ANDROID:\n        return (\n          <Title vkuiClass=\"Alert__header\" weight=\"2\" level=\"2\">\n            {header}\n          </Title>\n        );\n      default:\n        return undefined;\n    }\n  }\n\n  renderText(text: React.ReactNode) {\n    switch (this.props.platform) {\n      case VKCOM:\n        return <Caption vkuiClass=\"Alert__text\">{text}</Caption>;\n      case IOS:\n        return (\n          <Caption vkuiClass=\"Alert__text\" level=\"2\">\n            {text}\n          </Caption>\n        );\n      case ANDROID:\n        return (\n          <Headline vkuiClass=\"Alert__text\" weight=\"regular\">\n            {text}\n          </Headline>\n        );\n      default:\n        return undefined;\n    }\n  }\n\n  renderAction = (action: AlertActionInterface, i: number) => {\n    const { platform } = this.props;\n\n    if (platform === IOS) {\n      const { Component = \"button\" } = action;\n      return (\n        <Tappable\n          Component={action.href ? \"a\" : Component}\n          vkuiClass={classNames(\n            \"Alert__action\",\n            `Alert__action--${action.mode}`\n          )}\n          onClick={this.onItemClick(action)}\n          href={action.href}\n          key={`alert-action-${i}`}\n          target={action.target}\n        >\n          {action.title}\n        </Tappable>\n      );\n    }\n\n    let mode: ButtonProps[\"mode\"] =\n      action.mode === \"cancel\" ? \"secondary\" : \"primary\";\n\n    if (platform === ANDROID) {\n      mode = \"tertiary\";\n\n      if (\n        this.props.viewWidth === ViewWidth.DESKTOP &&\n        action.mode === \"destructive\"\n      ) {\n        mode = \"destructive\";\n      }\n    }\n\n    return (\n      <Button\n        vkuiClass={classNames(\"Alert__button\", `Alert__button--${action.mode}`)}\n        mode={mode}\n        size=\"m\"\n        onClick={this.onItemClick(action)}\n        Component={action.Component}\n        href={action.href}\n        key={`alert-action-${i}`}\n        target={action.target}\n      >\n        {action.title}\n      </Button>\n    );\n  };\n\n  render() {\n    const {\n      actions,\n      actionsLayout,\n      children,\n      className,\n      style,\n      platform,\n      viewWidth,\n      text,\n      header,\n      ...restProps\n    } = this.props;\n    const { closing } = this.state;\n\n    const resolvedActionsLayout: TAlertProps[\"actionsLayout\"] =\n      platform === VKCOM ? \"horizontal\" : actionsLayout;\n    const canShowCloseButton =\n      platform === VKCOM ||\n      (platform === ANDROID && viewWidth >= ViewWidth.SMALL_TABLET);\n    const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n\n    return (\n      <PopoutWrapper\n        className={className}\n        closing={closing}\n        style={style}\n        onClick={this.onClose}\n      >\n        <FocusTrap\n          {...restProps}\n          getRootRef={this.element}\n          onClick={this.stopPropagation}\n          onClose={this.onClose}\n          timeout={this.timeout}\n          vkuiClass={classNames(getClassName(\"Alert\", platform), {\n            \"Alert--v\": resolvedActionsLayout === \"vertical\",\n            \"Alert--h\": resolvedActionsLayout === \"horizontal\",\n            \"Alert--closing\": closing,\n            \"Alert--desktop\": isDesktop,\n          })}\n        >\n          {canShowCloseButton && <ModalDismissButton onClick={this.onClose} />}\n          <div vkuiClass=\"Alert__content\">\n            {hasReactNode(header) && this.renderHeader(header)}\n            {hasReactNode(text) && this.renderText(text)}\n            {children}\n          </div>\n          <footer vkuiClass=\"Alert__actions\">\n            {actions?.map(this.renderAction)}\n          </footer>\n        </FocusTrap>\n      </PopoutWrapper>\n    );\n  }\n}\n\nexport const Alert = withPlatform(\n  withAdaptivity(AlertComponent, {\n    viewWidth: true,\n  })\n);\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}