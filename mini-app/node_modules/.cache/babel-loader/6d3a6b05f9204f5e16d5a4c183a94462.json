{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import bridge from\"@vkontakte/vk-bridge\";import{View,ScreenSpinner,AdaptivityProvider,AppRoot,ConfigProvider,SplitLayout,SplitCol}from\"@vkontakte/vkui\";import\"@vkontakte/vkui/dist/vkui.css\";import Home from\"./panels/Home\";import Offers from\"./panels/Offers\";import Comments from\"./panels/Comments\";import Membership from\"./panels/Membership\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(\"bright_light\"),_useState2=_slicedToArray(_useState,2),scheme=_useState2[0],setScheme=_useState2[1];var _useState3=useState(\"home\"),_useState4=_slicedToArray(_useState3,2),activePanel=_useState4[0],setActivePanel=_useState4[1];var _useState5=useState([50000]),_useState6=_slicedToArray(_useState5,2),rngValue=_useState6[0],setRngValue=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var comments=[];var handleSumChange=function handleSumChange(rngValue){setRngValue(+rngValue);};useEffect(function(){bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type===\"VKWebAppUpdateConfig\"){setScheme(data.scheme);}});function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return bridge.send(\"VKWebAppGetUserInfo\").then(function(data){if(data.id){setUser(data);}});case 2:user=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchUser.apply(this,arguments);}fetchUser();// async function fetchUser() {\n//   const token = await bridge.send(\"VKWebAppGetAuthToken\", {\n//     app_id: 51435408,\n//     scope: \"status,groups,stats,video \",\n//   });\n//   const userGroup = await bridge.send(\"VKWebAppCallAPIMethod\", {\n//     method: \"groups.get\",\n//     request_id: \"getGroups\",\n//     params: {\n//       // filter: \"admin\",\n//       extended: \"1\",\n//       fields: \"is_admin\",\n//       v: \"5.131\",\n//       access_token: token.access_token,\n//     },\n//   });\n//   setGroups(userGroup.response.items);\n// }\n// fetchUser();\n},[]);var go=function go(e){setActivePanel(e.currentTarget.dataset.to);};return/*#__PURE__*/_jsx(ConfigProvider,{scheme:scheme,children:/*#__PURE__*/_jsx(AdaptivityProvider,{children:/*#__PURE__*/_jsx(AppRoot,{children:/*#__PURE__*/_jsx(SplitLayout,{children:/*#__PURE__*/_jsx(SplitCol,{children:/*#__PURE__*/_jsxs(View,{activePanel:activePanel,children:[/*#__PURE__*/_jsx(Home,{id:\"home\",go:go,onChange:handleSumChange,rngValue:rngValue}),/*#__PURE__*/_jsx(Offers,{id:\"offers\",go:go,rngValue:rngValue}),/*#__PURE__*/_jsx(Comments,{id:\"comments\",go:go,comments:comments,user:user}),/*#__PURE__*/_jsx(Membership,{id:\"membership\",go:go})]})})})})})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","bridge","View","ScreenSpinner","AdaptivityProvider","AppRoot","ConfigProvider","SplitLayout","SplitCol","Home","Offers","Comments","Membership","App","scheme","setScheme","activePanel","setActivePanel","rngValue","setRngValue","user","setUser","comments","handleSumChange","subscribe","detail","type","data","fetchUser","send","then","id","go","e","currentTarget","dataset","to"],"sources":["C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport {\n  View,\n  ScreenSpinner,\n  AdaptivityProvider,\n  AppRoot,\n  ConfigProvider,\n  SplitLayout,\n  SplitCol,\n} from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport Home from \"./panels/Home\";\nimport Offers from \"./panels/Offers\";\nimport Comments from \"./panels/Comments\";\nimport Membership from \"./panels/Membership\";\n\nconst App = () => {\n  const [scheme, setScheme] = useState(\"bright_light\");\n  const [activePanel, setActivePanel] = useState(\"home\");\n  const [rngValue, setRngValue] = useState([50000]);\n  const [user, setUser] = useState([]);\n  let comments = [];\n\n  const handleSumChange = (rngValue) => {\n    setRngValue(+rngValue);\n  };\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === \"VKWebAppUpdateConfig\") {\n        setScheme(data.scheme);\n      }\n    });\n\n    async function fetchUser() {\n      const user = await bridge.send(\"VKWebAppGetUserInfo\").then((data) => {\n        if (data.id) {\n          setUser(data);\n        }\n      });\n    }\n    fetchUser();\n\n    // async function fetchUser() {\n    //   const token = await bridge.send(\"VKWebAppGetAuthToken\", {\n    //     app_id: 51435408,\n    //     scope: \"status,groups,stats,video \",\n    //   });\n    //   const userGroup = await bridge.send(\"VKWebAppCallAPIMethod\", {\n    //     method: \"groups.get\",\n    //     request_id: \"getGroups\",\n    //     params: {\n    //       // filter: \"admin\",\n    //       extended: \"1\",\n    //       fields: \"is_admin\",\n    //       v: \"5.131\",\n    //       access_token: token.access_token,\n    //     },\n    //   });\n    //   setGroups(userGroup.response.items);\n    // }\n    // fetchUser();\n  }, []);\n\n  const go = (e) => {\n    setActivePanel(e.currentTarget.dataset.to);\n  };\n\n  return (\n    <ConfigProvider scheme={scheme}>\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout>\n            <SplitCol>\n              <View activePanel={activePanel}>\n                <Home\n                  id=\"home\"\n                  go={go}\n                  onChange={handleSumChange}\n                  rngValue={rngValue}\n                />\n                <Offers id=\"offers\" go={go} rngValue={rngValue} />\n                <Comments\n                  id=\"comments\"\n                  go={go}\n                  comments={comments}\n                  user={user}\n                />\n                <Membership id=\"membership\" go={go} />\n              </View>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n};\n\nexport default App;\n"],"mappings":"2aAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OACEC,IAAI,CACJC,aAAa,CACbC,kBAAkB,CAClBC,OAAO,CACPC,cAAc,CACdC,WAAW,CACXC,QAAQ,KACH,iBAAiB,CACxB,MAAO,+BAA+B,CAEtC,MAAOC,KAAI,KAAM,eAAe,CAChC,MAAOC,OAAM,KAAM,iBAAiB,CACpC,MAAOC,SAAQ,KAAM,mBAAmB,CACxC,MAAOC,WAAU,KAAM,qBAAqB,CAAC,wFAE7C,GAAMC,IAAG,CAAG,QAANA,IAAG,EAAS,CAChB,cAA4Bd,QAAQ,CAAC,cAAc,CAAC,wCAA7Ce,MAAM,eAAEC,SAAS,eACxB,eAAsChB,QAAQ,CAAC,MAAM,CAAC,yCAA/CiB,WAAW,eAAEC,cAAc,eAClC,eAAgClB,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,yCAA1CmB,QAAQ,eAAEC,WAAW,eAC5B,eAAwBpB,QAAQ,CAAC,EAAE,CAAC,yCAA7BqB,IAAI,eAAEC,OAAO,eACpB,GAAIC,SAAQ,CAAG,EAAE,CAEjB,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIL,QAAQ,CAAK,CACpCC,WAAW,CAAC,CAACD,QAAQ,CAAC,CACxB,CAAC,CAEDlB,SAAS,CAAC,UAAM,CACdC,MAAM,CAACuB,SAAS,CAAC,cAAgC,sBAA7BC,MAAM,CAAIC,IAAI,aAAJA,IAAI,CAAEC,IAAI,aAAJA,IAAI,CACtC,GAAID,IAAI,GAAK,sBAAsB,CAAE,CACnCX,SAAS,CAACY,IAAI,CAACb,MAAM,CAAC,CACxB,CACF,CAAC,CAAC,CAAC,QAEYc,UAAS,uIAAxB,oKACqB3B,OAAM,CAAC4B,IAAI,CAAC,qBAAqB,CAAC,CAACC,IAAI,CAAC,SAACH,IAAI,CAAK,CACnE,GAAIA,IAAI,CAACI,EAAE,CAAE,CACXV,OAAO,CAACM,IAAI,CAAC,CACf,CACF,CAAC,CAAC,QAJIP,IAAI,qEAKX,4CACDQ,SAAS,EAAE,CAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMI,GAAE,CAAG,QAALA,GAAE,CAAIC,CAAC,CAAK,CAChBhB,cAAc,CAACgB,CAAC,CAACC,aAAa,CAACC,OAAO,CAACC,EAAE,CAAC,CAC5C,CAAC,CAED,mBACE,KAAC,cAAc,EAAC,MAAM,CAAEtB,MAAO,uBAC7B,KAAC,kBAAkB,wBACjB,KAAC,OAAO,wBACN,KAAC,WAAW,wBACV,KAAC,QAAQ,wBACP,MAAC,IAAI,EAAC,WAAW,CAAEE,WAAY,wBAC7B,KAAC,IAAI,EACH,EAAE,CAAC,MAAM,CACT,EAAE,CAAEgB,EAAG,CACP,QAAQ,CAAET,eAAgB,CAC1B,QAAQ,CAAEL,QAAS,EACnB,cACF,KAAC,MAAM,EAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAEc,EAAG,CAAC,QAAQ,CAAEd,QAAS,EAAG,cAClD,KAAC,QAAQ,EACP,EAAE,CAAC,UAAU,CACb,EAAE,CAAEc,EAAG,CACP,QAAQ,CAAEV,QAAS,CACnB,IAAI,CAAEF,IAAK,EACX,cACF,KAAC,UAAU,EAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAEY,EAAG,EAAG,GACjC,EACE,EACC,EACN,EACS,EACN,CAErB,CAAC,CAED,cAAenB,IAAG"},"metadata":{},"sourceType":"module"}