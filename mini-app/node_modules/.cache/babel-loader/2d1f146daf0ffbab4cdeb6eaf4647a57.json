{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\zpili\\\\Desktop\\\\Finbox-VK-mini-apps\\\\mini-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import bridge from\"@vkontakte/vk-bridge\";import{View,ScreenSpinner,AdaptivityProvider,AppRoot,ConfigProvider,SplitLayout,SplitCol}from\"@vkontakte/vkui\";import\"@vkontakte/vkui/dist/vkui.css\";import Home from\"./panels/Home\";import{jsx as _jsx}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(\"bright_light\"),_useState2=_slicedToArray(_useState,2),scheme=_useState2[0],setScheme=_useState2[1];var _useState3=useState(\"home\"),_useState4=_slicedToArray(_useState3,2),activePanel=_useState4[0],setActivePanel=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),groups=_useState6[0],setGroups=_useState6[1];// const [fetchedUser, setUser] = useState(null);\n// const [popout, setPopout] = useState(null);\nuseEffect(function(){bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type===\"VKWebAppUpdateConfig\"){setScheme(data.scheme);}});function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,userGroup;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return bridge.send(\"VKWebAppGetAuthToken\",{app_id:51435408,scope:\"status,groups,stats,video \"});case 2:token=_context.sent;_context.next=5;return bridge.send(\"VKWebAppCallAPIMethod\",{method:\"groups.get\",request_id:\"getGroups\",params:{// filter: \"admin\",\nextended:\"1\",fields:\"is_admin\",v:\"5.131\",access_token:token.access_token}});case 5:userGroup=_context.sent;setGroups(userGroup.response.items);case 7:case\"end\":return _context.stop();}}},_callee);}));return _fetchUser.apply(this,arguments);}fetchUser();},[]);var go=function go(e){setActivePanel(e.currentTarget.dataset.to);};return/*#__PURE__*/_jsx(ConfigProvider,{scheme:scheme,children:/*#__PURE__*/_jsx(AdaptivityProvider,{children:/*#__PURE__*/_jsx(AppRoot,{children:/*#__PURE__*/_jsx(SplitLayout,{children:/*#__PURE__*/_jsx(SplitCol,{children:/*#__PURE__*/_jsx(View,{activePanel:activePanel,children:/*#__PURE__*/_jsx(Home,{id:\"home\",groups:groups})})})})})})});};export default App;","map":{"version":3,"sources":["C:/Users/zpili/Desktop/Finbox-VK-mini-apps/mini-app/src/App.js"],"names":["React","useState","useEffect","bridge","View","ScreenSpinner","AdaptivityProvider","AppRoot","ConfigProvider","SplitLayout","SplitCol","Home","App","scheme","setScheme","activePanel","setActivePanel","groups","setGroups","subscribe","detail","type","data","fetchUser","send","app_id","scope","token","method","request_id","params","extended","fields","v","access_token","userGroup","response","items","go","e","currentTarget","dataset","to"],"mappings":"waAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OACEC,IADF,CAEEC,aAFF,CAGEC,kBAHF,CAIEC,OAJF,CAKEC,cALF,CAMEC,WANF,CAOEC,QAPF,KAQO,iBARP,CASA,MAAO,+BAAP,CAEA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,C,2CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,cAA4BX,QAAQ,CAAC,cAAD,CAApC,wCAAOY,MAAP,eAAeC,SAAf,eACA,eAAsCb,QAAQ,CAAC,MAAD,CAA9C,yCAAOc,WAAP,eAAoBC,cAApB,eACA,eAA4Bf,QAAQ,CAAC,EAAD,CAApC,yCAAOgB,MAAP,eAAeC,SAAf,eACA;AACA;AAEAhB,SAAS,CAAC,UAAM,CACdC,MAAM,CAACgB,SAAP,CAAiB,cAAgC,sBAA7BC,MAA6B,CAAnBC,IAAmB,aAAnBA,IAAmB,CAAbC,IAAa,aAAbA,IAAa,CAC/C,GAAID,IAAI,GAAK,sBAAb,CAAqC,CACnCP,SAAS,CAACQ,IAAI,CAACT,MAAN,CAAT,CACD,CACF,CAJD,EADc,QAOCU,CAAAA,SAPD,qIAOd,6KACsBpB,CAAAA,MAAM,CAACqB,IAAP,CAAY,sBAAZ,CAAoC,CACtDC,MAAM,CAAE,QAD8C,CAEtDC,KAAK,CAAE,4BAF+C,CAApC,CADtB,QACQC,KADR,qCAK0BxB,CAAAA,MAAM,CAACqB,IAAP,CAAY,uBAAZ,CAAqC,CAC3DI,MAAM,CAAE,YADmD,CAE3DC,UAAU,CAAE,WAF+C,CAG3DC,MAAM,CAAE,CACN;AACAC,QAAQ,CAAE,GAFJ,CAGNC,MAAM,CAAE,UAHF,CAINC,CAAC,CAAE,OAJG,CAKNC,YAAY,CAAEP,KAAK,CAACO,YALd,CAHmD,CAArC,CAL1B,QAKQC,SALR,eAgBEjB,SAAS,CAACiB,SAAS,CAACC,QAAV,CAAmBC,KAApB,CAAT,CAhBF,sDAPc,4CAyBdd,SAAS,GACV,CA1BQ,CA0BN,EA1BM,CAAT,CA4BA,GAAMe,CAAAA,EAAE,CAAG,QAALA,CAAAA,EAAK,CAACC,CAAD,CAAO,CAChBvB,cAAc,CAACuB,CAAC,CAACC,aAAF,CAAgBC,OAAhB,CAAwBC,EAAzB,CAAd,CACD,CAFD,CAIA,mBACE,KAAC,cAAD,EAAgB,MAAM,CAAE7B,MAAxB,uBACE,KAAC,kBAAD,wBACE,KAAC,OAAD,wBACE,KAAC,WAAD,wBACE,KAAC,QAAD,wBACE,KAAC,IAAD,EAAM,WAAW,CAAEE,WAAnB,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,MAAT,CAAgB,MAAM,CAAEE,MAAxB,EADF,EADF,EADF,EADF,EADF,EADF,EADF,CAeD,CAtDD,CAwDA,cAAeL,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport {\n  View,\n  ScreenSpinner,\n  AdaptivityProvider,\n  AppRoot,\n  ConfigProvider,\n  SplitLayout,\n  SplitCol,\n} from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport Home from \"./panels/Home\";\n\nconst App = () => {\n  const [scheme, setScheme] = useState(\"bright_light\");\n  const [activePanel, setActivePanel] = useState(\"home\");\n  const [groups, setGroups] = useState([]);\n  // const [fetchedUser, setUser] = useState(null);\n  // const [popout, setPopout] = useState(null);\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === \"VKWebAppUpdateConfig\") {\n        setScheme(data.scheme);\n      }\n    });\n\n    async function fetchUser() {\n      const token = await bridge.send(\"VKWebAppGetAuthToken\", {\n        app_id: 51435408,\n        scope: \"status,groups,stats,video \",\n      });\n      const userGroup = await bridge.send(\"VKWebAppCallAPIMethod\", {\n        method: \"groups.get\",\n        request_id: \"getGroups\",\n        params: {\n          // filter: \"admin\",\n          extended: \"1\",\n          fields: \"is_admin\",\n          v: \"5.131\",\n          access_token: token.access_token,\n        },\n      });\n      setGroups(userGroup.response.items);\n    }\n    fetchUser();\n  }, []);\n\n  const go = (e) => {\n    setActivePanel(e.currentTarget.dataset.to);\n  };\n\n  return (\n    <ConfigProvider scheme={scheme}>\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout>\n            <SplitCol>\n              <View activePanel={activePanel}>\n                <Home id=\"home\" groups={groups} />\n              </View>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}