{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar CustomStorage = /*#__PURE__*/function () {\n  function CustomStorage() {\n    var _this = this;\n    _classCallCheck(this, CustomStorage);\n    _defineProperty(this, \"data\", {});\n    _defineProperty(this, \"getItem\", function (key) {\n      return _this.data.hasOwnProperty(key) ? _this.data[key] : null;\n    });\n    _defineProperty(this, \"keys\", function () {\n      return Object.keys(_this.data);\n    });\n  }\n  _createClass(CustomStorage, [{\n    key: \"setItem\",\n    value: function setItem(key, val) {\n      this.data[key] = String(val);\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(id) {\n      delete this.data[id];\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.data = {};\n    }\n  }, {\n    key: \"key\",\n    value: function key(index) {\n      return Object.keys(this.data)[index];\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return Object.keys(this.data).length;\n    }\n  }]);\n  return CustomStorage;\n}();\nvar dummyKey = 'vk-ls-dummy';\nvar dummyContent = 'test';\nvar ls;\nfunction getLocalStorage() {\n  if (ls) {\n    return ls;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.localStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.localStorage.getItem(dummyKey)) {\n      throw new Error('localStorage is broken');\n    }\n    window.localStorage.removeItem(dummyKey);\n    ls = window.localStorage;\n  } catch (e) {\n    ls = new CustomStorage();\n  }\n  return ls;\n}\n/**\n * Обертка над localStorage для кода, который может использоваться на других сайтах\n * Firefox блокирует доступ к localStorage для скриптов с других доменов\n */\n\nexport var localStorage = {\n  setItem: function setItem(key, val) {\n    return getLocalStorage().setItem(key, val);\n  },\n  getItem: function getItem(key) {\n    return getLocalStorage().getItem(key);\n  },\n  removeItem: function removeItem(key) {\n    return getLocalStorage().removeItem(key);\n  },\n  clear: function clear() {\n    return getLocalStorage().clear();\n  },\n  length: function length() {\n    return getLocalStorage().length;\n  },\n  key: function key(index) {\n    return getLocalStorage().key(index);\n  },\n  keys: function keys() {\n    var storage = getLocalStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: function getPrefixedKeys(prefix) {\n    return localStorage.keys().filter(function (key) {\n      return key.startsWith(prefix);\n    });\n  }\n};\nvar sessionStorageCache;\nfunction getSessionStorage() {\n  if (sessionStorageCache) {\n    return sessionStorageCache;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.sessionStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.sessionStorage.getItem(dummyKey)) {\n      throw new Error('sessionStorage is broken');\n    }\n    window.sessionStorage.removeItem(dummyKey);\n    sessionStorageCache = window.sessionStorage;\n  } catch (e) {\n    sessionStorageCache = new CustomStorage();\n  }\n  return sessionStorageCache;\n}\nexport var sessionStorage = {\n  setItem: function setItem(key, val) {\n    return getSessionStorage().setItem(key, val);\n  },\n  getItem: function getItem(key) {\n    return getSessionStorage().getItem(key);\n  },\n  removeItem: function removeItem(key) {\n    return getSessionStorage().removeItem(key);\n  },\n  clear: function clear() {\n    return getSessionStorage().clear();\n  },\n  length: function length() {\n    return getSessionStorage().length;\n  },\n  key: function key(index) {\n    return getSessionStorage().key(index);\n  },\n  keys: function keys() {\n    var storage = getSessionStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: function getPrefixedKeys(prefix) {\n    return sessionStorage.keys().filter(function (key) {\n      return key.startsWith(prefix);\n    });\n  }\n};","map":{"version":3,"mappings":";;;IAEMA,a;;;;kCAC+B,E;qCAMlB,UAACC,GAAD;MAAA,OAAiBC,KAAI,CAACC,IAAL,CAAUC,cAAV,CAAyBH,GAAzB,IAAgCC,KAAI,CAACC,IAAL,CAAUF,GAAV,CAAhC,GAAiD,IAAlE;IAAA,C;kCAkBH;MAAA,OAAgBI,MAAM,CAACC,IAAP,CAAYJ,KAAI,CAACC,IAAjB,CAAhB;IAAA,C;;;;4BAtBCF,G,EAAaM,G,EAAa;MACvC,KAAKJ,IAAL,CAAUF,GAAV,IAAiBO,MAAM,CAACD,GAAD,CAAvB;IACD;;;+BAIiBE,E,EAAY;MAC5B,OAAO,KAAKN,IAAL,CAAUM,EAAV,CAAP;IACD;;;4BAEc;MACb,KAAKN,IAAL,GAAY,EAAZ;IACD;;;wBAMUO,K,EAA8B;MACvC,OAAOL,MAAM,CAACC,IAAP,CAAY,KAAKH,IAAjB,EAAuBO,KAAvB,CAAP;IACD;;;wBANmB;MAClB,OAAOL,MAAM,CAACC,IAAP,CAAY,KAAKH,IAAjB,EAAuBQ,MAA9B;IACD;;;;AASH,IAAMC,QAAQ,GAAG,aAAjB;AACA,IAAMC,YAAY,GAAG,MAArB;AAEA,IAAIC,EAAJ;AAEA,SAASC,eAAT,GAA2B;EACzB,IAAID,EAAJ,EAAQ;IACN,OAAOA,EAAP;EACD;EACD,IAAI;IACF;IACAE,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BN,QAA5B,EAAsCC,YAAtC;IACA,IAAIA,YAAY,KAAKG,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4BP,QAA5B,CAArB,EAA4D;MAC1D,MAAM,IAAIQ,KAAJ,CAAU,wBAAV,CAAN;IACD;IACDJ,MAAM,CAACC,YAAP,CAAoBI,UAApB,CAA+BT,QAA/B;IACAE,EAAE,GAAGE,MAAM,CAACC,YAAZ;EACD,CARD,CAQE,OAAOK,CAAP,EAAU;IACVR,EAAE,GAAG,IAAId,aAAJ,EAAL;EACD;EACD,OAAOc,EAAP;AACD;AAED;;;;;AAIA,OAAO,IAAMG,YAAY,GAAG;EAC1BC,OAAO,EAAE,iBAACjB,GAAD,EAAcM,GAAd;IAAA,OAA8BQ,eAAe,GAAGG,OAAlB,CAA0BjB,GAA1B,EAA+BM,GAA/B,CAA9B;EAAA,CADiB;EAE1BY,OAAO,EAAE,iBAAClB,GAAD;IAAA,OAAiBc,eAAe,GAAGI,OAAlB,CAA0BlB,GAA1B,CAAjB;EAAA,CAFiB;EAG1BoB,UAAU,EAAE,oBAACpB,GAAD;IAAA,OAAiBc,eAAe,GAAGM,UAAlB,CAA6BpB,GAA7B,CAAjB;EAAA,CAHc;EAI1BsB,KAAK,EAAE;IAAA,OAAMR,eAAe,GAAGQ,KAAlB,EAAN;EAAA,CAJmB;EAK1BZ,MAAM,EAAE;IAAA,OAAMI,eAAe,GAAGJ,MAAxB;EAAA,CALkB;EAM1BV,GAAG,EAAE,aAACS,KAAD;IAAA,OAAmBK,eAAe,GAAGd,GAAlB,CAAsBS,KAAtB,CAAnB;EAAA,CANqB;EAO1BJ,IAP0B,kBAOT;IACf,IAAMkB,OAAO,GAAGT,eAAe,EAA/B;IACA,IAAIS,OAAO,YAAYxB,aAAvB,EAAsC;MACpC,OAAOwB,OAAO,CAAClB,IAAR,EAAP;IACD,CAFD,MAEO;MACL,OAAOD,MAAM,CAACC,IAAP,CAAYkB,OAAZ,CAAP;IACD;EACF,CAdyB;EAe1BC,eAAe,EAAE,yBAACC,MAAD;IAAA,OAA8BT,YAAY,CAACX,IAAb,GAAoBqB,MAApB,CAA2B,UAAC1B,GAAD;MAAA,OAASA,GAAG,CAAC2B,UAAJ,CAAeF,MAAf,CAAT;IAAA,CAA3B,CAA9B;EAAA;AAfS,CAArB;AAkBP,IAAIG,mBAAJ;AAEA,SAASC,iBAAT,GAA6B;EAC3B,IAAID,mBAAJ,EAAyB;IACvB,OAAOA,mBAAP;EACD;EACD,IAAI;IACF;IACAb,MAAM,CAACe,cAAP,CAAsBb,OAAtB,CAA8BN,QAA9B,EAAwCC,YAAxC;IACA,IAAIA,YAAY,KAAKG,MAAM,CAACe,cAAP,CAAsBZ,OAAtB,CAA8BP,QAA9B,CAArB,EAA8D;MAC5D,MAAM,IAAIQ,KAAJ,CAAU,0BAAV,CAAN;IACD;IACDJ,MAAM,CAACe,cAAP,CAAsBV,UAAtB,CAAiCT,QAAjC;IACAiB,mBAAmB,GAAGb,MAAM,CAACe,cAA7B;EACD,CARD,CAQE,OAAOT,CAAP,EAAU;IACVO,mBAAmB,GAAG,IAAI7B,aAAJ,EAAtB;EACD;EACD,OAAO6B,mBAAP;AACD;AAED,OAAO,IAAME,cAAc,GAAG;EAC5Bb,OAAO,EAAE,iBAACjB,GAAD,EAAcM,GAAd;IAAA,OAA8BuB,iBAAiB,GAAGZ,OAApB,CAA4BjB,GAA5B,EAAiCM,GAAjC,CAA9B;EAAA,CADmB;EAE5BY,OAAO,EAAE,iBAAClB,GAAD;IAAA,OAAiB6B,iBAAiB,GAAGX,OAApB,CAA4BlB,GAA5B,CAAjB;EAAA,CAFmB;EAG5BoB,UAAU,EAAE,oBAACpB,GAAD;IAAA,OAAiB6B,iBAAiB,GAAGT,UAApB,CAA+BpB,GAA/B,CAAjB;EAAA,CAHgB;EAI5BsB,KAAK,EAAE;IAAA,OAAMO,iBAAiB,GAAGP,KAApB,EAAN;EAAA,CAJqB;EAK5BZ,MAAM,EAAE;IAAA,OAAMmB,iBAAiB,GAAGnB,MAA1B;EAAA,CALoB;EAM5BV,GAAG,EAAE,aAACS,KAAD;IAAA,OAAmBoB,iBAAiB,GAAG7B,GAApB,CAAwBS,KAAxB,CAAnB;EAAA,CANuB;EAO5BJ,IAP4B,kBAOX;IACf,IAAMkB,OAAO,GAAGM,iBAAiB,EAAjC;IACA,IAAIN,OAAO,YAAYxB,aAAvB,EAAsC;MACpC,OAAOwB,OAAO,CAAClB,IAAR,EAAP;IACD,CAFD,MAEO;MACL,OAAOD,MAAM,CAACC,IAAP,CAAYkB,OAAZ,CAAP;IACD;EACF,CAd2B;EAe5BC,eAAe,EAAE,yBAACC,MAAD;IAAA,OAA8BK,cAAc,CAACzB,IAAf,GAAsBqB,MAAtB,CAA6B,UAAC1B,GAAD;MAAA,OAASA,GAAG,CAAC2B,UAAJ,CAAeF,MAAf,CAAT;IAAA,CAA7B,CAA9B;EAAA;AAfW,CAAvB","names":["CustomStorage","key","_this","data","hasOwnProperty","Object","keys","val","String","id","index","length","dummyKey","dummyContent","ls","getLocalStorage","window","localStorage","setItem","getItem","Error","removeItem","e","clear","storage","getPrefixedKeys","prefix","filter","startsWith","sessionStorageCache","getSessionStorage","sessionStorage"],"sources":["C:\\Users\\zpili\\Desktop\\Finbox-VK-mini-apps\\mini-app\\node_modules\\@vkontakte\\vkui\\node_modules\\@vkontakte\\vkjs\\src\\storage.ts"],"sourcesContent":["import { Dictionary } from './types';\n\nclass CustomStorage {\n  private data: Dictionary<string> = {};\n\n  public setItem(key: string, val: string) {\n    this.data[key] = String(val);\n  };\n\n  public getItem = (key: string) => this.data.hasOwnProperty(key) ? this.data[key] : null;\n\n  public removeItem(id: string) {\n    delete this.data[id];\n  };\n\n  public clear() {\n    this.data = {};\n  }\n\n  public get length() {\n    return Object.keys(this.data).length;\n  };\n\n  public key(index: number): string | null {\n    return Object.keys(this.data)[index];\n  }\n\n  public keys = (): string[] => Object.keys(this.data);\n}\n\nconst dummyKey = 'vk-ls-dummy';\nconst dummyContent = 'test';\n\nlet ls: CustomStorage | Storage;\n\nfunction getLocalStorage() {\n  if (ls) {\n    return ls;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.localStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.localStorage.getItem(dummyKey)) {\n      throw new Error('localStorage is broken');\n    }\n    window.localStorage.removeItem(dummyKey);\n    ls = window.localStorage;\n  } catch (e) {\n    ls = new CustomStorage();\n  }\n  return ls;\n}\n\n/**\n * Обертка над localStorage для кода, который может использоваться на других сайтах\n * Firefox блокирует доступ к localStorage для скриптов с других доменов\n */\nexport const localStorage = {\n  setItem: (key: string, val: string) => getLocalStorage().setItem(key, val),\n  getItem: (key: string) => getLocalStorage().getItem(key),\n  removeItem: (key: string) => getLocalStorage().removeItem(key),\n  clear: () => getLocalStorage().clear(),\n  length: () => getLocalStorage().length,\n  key: (index: number) => getLocalStorage().key(index),\n  keys(): string[] {\n    const storage = getLocalStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: (prefix: string): string[] => localStorage.keys().filter((key) => key.startsWith(prefix)),\n};\n\nlet sessionStorageCache: CustomStorage | Storage;\n\nfunction getSessionStorage() {\n  if (sessionStorageCache) {\n    return sessionStorageCache;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.sessionStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.sessionStorage.getItem(dummyKey)) {\n      throw new Error('sessionStorage is broken');\n    }\n    window.sessionStorage.removeItem(dummyKey);\n    sessionStorageCache = window.sessionStorage;\n  } catch (e) {\n    sessionStorageCache = new CustomStorage();\n  }\n  return sessionStorageCache;\n}\n\nexport const sessionStorage = {\n  setItem: (key: string, val: string) => getSessionStorage().setItem(key, val),\n  getItem: (key: string) => getSessionStorage().getItem(key),\n  removeItem: (key: string) => getSessionStorage().removeItem(key),\n  clear: () => getSessionStorage().clear(),\n  length: () => getSessionStorage().length,\n  key: (index: number) => getSessionStorage().key(index),\n  keys(): string[] {\n    const storage = getSessionStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: (prefix: string): string[] => sessionStorage.keys().filter((key) => key.startsWith(prefix)),\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}